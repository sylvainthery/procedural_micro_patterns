
"use strict";function download(t,e,i){function n(t){var e=t.split(/[:;,]/),i=e[1],n="base64"==e[2]?atob:decodeURIComponent,r=n(e.pop()),o=r.length,a=0,s=new Uint8Array(o);for(a;a<o;++a)s[a]=r.charCodeAt(a);return new m([s],{type:i})}function r(t,e){if("download"in c)return c.href=t,c.setAttribute("download",g),c.innerHTML="downloading...",c.style.display="none",l.body.appendChild(c),setTimeout(function(){c.click(),l.body.removeChild(c),e===!0&&setTimeout(function(){h.URL.revokeObjectURL(c.href)},250)},66),!0;var i=l.createElement("iframe");l.body.appendChild(i),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,f)),i.src=t,setTimeout(function(){l.body.removeChild(i)},333)}var o,a,s,h=window,f="application/octet-stream",u=i||f,d=t,l=document,c=l.createElement("a"),p=function(t){return String(t)},m=h.Blob||h.MozBlob||h.WebKitBlob||p,w=h.MSBlobBuilder||h.WebKitBlobBuilder||h.BlobBuilder,g=e||"download";if("true"===String(this)&&(d=[d,u],u=d[0],d=d[1]),String(d).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(n(d),g):r(d);try{o=d instanceof m?d:new m([d],{type:u})}catch(t){w&&(a=new w,a.append([d]),o=a.getBlob(u))}if(navigator.msSaveBlob)return navigator.msSaveBlob(o,g);if(h.URL)r(h.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===p)try{return r("data:"+u+";base64,"+h.btoa(o))}catch(t){return r("data:"+u+","+encodeURIComponent(o))}s=new FileReader,s.onload=function(t){r(this.result)},s.readAsDataURL(o)}return!0}!function(){var t=function(t){this.data=new Uint8Array(t),this.pos=0};t.prototype.seek=function(t){this.pos=t},t.prototype.writeBytes=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t[e]},t.prototype.writeByte=function(t){this.data[this.pos++]=t},t.prototype.writeU8=t.prototype.writeByte,t.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},t.prototype.writeDoubleBE=function(t){for(var e=new Uint8Array(new Float64Array([t]).buffer),i=e.length-1;i>=0;i--)this.writeByte(e[i])},t.prototype.writeFloatBE=function(t){for(var e=new Uint8Array(new Float32Array([t]).buffer),i=e.length-1;i>=0;i--)this.writeByte(e[i])},t.prototype.writeString=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t.charCodeAt(e)},t.prototype.writeEBMLVarIntWidth=function(t,e){switch(e){case 1:this.writeU8(128|t);break;case 2:this.writeU8(64|t>>8),this.writeU8(t);break;case 3:this.writeU8(32|t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 4:this.writeU8(16|t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 5:this.writeU8(8|t/4294967296&7),this.writeU8(t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;default:throw new RuntimeException("Bad EBML VINT size "+e)}},t.prototype.measureEBMLVarInt=function(t){if(t<127)return 1;if(t<16383)return 2;if(t<2097151)return 3;if(t<268435455)return 4;if(t<34359738367)return 5;throw new RuntimeException("EBML VINT size not supported "+t)},t.prototype.writeEBMLVarInt=function(t){this.writeEBMLVarIntWidth(t,this.measureEBMLVarInt(t))},t.prototype.writeUnsignedIntBE=function(t,e){switch(void 0===e&&(e=this.measureUnsignedInt(t)),e){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw new RuntimeException("Bad UINT size "+e)}},t.prototype.measureUnsignedInt=function(t){return t<256?1:t<65536?2:t<1<<24?3:t<4294967296?4:5},t.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayBufferDataStream's pos lies beyond end of buffer"},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:window.ArrayBufferDataStream=t}(),function(){var t=function(t){return function(e){function i(t){return new Promise(function(e,i){var n=new FileReader;n.addEventListener("loadend",function(){e(n.result)}),n.readAsArrayBuffer(t)})}function n(t){return new Promise(function(e,n){e(t instanceof Uint8Array?t:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?new Uint8Array(t):t instanceof Blob?i(t).then(function(t){return new Uint8Array(t)}):i(new Blob([t])).then(function(t){return new Uint8Array(t)}))})}function r(t){var e=t.byteLength||t.length||t.size;if(!Number.isInteger(e))throw"Failed to determine size of element";return e}var o=[],a=Promise.resolve(),s=null,h=null;"undefined"!=typeof FileWriter&&e instanceof FileWriter?s=e:t&&e&&(h=e),this.pos=0,this.length=0,this.seek=function(t){if(t<0)throw"Offset may not be negative";if(isNaN(t))throw"Offset may not be NaN";if(t>this.length)throw"Seeking beyond the end of file is not allowed";this.pos=t},this.write=function(e){var i={offset:this.pos,data:e,length:r(e)},f=i.offset>=this.length;this.pos+=i.length,this.length=Math.max(this.length,this.pos),a=a.then(function(){if(h)return new Promise(function(e,r){n(i.data).then(function(n){var r=0,o=Buffer.from(n.buffer),a=function(n,o,s){r+=o,r>=s.length?e():t.write(h,s,r,s.length-r,i.offset+r,a)};t.write(h,o,0,o.length,i.offset,a)})});if(s)return new Promise(function(t,e){s.onwriteend=t,s.seek(i.offset),s.write(new Blob([i.data]))});if(!f)for(var e=0;e<o.length;e++){var r=o[e];if(!(i.offset+i.length<=r.offset||i.offset>=r.offset+r.length)){if(i.offset<r.offset||i.offset+i.length>r.offset+r.length)throw new Error("Overwrite crosses blob boundaries");return i.offset==r.offset&&i.length==r.length?void(r.data=i.data):n(r.data).then(function(t){return r.data=t,n(i.data)}).then(function(t){i.data=t,r.data.set(i.data,i.offset-r.offset)})}}o.push(i)})},this.complete=function(t){return a=h||s?a.then(function(){return null}):a.then(function(){for(var e=[],i=0;i<o.length;i++)e.push(o[i].data);return new Blob(e,{mimeType:t})})}}};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t(require("fs")):window.BlobBuffer=t(null)}(),function(){var t=function(t,e){function i(t,e){var i={};return[t,e].forEach(function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}),i}function n(t){return!("string"!=typeof t||!t.match(/^data:image\/webp;base64,/i))&&window.atob(t.substring("data:image/webp;base64,".length))}function r(t,e){var i=t.toDataURL("image/webp",{quality:e});return n(i)}function o(t){var e=t.indexOf("VP8 ");if(e==-1)throw"Failed to identify beginning of keyframe in WebP image";return e+="VP8 ".length+4,t.substring(e)}function a(t){this.value=t}function s(t){this.value=t}function h(t,e,i){if(Array.isArray(i))for(var n=0;n<i.length;n++)h(t,e,i[n]);else if("string"==typeof i)t.writeString(i);else if(i instanceof Uint8Array)t.writeBytes(i);else{if(!i.id)throw"Bad EBML datatype "+typeof i.data;if(i.offset=t.pos+e,t.writeUnsignedIntBE(i.id),Array.isArray(i.data)){var r,o,f;i.size===-1?t.writeByte(255):(r=t.pos,t.writeBytes([0,0,0,0])),o=t.pos,i.dataOffset=o+e,h(t,e,i.data),i.size!==-1&&(f=t.pos,i.size=f-o,t.seek(r),t.writeEBMLVarIntWidth(i.size,4),t.seek(f))}else if("string"==typeof i.data)t.writeEBMLVarInt(i.data.length),i.dataOffset=t.pos+e,t.writeString(i.data);else if("number"==typeof i.data)i.size||(i.size=t.measureUnsignedInt(i.data)),t.writeEBMLVarInt(i.size),i.dataOffset=t.pos+e,t.writeUnsignedIntBE(i.data,i.size);else if(i.data instanceof s)t.writeEBMLVarInt(8),i.dataOffset=t.pos+e,t.writeDoubleBE(i.data.value);else if(i.data instanceof a)t.writeEBMLVarInt(4),i.dataOffset=t.pos+e,t.writeFloatBE(i.data.value);else{if(!(i.data instanceof Uint8Array))throw"Bad EBML datatype "+typeof i.data;t.writeEBMLVarInt(i.data.byteLength),i.dataOffset=t.pos+e,t.writeBytes(i.data)}}}return function(n){function a(t){return t-B.dataOffset}function f(){var t={id:21420,size:5,data:0},e={id:290298740,data:[]};for(var i in D){var n=D[i];n.positionEBML=Object.create(t),e.data.push({id:19899,data:[{id:21419,data:n.id},n.positionEBML]})}return e}function u(){x=f();var e={id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]},i={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:"webm-writer-js"},{id:22337,data:"webm-writer-js"},M]},n={id:374648427,data:[{id:174,data:[{id:215,data:A},{id:29637,data:A},{id:156,data:0},{id:2274716,data:"und"},{id:134,data:"V_VP8"},{id:2459272,data:"VP8"},{id:131,data:1},{id:224,data:[{id:176,data:b},{id:186,data:k}]}]}]};B={id:408125543,size:-1,data:[x,i,n]};var r=new t(256);h(r,S.pos,[e,B]),S.write(r.getAsDataArray()),D.SegmentInfo.positionEBML.data=a(i.offset),D.Tracks.positionEBML.data=a(n.offset)}function d(e){var i=new t(4);if(!(e.trackNumber>0&&e.trackNumber<127))throw"TrackNumber must be > 0 and < 127";return i.writeEBMLVarInt(e.trackNumber),i.writeU16BE(e.timecode),i.writeByte(128),{id:163,data:[i.getAsDataArray(),e.frame]}}function l(t){return{id:524531317,data:[{id:231,data:Math.round(t.timecode)}]}}function c(t,e,i){_.push({id:187,data:[{id:179,data:e},{id:183,data:[{id:247,data:t},{id:241,data:a(i)}]}]})}function p(){var e={id:475249515,data:_},i=new t(16+32*_.length);h(i,S.pos,e),S.write(i.getAsDataArray()),D.Cues.positionEBML.data=a(e.offset)}function m(){if(0!=T.length){for(var e=0,i=0;i<T.length;i++)e+=T[i].frame.length;for(var n=new t(e+32*T.length),r=l({timecode:Math.round(U)}),i=0;i<T.length;i++)r.data.push(d(T[i]));h(n,S.pos,r),S.write(n.getAsDataArray()),c(A,Math.round(U),r.offset),T=[],U+=F,F=0}}function w(){if(!n.frameDuration){if(!n.frameRate)throw"Missing required frameDuration or frameRate setting";n.frameDuration=1e3/n.frameRate}}function g(t){t.trackNumber=A,t.timecode=Math.round(F),T.push(t),F+=t.duration,F>=E&&m()}function y(){var e=new t(x.size),i=S.pos;h(e,x.dataOffset,x.data),S.seek(x.dataOffset),S.write(e.getAsDataArray()),S.seek(i)}function v(){var e=new t(8),i=S.pos;e.writeDoubleBE(U),S.seek(M.dataOffset),S.write(e.getAsDataArray()),S.seek(i)}var b,k,B,x,E=5e3,A=1,L=!1,T=[],U=0,F=0,I={quality:.95,fileWriter:null,fd:null,frameDuration:null,frameRate:null},D={Cues:{id:new Uint8Array([28,83,187,107]),positionEBML:null},SegmentInfo:{id:new Uint8Array([21,73,169,102]),positionEBML:null},Tracks:{id:new Uint8Array([22,84,174,107]),positionEBML:null}},M={id:17545,data:new s(0)},_=[],S=new e(n.fileWriter||n.fd);this.addFrame=function(t){if(L){if(t.width!=b||t.height!=k)throw"Frame size differs from previous frames"}else b=t.width,k=t.height,u(),L=!0;var e=r(t,{quality:n.quality});if(!e)throw"Couldn't decode WebP frame, does the browser support WebP?";g({frame:o(e),duration:n.frameDuration})},this.complete=function(){return m(),p(),y(),v(),S.complete("video/webm")},this.getWrittenSize=function(){return S.length},n=i(I,n||{}),w()}};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t(require("./ArrayBufferDataStream"),require("./BlobBuffer")):window.WebMWriter=t(ArrayBufferDataStream,BlobBuffer)}(),function(){function t(t){var e,i=new Uint8Array(t);for(e=0;e<t;e+=1)i[e]=0;return i}function e(e,i,n,r){var o=i+n,a=t((parseInt(o/r)+1)*r);return a.set(e),a}function i(t,e,i){return t=t.toString(i||8),"000000000000".substr(t.length+12-e)+t}function n(e,i,n){var r,o;for(i=i||t(e.length),n=n||0,r=0,o=e.length;r<o;r+=1)i[n]=e.charCodeAt(r),n+=1;return i}function r(t){function e(t){return o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}var i,n,r,a=t.length%3,s="";for(i=0,r=t.length-a;i<r;i+=3)n=(t[i]<<16)+(t[i+1]<<8)+t[i+2],s+=e(n);switch(s.length%4){case 1:s+="=";break;case 2:s+="=="}return s}var o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];window.utils={},window.utils.clean=t,window.utils.pad=i,window.utils.extend=e,window.utils.stringToUint8=n,window.utils.uint8ToBase64=r}(),function(){function t(t,n){var r=i.clean(512),o=0;return e.forEach(function(e){var i,n,a=t[e.field]||"";for(i=0,n=a.length;i<n;i+=1)r[o]=a.charCodeAt(i),o+=1;o+=e.length-i}),"function"==typeof n?n(r,o):r}var e,i=window.utils;e=[{field:"fileName",length:100},{field:"fileMode",length:8},{field:"uid",length:8},{field:"gid",length:8},{field:"fileSize",length:12},{field:"mtime",length:12},{field:"checksum",length:8},{field:"type",length:1},{field:"linkName",length:100},{field:"ustar",length:8},{field:"owner",length:32},{field:"group",length:32},{field:"majorNumber",length:8},{field:"minorNumber",length:8},{field:"filenamePrefix",length:155},{field:"padding",length:12}],window.header={},window.header.structure=e,window.header.format=t}(),function(){function t(t){this.written=0,e=(t||20)*r,this.out=n.clean(e),this.blocks=[],this.length=0}var e,i=window.header,n=window.utils,r=512;t.prototype.append=function(t,e,o,a){var s,h,f,u,d,l,c;if("string"==typeof e)e=n.stringToUint8(e);else if(e.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+e.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];"function"==typeof o&&(a=o,o={}),o=o||{},f=o.mode||4095&parseInt("777",8),u=o.mtime||Math.floor(+new Date/1e3),d=o.uid||0,l=o.gid||0,s={fileName:t,fileMode:n.pad(f,7),uid:n.pad(d,7),gid:n.pad(l,7),fileSize:n.pad(e.length,11),mtime:n.pad(u,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:o.owner||"",group:o.group||""},h=0,Object.keys(s).forEach(function(t){var e,i,n=s[t];for(e=0,i=n.length;e<i;e+=1)h+=n.charCodeAt(e)}),s.checksum=n.pad(h,6)+"\0 ",c=i.format(s);var p=Math.ceil(c.length/r)*r,m=Math.ceil(e.length/r)*r;this.blocks.push({header:c,input:e,headerLength:p,inputLength:m})},t.prototype.save=function(){var t=[],e=[],i=0,n=Math.pow(2,20),o=[];return this.blocks.forEach(function(t){i+t.headerLength+t.inputLength>n&&(e.push({blocks:o,length:i}),o=[],i=0),o.push(t),i+=t.headerLength+t.inputLength}),e.push({blocks:o,length:i}),e.forEach(function(e){var i=new Uint8Array(e.length),n=0;e.blocks.forEach(function(t){i.set(t.header,n),n+=t.headerLength,i.set(t.input,n),n+=t.inputLength}),t.push(i)}),t.push(new Uint8Array(2*r)),new Blob(t,{type:"octet/stream"})},t.prototype.clear=function(){this.written=0,this.out=n.clean(e)},window.Tar=t}(),function(t){function e(t,i){if({}.hasOwnProperty.call(e.cache,t))return e.cache[t];var n=e.resolve(t);if(!n)throw new Error("Failed to resolve module "+t);var r={id:t,require:e,filename:t,exports:{},loaded:!1,parent:i,children:[]};i&&i.children.push(r);var o=t.slice(0,t.lastIndexOf("/")+1);return e.cache[t]=r.exports,n.call(r.exports,r,r.exports,o,t),r.loaded=!0,e.cache[t]=r.exports}e.modules={},e.cache={},e.resolve=function(t){return{}.hasOwnProperty.call(e.modules,t)?e.modules[t]:void 0},e.define=function(t,i){e.modules[t]=i};var i=function(e){return e="/",{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:t.setImmediate||function(t){setTimeout(t,0)},cwd:function(){return e},chdir:function(t){e=t}}}();e.define("/gif.coffee",function(t,i,n,r){function o(t,e){return{}.hasOwnProperty.call(t,e)}function a(t,e){for(var i=0,n=e.length;i<n;++i)if(i in e&&e[i]===t)return!0;return!1}function s(t,e){function i(){this.constructor=t}for(var n in e)o(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var h,f,u,d,l;u=e("events",t).EventEmitter,h=e("/browser.coffee",t),l=function(t){function e(t){var e,i;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t);for(e in f)i=f[e],null!=this.options[e]?this.options[e]:this.options[e]=i}return s(e,t),f={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null},d={delay:500,copy:!1},e.prototype.setOption=function(t,e){return this.options[t]=e,null==this._canvas||"width"!==t&&"height"!==t?void 0:this._canvas[t]=e},e.prototype.setOptions=function(t){var e,i;return function(n){for(e in t)o(t,e)&&(i=t[e],n.push(this.setOption(e,i)));return n}.call(this,[])},e.prototype.addFrame=function(t,e){var i,n;null==e&&(e={}),i={},i.transparent=this.options.transparent;for(n in d)i[n]=e[n]||d[n];if(null!=this.options.width||this.setOption("width",t.width),null!=this.options.height||this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!=ImageData&&t instanceof ImageData)i.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!=CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!=WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?i.data=this.getContextData(t):i.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?i.data=this.getImageData(t):i.image=t}return this.frames.push(i)},e.prototype.render=function(){var t,e;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(e){for(var i=function(){var t;t=[];for(var e=0;0<=this.frames.length?e<this.frames.length:e>this.frames.length;0<=this.frames.length?++e:--e)t.push(e);return t}.apply(this,arguments),n=0,r=i.length;n<r;++n)t=i[n],e.push(null);return e}.call(this,[]),e=this.spawnWorkers();for(var i=function(){var t;t=[];for(var i=0;0<=e?i<e:i>e;0<=e?++i:--i)t.push(i);return t}.apply(this,arguments),n=0,r=i.length;n<r;++n)t=i[n],this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},e.prototype.abort=function(){for(var t;;){if(t=this.activeWorkers.shift(),!(null!=t))break;console.log("killing active worker"),t.terminate()}return this.running=!1,this.emit("abort")},e.prototype.spawnWorkers=function(){var t;return t=Math.min(this.options.workers,this.frames.length),function(){var e;e=[];for(var i=this.freeWorkers.length;this.freeWorkers.length<=t?i<t:i>t;this.freeWorkers.length<=t?++i:--i)e.push(i);return e}.apply(this,arguments).forEach(function(t){return function(e){var i;return console.log("spawning worker "+e),i=new Worker(t.options.workerScript),i.onmessage=function(t){return function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(i),1),t.freeWorkers.push(i),t.frameFinished(e.data)}}(t),t.freeWorkers.push(i)}}(this)),t},e.prototype.frameFinished=function(t){return console.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,a(null,this.imageParts)?this.renderNextFrame():this.finishRendering()},e.prototype.finishRendering=function(){var t,e,i,n,r,o,a;r=0;for(var s=0,h=this.imageParts.length;s<h;++s)e=this.imageParts[s],r+=(e.data.length-1)*e.pageSize+e.cursor;r+=e.pageSize-e.cursor,console.log("rendering finished - filesize "+Math.round(r/1e3)+"kb"),t=new Uint8Array(r),o=0;for(var f=0,u=this.imageParts.length;f<u;++f){e=this.imageParts[f];for(var d=0,l=e.data.length;d<l;++d)a=e.data[d],i=d,t.set(a,o),o+=i===e.data.length-1?e.cursor:e.pageSize}return n=new Blob([t],{type:"image/gif"}),this.emit("finished",n,t)},e.prototype.renderNextFrame=function(){var t,e,i;if(0===this.freeWorkers.length)throw new Error("No free workers");return this.nextFrame>=this.frames.length?void 0:(t=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),e=this.getTask(t),console.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(e))},e.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},e.prototype.getImageData=function(t){var e;return null!=this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),e=this._canvas.getContext("2d"),e.setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},e.prototype.getTask=function(t){var e,i;if(e=this.frames.indexOf(t),i={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,repeat:this.options.repeat,canTransfer:"chrome"===h.name},null!=t.data)i.data=t.data;else if(null!=t.context)i.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");i.data=this.getImageData(t.image)}return i},e}(u),t.exports=l}),e.define("/browser.coffee",function(t,e,i,n){var r,o,a,s,h;s=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),h=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],o="ie"===h[1]&&document.documentMode,r={name:"version"===h[1]?h[3]:h[1],version:o||parseFloat("opera"===h[1]&&h[4]?h[4]:h[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}},r[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,t.exports=r}),e.define("events",function(t,e,n,r){i.EventEmitter||(i.EventEmitter=function(){});var o=e.EventEmitter=i.EventEmitter,a="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=10;o.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},o.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"!=typeof e){if(a(e)){for(var i=Array.prototype.slice.call(arguments,1),n=e.slice(),r=0,o=n.length;r<o;r++)n[r].apply(this,i);return!0}return!1}switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0},o.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(a(this._events[t])){if(!this._events[t].warned){var i;i=void 0!==this._events.maxListeners?this._events.maxListeners:s,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,e){var i=this;return i.on(t,function n(){i.removeListener(t,n),e.apply(this,arguments)}),this},o.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var i=this._events[t];if(a(i)){var n=i.indexOf(e);if(n<0)return this;i.splice(n,1),0==i.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return t&&this._events&&this._events[t]&&(this._events[t]=null),this},o.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}),t.GIF=e("/gif.coffee")}.call(this,this),function(){function t(t){return t&&t.Object===Object?t:null}function e(t){return String("0000000"+t).slice(-7)}function i(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function n(t){var e={};this.settings=t,this.on=function(t,i){e[t]=i},this.emit=function(t){var i=e[t];i&&i.apply(null,Array.prototype.slice.call(arguments,1))},this.filename=t.name||i(),this.extension="",this.mimeType=""}function r(t){n.call(this,t),this.extension=".tar",this.mimeType="application/x-tar",this.fileExtension="",this.baseFilename=this.filename,this.tape=null,this.count=0,this.part=1,this.frames=0}function o(t){r.call(this,t),this.type="image/png",this.fileExtension=".png"}function a(t){r.call(this,t),this.type="image/jpeg",this.fileExtension=".jpg",this.quality=t.quality/100||.8}function s(t){var e=document.createElement("canvas");"image/webp"!==e.toDataURL("image/webp").substr(5,10)&&console.log("WebP not supported - try another export format"),n.call(this,t),this.quality=t.quality/100||.8,this.extension=".webm",this.mimeType="video/webm",this.baseFilename=this.filename,this.framerate=t.framerate,this.frames=0,this.part=1,this.videoWriter=new WebMWriter({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})}function h(t){n.call(this,t),t.quality=t.quality/100||.8,this.encoder=new FFMpegServer.Video(t),this.encoder.on("process",function(){this.emit("process")}.bind(this)),this.encoder.on("finished",function(t,e){var i=this.callback;i&&(this.callback=void 0,i(t,e))}.bind(this)),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("error",function(t){alert(JSON.stringify(t,null,2))}.bind(this))}function f(t){n.call(this,t),this.framerate=this.settings.framerate,this.type="video/webm",this.extension=".webm",this.stream=null,this.mediaRecorder=null,this.chunks=[]}function u(t){n.call(this,t),t.quality=31-(30*t.quality/100||10),t.workers=t.workers||4,this.extension=".gif",this.mimeType="image/gif",this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sizeSet=!1,this.encoder=new GIF({workers:t.workers,quality:t.quality,workerScript:t.workersPath+"gif.worker.js"}),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("finished",function(t){var e=this.callback;e&&(this.callback=void 0,e(t))}.bind(this))}function d(t){function e(){function t(){return this._hooked||(this._hooked=!0,this._hookedTime=this.currentTime||0,this.pause(),it.push(this)),this._hookedTime+M.startTime}b("Capturer start"),U=window.Date.now(),T=U+M.startTime,I=window.performance.now(),F=I+M.startTime,window.Date.prototype.getTime=function(){return T},window.Date.now=function(){return T},window.setTimeout=function(t,e){var i={callback:t,time:e,triggerTime:T+e};return _.push(i),b("Timeout set to "+i.time),i},window.clearTimeout=function(t){for(var e=0;e<_.length;e++)_[e]!=t||(_.splice(e,1),b("Timeout cleared"))},window.setInterval=function(t,e){var i={callback:t,time:e,triggerTime:T+e};return S.push(i),b("Interval set to "+i.time),i},window.clearInterval=function(t){return b("clear Interval"),null},window.requestAnimationFrame=function(t){W.push(t)},window.performance.now=function(){return F};try{Object.defineProperty(HTMLVideoElement.prototype,"currentTime",{get:t}),Object.defineProperty(HTMLAudioElement.prototype,"currentTime",{get:t})}catch(t){b(t)}}function i(){e(),D.start(),R=!0}function n(){R=!1,D.stop(),l()}function r(t,e){Z(t,0,e)}function d(){r(y)}function l(){b("Capturer stop"),window.setTimeout=Z,window.setInterval=J,window.clearInterval=Y,window.clearTimeout=$,window.requestAnimationFrame=Q,window.Date.prototype.getTime=et,window.Date.now=X,window.performance.now=tt}function c(){var t=C/M.framerate;(M.frameLimit&&C>=M.frameLimit||M.timeLimit&&t>=M.timeLimit)&&(n(),v());var e=new Date(null);e.setSeconds(t),M.motionBlurFrames>2?j.textContent="CCapture "+M.format+" | "+C+" frames ("+O+" inter) | "+e.toISOString().substr(11,8):j.textContent="CCapture "+M.format+" | "+C+" frames | "+e.toISOString().substr(11,8)}function p(t){N.width===t.width&&N.height===t.height||(N.width=t.width,N.height=t.height,z=new Uint16Array(N.height*N.width*4),V.fillStyle="#0",V.fillRect(0,0,N.width,N.height))}function m(t){V.drawImage(t,0,0),q=V.getImageData(0,0,N.width,N.height);for(var e=0;e<z.length;e+=4)z[e]+=q.data[e],z[e+1]+=q.data[e+1],z[e+2]+=q.data[e+2];O++}function w(){for(var t=q.data,e=0;e<z.length;e+=4)t[e]=2*z[e]/M.motionBlurFrames,t[e+1]=2*z[e+1]/M.motionBlurFrames,t[e+2]=2*z[e+2]/M.motionBlurFrames;V.putImageData(q,0,0),D.add(N),C++,O=0,b("Full MB Frame! "+C+" "+T);for(var e=0;e<z.length;e+=4)z[e]=0,z[e+1]=0,z[e+2]=0;gc()}function g(t){R&&(M.motionBlurFrames>2?(p(t),m(t),O>=.5*M.motionBlurFrames?w():d()):(D.add(t),C++,b("Full Frame! "+C)))}function y(){var t=1e3/M.framerate,e=(C+O/M.motionBlurFrames)*t;T=U+e,F=I+e,it.forEach(function(t){t._hookedTime=e/1e3}),c(),b("Frame: "+C+" "+O);for(var i=0;i<_.length;i++)T>=_[i].triggerTime&&(r(_[i].callback),_.splice(i,1));for(var i=0;i<S.length;i++)T>=S[i].triggerTime&&(r(S[i].callback),S[i].triggerTime+=S[i].time);W.forEach(function(t){r(t,T-k)}),W=[]}function v(t){t||(t=function(t){return download(t,D.filename+D.extension,D.mimeType),!1}),D.save(t)}function b(t){A&&console.log(t)}function B(t,e){P[t]=e}function x(t){var e=P[t];e&&e.apply(null,Array.prototype.slice.call(arguments,1))}function E(t){x("progress",t)}var A,L,T,U,F,I,d,D,M=t||{},_=(new Date,[]),S=[],C=0,O=0,W=[],R=!1,P={};M.framerate=M.framerate||60,M.motionBlurFrames=2*(M.motionBlurFrames||1),A=M.verbose||!1,L=M.display||!1,M.step=1e3/M.framerate,M.timeLimit=M.timeLimit||0,M.frameLimit=M.frameLimit||0,M.startTime=M.startTime||0;var j=document.createElement("div");j.style.position="absolute",j.style.left=j.style.top=0,j.style.backgroundColor="black",j.style.fontFamily="monospace",j.style.fontSize="11px",j.style.padding="5px",j.style.color="red",j.style.zIndex=1e5,M.display&&document.body.appendChild(j);var z,q,N=document.createElement("canvas"),V=N.getContext("2d");b("Step is set to "+M.step+"ms");var G={gif:u,webm:s,ffmpegserver:h,png:o,jpg:a,"webm-mediarecorder":f},H=G[M.format];if(!H)throw"Error: Incorrect or missing format: Valid formats are "+Object.keys(G).join(", ");if(D=new H(M),D.step=d,D.on("process",y),D.on("progress",E),"performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var K=Date.now();performance.timing&&performance.timing.navigationStart&&(K=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-K}}var Z=window.setTimeout,J=window.setInterval,Y=window.clearInterval,$=window.clearTimeout,Q=window.requestAnimationFrame,X=window.Date.now,tt=window.performance.now,et=window.Date.prototype.getTime,it=[];return{start:i,capture:g,stop:n,save:v,on:B}}var l={function:!0,object:!0},c=(parseFloat,parseInt,l[typeof exports]&&exports&&!exports.nodeType?exports:void 0),p=l[typeof module]&&module&&!module.nodeType?module:void 0,m=p&&p.exports===c?c:void 0,w=t(c&&p&&"object"==typeof global&&global),g=t(l[typeof self]&&self),y=t(l[typeof window]&&window),v=t(l[typeof this]&&this),b=w||y!==(v&&v.window)&&y||g||v||Function("return this")();"gc"in window||(window.gc=function(){}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var n=atob(this.toDataURL(e,i).split(",")[1]),r=n.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);t(new Blob([o],{type:e||"image/png"}))}}),function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}();var k=window.Date.now();n.prototype.start=function(){},n.prototype.stop=function(){},n.prototype.add=function(){},n.prototype.save=function(){},n.prototype.dispose=function(){},n.prototype.safeToProceed=function(){return!0},n.prototype.step=function(){console.log("Step not set!")},r.prototype=Object.create(n.prototype),r.prototype.start=function(){this.dispose()},r.prototype.add=function(t){
var i=new FileReader;i.onload=function(){this.tape.append(e(this.count)+this.fileExtension,new Uint8Array(i.result)),this.settings.autoSaveTime>0&&this.frames/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+e(this.part),download(t,this.filename+this.extension,this.mimeType);var i=this.count;this.dispose(),this.count=i+1,this.part++,this.filename=this.baseFilename+"-part-"+e(this.part),this.frames=0,this.step()}.bind(this)):(this.count++,this.frames++,this.step())}.bind(this),i.readAsArrayBuffer(t)},r.prototype.save=function(t){t(this.tape.save())},r.prototype.dispose=function(){this.tape=new Tar,this.count=0},o.prototype=Object.create(r.prototype),o.prototype.add=function(t){t.toBlob(function(t){r.prototype.add.call(this,t)}.bind(this),this.type)},a.prototype=Object.create(r.prototype),a.prototype.add=function(t){t.toBlob(function(t){r.prototype.add.call(this,t)}.bind(this),this.type,this.quality)},s.prototype=Object.create(n.prototype),s.prototype.start=function(t){this.dispose()},s.prototype.add=function(t){this.videoWriter.addFrame(t),this.settings.autoSaveTime>0&&this.frames/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+e(this.part),download(t,this.filename+this.extension,this.mimeType),this.dispose(),this.part++,this.filename=this.baseFilename+"-part-"+e(this.part),this.step()}.bind(this)):(this.frames++,this.step())},s.prototype.save=function(t){this.videoWriter.complete().then(t)},s.prototype.dispose=function(t){this.frames=0,this.videoWriter=new WebMWriter({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})},h.prototype=Object.create(n.prototype),h.prototype.start=function(){this.encoder.start(this.settings)},h.prototype.add=function(t){this.encoder.add(t)},h.prototype.save=function(t){this.callback=t,this.encoder.end()},h.prototype.safeToProceed=function(){return this.encoder.safeToProceed()},f.prototype=Object.create(n.prototype),f.prototype.add=function(t){this.stream||(this.stream=t.captureStream(this.framerate),this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=function(t){this.chunks.push(t.data)}.bind(this)),this.step()},f.prototype.save=function(t){this.mediaRecorder.onstop=function(e){var i=new Blob(this.chunks,{type:"video/webm"});this.chunks=[],t(i)}.bind(this),this.mediaRecorder.stop()},u.prototype=Object.create(n.prototype),u.prototype.add=function(t){this.sizeSet||(this.encoder.setOption("width",t.width),this.encoder.setOption("height",t.height),this.sizeSet=!0),this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(t,0,0),this.encoder.addFrame(this.ctx,{copy:!0,delay:this.settings.step}),this.step()},u.prototype.save=function(t){this.callback=t,this.encoder.render()},(y||g||{}).CCapture=d,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):c&&p?(m&&((p.exports=d).CCapture=d),c.CCapture=d):b.CCapture=d}();


var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}



// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(t,s){'object'==typeof exports&&'undefined'!=typeof module?module.exports=s():'function'==typeof define&&define.amd?define(s):t.CodeMirror=s()})(this,function(){'use strict';function t(Ud){return new RegExp('(^|\\s)'+Ud+'(?:$|\\s)\\s*')}function s(Ud){for(var jd=Ud.childNodes.length;0<jd;--jd)Ud.removeChild(Ud.firstChild);return Ud}function c(Ud,jd){return s(Ud).appendChild(jd)}function u(Ud,jd,Vd,Kd){var Xd=document.createElement(Ud);if(Vd&&(Xd.className=Vd),Kd&&(Xd.style.cssText=Kd),'string'==typeof jd)Xd.appendChild(document.createTextNode(jd));else if(jd)for(var Yd=0;Yd<jd.length;++Yd)Xd.appendChild(jd[Yd]);return Xd}function v(Ud,jd,Vd,Kd){var Xd=u(Ud,jd,Vd,Kd);return Xd.setAttribute('role','presentation'),Xd}function C(Ud,jd){if(3==jd.nodeType&&(jd=jd.parentNode),Ud.contains)return Ud.contains(jd);do if(11==jd.nodeType&&(jd=jd.host),jd==Ud)return!0;while(jd=jd.parentNode)}function S(){var Ud;try{Ud=document.activeElement}catch(jd){Ud=document.body||null}for(;Ud&&Ud.shadowRoot&&Ud.shadowRoot.activeElement;)Ud=Ud.shadowRoot.activeElement;return Ud}function L(Ud,jd){var Vd=Ud.className;t(jd).test(Vd)||(Ud.className+=(Vd?' ':'')+jd)}function T(Ud,jd){for(var Vd=Ud.split(' '),Kd=0;Kd<Vd.length;Kd++)Vd[Kd]&&!t(Vd[Kd]).test(jd)&&(jd+=' '+Vd[Kd]);return jd}function N(Ud){var jd=Array.prototype.slice.call(arguments,1);return function(){return Ud.apply(null,jd)}}function O(Ud,jd,Vd){for(var Kd in jd||(jd={}),Ud)Ud.hasOwnProperty(Kd)&&(!1!==Vd||!jd.hasOwnProperty(Kd))&&(jd[Kd]=Ud[Kd]);return jd}function A(Ud,jd,Vd,Kd,Xd){null==jd&&(jd=Ud.search(/[^\s\u00a0]/),-1==jd&&(jd=Ud.length));for(var Yd=Kd||0,_d=Xd||0,qd;;){if(qd=Ud.indexOf('\t',Yd),0>qd||qd>=jd)return _d+(jd-Yd);_d+=qd-Yd,_d+=Vd-_d%Vd,Yd=qd+1}}function M(Ud,jd){for(var Vd=0;Vd<Ud.length;++Vd)if(Ud[Vd]==jd)return Vd;return-1}function W(Ud,jd,Vd){for(var Kd=0,Xd=0,Yd;;){Yd=Ud.indexOf('\t',Kd),-1==Yd&&(Yd=Ud.length);var _d=Yd-Kd;if(Yd==Ud.length||Xd+_d>=jd)return Kd+Math.min(_d,jd-Xd);if(Xd+=Yd-Kd,Xd+=Vd-Xd%Vd,Kd=Yd+1,Xd>=jd)return Kd}}function D(Ud){for(;Os.length<=Ud;)Os.push(H(Os)+' ');return Os[Ud]}function H(Ud){return Ud[Ud.length-1]}function F(Ud,jd){for(var Vd=[],Kd=0;Kd<Ud.length;Kd++)Vd[Kd]=jd(Ud[Kd],Kd);return Vd}function P(Ud,jd,Vd){for(var Kd=0,Xd=Vd(jd);Kd<Ud.length&&Vd(Ud[Kd])<=Xd;)Kd++;Ud.splice(Kd,0,jd)}function I(){}function z(Ud,jd){var Vd;return Object.create?Vd=Object.create(Ud):(I.prototype=Ud,Vd=new I),jd&&O(jd,Vd),Vd}function E(Ud){return /\w/.test(Ud)||'\x80'<Ud&&(Ud.toUpperCase()!=Ud.toLowerCase()||As.test(Ud))}function R(Ud,jd){return jd?-1<jd.source.indexOf('\\w')&&E(Ud)||jd.test(Ud):E(Ud)}function B(Ud){for(var jd in Ud)if(Ud.hasOwnProperty(jd)&&Ud[jd])return!1;return!0}function G(Ud){return 768<=Ud.charCodeAt(0)&&Ms.test(Ud)}function $(Ud,jd,Vd){for(;(0>Vd?0<jd:jd<Ud.length)&&G(Ud.charAt(jd));)jd+=Vd;return jd}function U(Ud,jd,Vd){for(var Kd=jd>Vd?-1:1;;){if(jd==Vd)return jd;var Xd=(jd+Vd)/2,Yd=0>Kd?Math.ceil(Xd):Math.floor(Xd);if(Yd==jd)return Ud(Yd)?jd:Vd;Ud(Yd)?Vd=Yd:jd=Yd+Kd}}function V(Ud,jd,Vd){var Kd=this;this.input=Vd,Kd.scrollbarFiller=u('div',null,'CodeMirror-scrollbar-filler'),Kd.scrollbarFiller.setAttribute('cm-not-content','true'),Kd.gutterFiller=u('div',null,'CodeMirror-gutter-filler'),Kd.gutterFiller.setAttribute('cm-not-content','true'),Kd.lineDiv=v('div',null,'CodeMirror-code'),Kd.selectionDiv=u('div',null,null,'position: relative; z-index: 1'),Kd.cursorDiv=u('div',null,'CodeMirror-cursors'),Kd.measure=u('div',null,'CodeMirror-measure'),Kd.lineMeasure=u('div',null,'CodeMirror-measure'),Kd.lineSpace=v('div',[Kd.measure,Kd.lineMeasure,Kd.selectionDiv,Kd.cursorDiv,Kd.lineDiv],null,'position: relative; outline: none');var Xd=v('div',[Kd.lineSpace],'CodeMirror-lines');Kd.mover=u('div',[Xd],null,'position: relative'),Kd.sizer=u('div',[Kd.mover],'CodeMirror-sizer'),Kd.sizerWidth=null,Kd.heightForcer=u('div',null,null,'position: absolute; height: '+Ss+'px; width: 1px;'),Kd.gutters=u('div',null,'CodeMirror-gutters'),Kd.lineGutter=null,Kd.scroller=u('div',[Kd.sizer,Kd.heightForcer,Kd.gutters],'CodeMirror-scroll'),Kd.scroller.setAttribute('tabIndex','-1'),Kd.wrapper=u('div',[Kd.scrollbarFiller,Kd.gutterFiller,Kd.scroller],'CodeMirror'),Ql&&8>Jl&&(Kd.gutters.style.zIndex=-1,Kd.scroller.style.paddingRight=0),es||Yl&&ps||(Kd.scroller.draggable=!0),Ud&&(Ud.appendChild?Ud.appendChild(Kd.wrapper):Ud(Kd.wrapper)),Kd.viewFrom=Kd.viewTo=jd.first,Kd.reportedViewFrom=Kd.reportedViewTo=jd.first,Kd.view=[],Kd.renderedView=null,Kd.externalMeasured=null,Kd.viewOffset=0,Kd.lastWrapHeight=Kd.lastWrapWidth=0,Kd.updateLineNumbers=null,Kd.nativeBarWidth=Kd.barHeight=Kd.barWidth=0,Kd.scrollbarsClipped=!1,Kd.lineNumWidth=Kd.lineNumInnerWidth=Kd.lineNumChars=null,Kd.alignWidgets=!1,Kd.cachedCharWidth=Kd.cachedTextHeight=Kd.cachedPaddingH=null,Kd.maxLine=null,Kd.maxLineLength=0,Kd.maxLineChanged=!1,Kd.wheelDX=Kd.wheelDY=Kd.wheelStartX=Kd.wheelStartY=null,Kd.shift=!1,Kd.selForContextMenu=null,Kd.activeTouch=null,Vd.init(Kd)}function K(Ud,jd){if(jd-=Ud.first,0>jd||jd>=Ud.size)throw new Error('There is no line '+(jd+Ud.first)+' in the document.');for(var Vd=Ud;!Vd.lines;)for(var Kd=0;;++Kd){var Xd=Vd.children[Kd],Yd=Xd.chunkSize();if(jd<Yd){Vd=Xd;break}jd-=Yd}return Vd.lines[jd]}function X(Ud,jd,Vd){var Kd=[],Xd=jd.line;return Ud.iter(jd.line,Vd.line+1,function(Yd){var _d=Yd.text;Xd==Vd.line&&(_d=_d.slice(0,Vd.ch)),Xd==jd.line&&(_d=_d.slice(jd.ch)),Kd.push(_d),++Xd}),Kd}function Y(Ud,jd,Vd){var Kd=[];return Ud.iter(jd,Vd,function(Xd){Kd.push(Xd.text)}),Kd}function _(Ud,jd){var Vd=jd-Ud.height;if(Vd)for(var Kd=Ud;Kd;Kd=Kd.parent)Kd.height+=Vd}function q(Ud){if(null==Ud.parent)return null;for(var jd=Ud.parent,Vd=M(jd.lines,Ud),Kd=jd.parent;Kd;jd=Kd,Kd=Kd.parent)for(var Xd=0;;++Xd){if(Kd.children[Xd]==jd)break;Vd+=Kd.children[Xd].chunkSize()}return Vd+jd.first}function Z(Ud,jd){var Vd=Ud.first;outer:do{for(var Kd=0;Kd<Ud.children.length;++Kd){var Xd=Ud.children[Kd],Yd=Xd.height;if(jd<Yd){Ud=Xd;continue outer}jd-=Yd,Vd+=Xd.chunkSize()}return Vd}while(!Ud.lines);for(var _d=0;_d<Ud.lines.length;++_d){var qd=Ud.lines[_d],Zd=qd.height;if(jd<Zd)break;jd-=Zd}return Vd+_d}function Q(Ud,jd){return jd>=Ud.first&&jd<Ud.first+Ud.size}function J(Ud,jd){return Ud.lineNumberFormatter(jd+Ud.firstLineNumber)+''}function ee(Ud,jd,Vd){return void 0===Vd&&(Vd=null),this instanceof ee?void(this.line=Ud,this.ch=jd,this.sticky=Vd):new ee(Ud,jd,Vd)}function ne(Ud,jd){return Ud.line-jd.line||Ud.ch-jd.ch}function re(Ud,jd){return Ud.sticky==jd.sticky&&0==ne(Ud,jd)}function oe(Ud){return ee(Ud.line,Ud.ch)}function le(Ud,jd){return 0>ne(Ud,jd)?jd:Ud}function se(Ud,jd){return 0>ne(Ud,jd)?Ud:jd}function de(Ud,jd){return Math.max(Ud.first,Math.min(jd,Ud.first+Ud.size-1))}function ae(Ud,jd){if(jd.line<Ud.first)return ee(Ud.first,0);var Vd=Ud.first+Ud.size-1;return jd.line>Vd?ee(Vd,K(Ud,Vd).text.length):pe(jd,K(Ud,jd.line).text.length)}function pe(Ud,jd){var Vd=Ud.ch;return null==Vd||Vd>jd?ee(Ud.line,jd):0>Vd?ee(Ud.line,0):Ud}function ce(Ud,jd){for(var Vd=[],Kd=0;Kd<jd.length;Kd++)Vd[Kd]=ae(Ud,jd[Kd]);return Vd}function he(){Ws=!0}function ue(){Ds=!0}function ge(Ud,jd,Vd){this.marker=Ud,this.from=jd,this.to=Vd}function fe(Ud,jd){if(Ud)for(var Vd=0,Kd;Vd<Ud.length;++Vd)if(Kd=Ud[Vd],Kd.marker==jd)return Kd}function ye(Ud,jd){for(var Kd=0,Vd;Kd<Ud.length;++Kd)Ud[Kd]!=jd&&(Vd||(Vd=[])).push(Ud[Kd]);return Vd}function xe(Ud,jd){Ud.markedSpans=Ud.markedSpans?Ud.markedSpans.concat([jd]):[jd],jd.marker.attachLine(Ud)}function ve(Ud,jd,Vd){var Kd;if(Ud)for(var Xd=0;Xd<Ud.length;++Xd){var Yd=Ud[Xd],_d=Yd.marker,qd=null==Yd.from||(_d.inclusiveLeft?Yd.from<=jd:Yd.from<jd);if(qd||Yd.from==jd&&'bookmark'==_d.type&&(!Vd||!Yd.marker.insertLeft)){var Zd=null==Yd.to||(_d.inclusiveRight?Yd.to>=jd:Yd.to>jd);(Kd||(Kd=[])).push(new ge(_d,Yd.from,Zd?null:Yd.to))}}return Kd}function be(Ud,jd,Vd){var Kd;if(Ud)for(var Xd=0;Xd<Ud.length;++Xd){var Yd=Ud[Xd],_d=Yd.marker,qd=null==Yd.to||(_d.inclusiveRight?Yd.to>=jd:Yd.to>jd);if(qd||Yd.from==jd&&'bookmark'==_d.type&&(!Vd||Yd.marker.insertLeft)){var Zd=null==Yd.from||(_d.inclusiveLeft?Yd.from<=jd:Yd.from<jd);(Kd||(Kd=[])).push(new ge(_d,Zd?null:Yd.from-jd,null==Yd.to?null:Yd.to-jd))}}return Kd}function Ce(Ud,jd){if(jd.full)return null;var Vd=Q(Ud,jd.from.line)&&K(Ud,jd.from.line).markedSpans,Kd=Q(Ud,jd.to.line)&&K(Ud,jd.to.line).markedSpans;if(!Vd&&!Kd)return null;var Xd=jd.from.ch,Yd=jd.to.ch,_d=0==ne(jd.from,jd.to),qd=ve(Vd,Xd,_d),Zd=be(Kd,Yd,_d),Qd=1==jd.text.length,Jd=H(jd.text).length+(Qd?Xd:0);if(qd)for(var ea=0,ta;ea<qd.length;++ea)if(ta=qd[ea],null==ta.to){var ia=fe(Zd,ta.marker);ia?Qd&&(ta.to=null==ia.to?null:ia.to+Jd):ta.to=Xd}if(Zd)for(var na=0,ra;na<Zd.length;++na)if(ra=Zd[na],null!=ra.to&&(ra.to+=Jd),null==ra.from){var oa=fe(qd,ra.marker);oa||(ra.from=Jd,Qd&&(qd||(qd=[])).push(ra))}else ra.from+=Jd,Qd&&(qd||(qd=[])).push(ra);qd&&(qd=we(qd)),Zd&&Zd!=qd&&(Zd=we(Zd));var la=[qd];if(!Qd){var sa=jd.text.length-2,da;if(0<sa&&qd)for(var aa=0;aa<qd.length;++aa)null==qd[aa].to&&(da||(da=[])).push(new ge(qd[aa].marker,null,null));for(var pa=0;pa<sa;++pa)la.push(da);la.push(Zd)}return la}function we(Ud){for(var jd=0,Vd;jd<Ud.length;++jd)Vd=Ud[jd],null!=Vd.from&&Vd.from==Vd.to&&!1!==Vd.marker.clearWhenEmpty&&Ud.splice(jd--,1);return Ud.length?Ud:null}function Se(Ud,jd,Vd){var Kd=null;if(Ud.iter(jd.line,Vd.line+1,function(ia){if(ia.markedSpans)for(var na=0,ra;na<ia.markedSpans.length;++na)ra=ia.markedSpans[na].marker,ra.readOnly&&(!Kd||-1==M(Kd,ra))&&(Kd||(Kd=[])).push(ra)}),!Kd)return null;for(var Xd=[{from:jd,to:Vd}],Yd=0;Yd<Kd.length;++Yd)for(var _d=Kd[Yd],qd=_d.find(0),Zd=0,Qd;Zd<Xd.length;++Zd)if(Qd=Xd[Zd],!(0>ne(Qd.to,qd.from)||0<ne(Qd.from,qd.to))){var Jd=[Zd,1],ea=ne(Qd.from,qd.from),ta=ne(Qd.to,qd.to);!(0>ea)&&(_d.inclusiveLeft||ea)||Jd.push({from:Qd.from,to:qd.from}),!(0<ta)&&(_d.inclusiveRight||ta)||Jd.push({from:qd.to,to:Qd.to}),Xd.splice.apply(Xd,Jd),Zd+=Jd.length-3}return Xd}function Le(Ud){var jd=Ud.markedSpans;if(jd){for(var Vd=0;Vd<jd.length;++Vd)jd[Vd].marker.detachLine(Ud);Ud.markedSpans=null}}function ke(Ud,jd){if(jd){for(var Vd=0;Vd<jd.length;++Vd)jd[Vd].marker.attachLine(Ud);Ud.markedSpans=jd}}function Te(Ud){return Ud.inclusiveLeft?-1:0}function Ne(Ud){return Ud.inclusiveRight?1:0}function Oe(Ud,jd){var Vd=Ud.lines.length-jd.lines.length;if(0!=Vd)return Vd;var Kd=Ud.find(),Xd=jd.find(),Yd=ne(Kd.from,Xd.from)||Te(Ud)-Te(jd);if(Yd)return-Yd;var _d=ne(Kd.to,Xd.to)||Ne(Ud)-Ne(jd);return _d?_d:jd.id-Ud.id}function Ae(Ud,jd){var Vd=Ds&&Ud.markedSpans,Kd;if(Vd)for(var Xd=void 0,Yd=0;Yd<Vd.length;++Yd)Xd=Vd[Yd],Xd.marker.collapsed&&null==(jd?Xd.from:Xd.to)&&(!Kd||0>Oe(Kd,Xd.marker))&&(Kd=Xd.marker);return Kd}function Me(Ud){return Ae(Ud,!0)}function We(Ud){return Ae(Ud,!1)}function De(Ud,jd){var Vd=Ds&&Ud.markedSpans,Kd;if(Vd)for(var Xd=0,Yd;Xd<Vd.length;++Xd)Yd=Vd[Xd],Yd.marker.collapsed&&(null==Yd.from||Yd.from<jd)&&(null==Yd.to||Yd.to>jd)&&(!Kd||0>Oe(Kd,Yd.marker))&&(Kd=Yd.marker);return Kd}function He(Ud,jd,Vd,Kd,Xd){var Yd=K(Ud,jd),_d=Ds&&Yd.markedSpans;if(_d)for(var qd=0,Zd;qd<_d.length;++qd)if(Zd=_d[qd],!!Zd.marker.collapsed){var Qd=Zd.marker.find(0),Jd=ne(Qd.from,Vd)||Te(Zd.marker)-Te(Xd),ea=ne(Qd.to,Kd)||Ne(Zd.marker)-Ne(Xd);if(!(0<=Jd&&0>=ea||0>=Jd&&0<=ea)&&(0>=Jd&&(Zd.marker.inclusiveRight&&Xd.inclusiveLeft?0<=ne(Qd.to,Vd):0<ne(Qd.to,Vd))||0<=Jd&&(Zd.marker.inclusiveRight&&Xd.inclusiveLeft?0>=ne(Qd.from,Kd):0>ne(Qd.from,Kd))))return!0}}function Fe(Ud){for(var jd;jd=Me(Ud);)Ud=jd.find(-1,!0).line;return Ud}function Pe(Ud){for(var jd;jd=We(Ud);)Ud=jd.find(1,!0).line;return Ud}function Ie(Ud){for(var jd,Vd;jd=We(Ud);)Ud=jd.find(1,!0).line,(Vd||(Vd=[])).push(Ud);return Vd}function ze(Ud,jd){var Vd=K(Ud,jd),Kd=Fe(Vd);return Vd==Kd?jd:q(Kd)}function Ee(Ud,jd){if(jd>Ud.lastLine())return jd;var Vd=K(Ud,jd),Kd;if(!Re(Ud,Vd))return jd;for(;Kd=We(Vd);)Vd=Kd.find(1,!0).line;return q(Vd)+1}function Re(Ud,jd){var Vd=Ds&&jd.markedSpans;if(Vd)for(var Kd=void 0,Xd=0;Xd<Vd.length;++Xd)if(Kd=Vd[Xd],!!Kd.marker.collapsed){if(null==Kd.from)return!0;if(!Kd.marker.widgetNode&&0==Kd.from&&Kd.marker.inclusiveLeft&&Be(Ud,jd,Kd))return!0}}function Be(Ud,jd,Vd){if(null==Vd.to){var Kd=Vd.marker.find(1,!0);return Be(Ud,Kd.line,fe(Kd.line.markedSpans,Vd.marker))}if(Vd.marker.inclusiveRight&&Vd.to==jd.text.length)return!0;for(var Xd=void 0,Yd=0;Yd<jd.markedSpans.length;++Yd)if(Xd=jd.markedSpans[Yd],Xd.marker.collapsed&&!Xd.marker.widgetNode&&Xd.from==Vd.to&&(null==Xd.to||Xd.to!=Vd.from)&&(Xd.marker.inclusiveLeft||Vd.marker.inclusiveRight)&&Be(Ud,jd,Xd))return!0}function Ge(Ud){Ud=Fe(Ud);for(var jd=0,Vd=Ud.parent,Kd=0,Xd;Kd<Vd.lines.length&&(Xd=Vd.lines[Kd],Xd!=Ud);++Kd)jd+=Xd.height;for(var Yd=Vd.parent;Yd;Vd=Yd,Yd=Vd.parent)for(var _d=0,qd;_d<Yd.children.length&&(qd=Yd.children[_d],qd!=Vd);++_d)jd+=qd.height;return jd}function $e(Ud){if(0==Ud.height)return 0;for(var jd=Ud.text.length,Kd=Ud,Vd,Xd;Vd=Me(Kd);)Xd=Vd.find(0,!0),Kd=Xd.from.line,jd+=Xd.from.ch-Xd.to.ch;for(Kd=Ud;Vd=We(Kd);){var Yd=Vd.find(0,!0);jd-=Kd.text.length-Yd.from.ch,Kd=Yd.to.line,jd+=Kd.text.length-Yd.to.ch}return jd}function Ue(Ud){var jd=Ud.display,Vd=Ud.doc;jd.maxLine=K(Vd,Vd.first),jd.maxLineLength=$e(jd.maxLine),jd.maxLineChanged=!0,Vd.iter(function(Kd){var Xd=$e(Kd);Xd>jd.maxLineLength&&(jd.maxLineLength=Xd,jd.maxLine=Kd)})}function je(Ud,jd,Vd,Kd){if(!Ud)return Kd(jd,Vd,'ltr',0);for(var Xd=!1,Yd=0,_d;Yd<Ud.length;++Yd)_d=Ud[Yd],(_d.from<Vd&&_d.to>jd||jd==Vd&&_d.to==jd)&&(Kd(Math.max(_d.from,jd),Math.min(_d.to,Vd),1==_d.level?'rtl':'ltr',Yd),Xd=!0);Xd||Kd(jd,Vd,'ltr')}function Ve(Ud,jd,Vd){var Kd;Hs=null;for(var Xd=0,Yd;Xd<Ud.length;++Xd){if(Yd=Ud[Xd],Yd.from<jd&&Yd.to>jd)return Xd;Yd.to==jd&&(Yd.from!=Yd.to&&'before'==Vd?Kd=Xd:Hs=Xd),Yd.from==jd&&(Yd.from!=Yd.to&&'before'!=Vd?Kd=Xd:Hs=Xd)}return null==Kd?Hs:Kd}function Ke(Ud,jd){var Vd=Ud.order;return null==Vd&&(Vd=Ud.order=Fs(Ud.text,jd)),Vd}function Xe(Ud,jd){return Ud._handlers&&Ud._handlers[jd]||Ps}function Ye(Ud,jd,Vd){if(Ud.removeEventListener)Ud.removeEventListener(jd,Vd,!1);else if(Ud.detachEvent)Ud.detachEvent('on'+jd,Vd);else{var Kd=Ud._handlers,Xd=Kd&&Kd[jd];if(Xd){var Yd=M(Xd,Vd);-1<Yd&&(Kd[jd]=Xd.slice(0,Yd).concat(Xd.slice(Yd+1)))}}}function qe(Ud,jd){var Vd=Xe(Ud,jd);if(Vd.length)for(var Kd=Array.prototype.slice.call(arguments,2),Xd=0;Xd<Vd.length;++Xd)Vd[Xd].apply(null,Kd)}function Ze(Ud,jd,Vd){return'string'==typeof jd&&(jd={type:jd,preventDefault:function(){this.defaultPrevented=!0}}),qe(Ud,Vd||jd.type,Ud,jd),nt(jd)||jd.codemirrorIgnore}function Qe(Ud){var jd=Ud._handlers&&Ud._handlers.cursorActivity;if(jd)for(var Vd=Ud.curOp.cursorActivityHandlers||(Ud.curOp.cursorActivityHandlers=[]),Kd=0;Kd<jd.length;++Kd)-1==M(Vd,jd[Kd])&&Vd.push(jd[Kd])}function Je(Ud,jd){return 0<Xe(Ud,jd).length}function et(Ud){Ud.prototype.on=function(jd,Vd){Is(this,jd,Vd)},Ud.prototype.off=function(jd,Vd){Ye(this,jd,Vd)}}function tt(Ud){Ud.preventDefault?Ud.preventDefault():Ud.returnValue=!1}function it(Ud){Ud.stopPropagation?Ud.stopPropagation():Ud.cancelBubble=!0}function nt(Ud){return null==Ud.defaultPrevented?!1==Ud.returnValue:Ud.defaultPrevented}function ot(Ud){tt(Ud),it(Ud)}function lt(Ud){return Ud.target||Ud.srcElement}function dt(Ud){var jd=Ud.which;return null==jd&&(1&Ud.button?jd=1:2&Ud.button?jd=3:4&Ud.button&&(jd=2)),cs&&Ud.ctrlKey&&1==jd&&(jd=3),jd}function pt(Ud){if(null==Es){var jd=u('span','\u200B');c(Ud,u('span',[jd,document.createTextNode('x')])),0!=Ud.firstChild.offsetHeight&&(Es=1>=jd.offsetWidth&&2<jd.offsetHeight&&!(Ql&&8>Jl))}var Vd=Es?u('span','\u200B'):u('span','\xA0',null,'display: inline-block; width: 1px; margin-right: -1px');return Vd.setAttribute('cm-text',''),Vd}function ct(Ud){if(null!=Rs)return Rs;var jd=c(Ud,document.createTextNode('A\u062EA')),Vd=vs(jd,0,1).getBoundingClientRect(),Kd=vs(jd,1,2).getBoundingClientRect();return s(Ud),Vd&&Vd.left!=Vd.right&&(Rs=3>Kd.right-Vd.right)}function ht(Ud){if(null!=Us)return Us;var jd=c(Ud,u('span','x')),Vd=jd.getBoundingClientRect(),Kd=vs(jd,0,1).getBoundingClientRect();return Us=1<Math.abs(Vd.left-Kd.left)}function ut(Ud,jd){2<arguments.length&&(jd.dependencies=Array.prototype.slice.call(arguments,2)),js[Ud]=jd}function ft(Ud){if('string'==typeof Ud&&Vs.hasOwnProperty(Ud))Ud=Vs[Ud];else if(Ud&&'string'==typeof Ud.name&&Vs.hasOwnProperty(Ud.name)){var jd=Vs[Ud.name];'string'==typeof jd&&(jd={name:jd}),Ud=z(jd,Ud),Ud.name=jd.name}else{if('string'==typeof Ud&&/^[\w\-]+\/[\w\-]+\+xml$/.test(Ud))return ft('application/xml');if('string'==typeof Ud&&/^[\w\-]+\/[\w\-]+\+json$/.test(Ud))return ft('application/json')}return'string'==typeof Ud?{name:Ud}:Ud||{name:'null'}}function mt(Ud,jd){jd=ft(jd);var Vd=js[jd.name];if(!Vd)return mt(Ud,'text/plain');var Kd=Vd(Ud,jd);if(Ks.hasOwnProperty(jd.name)){var Xd=Ks[jd.name];for(var Yd in Xd)Xd.hasOwnProperty(Yd)&&(Kd.hasOwnProperty(Yd)&&(Kd['_'+Yd]=Kd[Yd]),Kd[Yd]=Xd[Yd])}if(Kd.name=jd.name,jd.helperType&&(Kd.helperType=jd.helperType),jd.modeProps)for(var _d in jd.modeProps)Kd[_d]=jd.modeProps[_d];return Kd}function yt(Ud,jd){var Vd=Ks.hasOwnProperty(Ud)?Ks[Ud]:Ks[Ud]={};O(jd,Vd)}function xt(Ud,jd){if(!0===jd)return jd;if(Ud.copyState)return Ud.copyState(jd);var Vd={};for(var Kd in jd){var Xd=jd[Kd];Xd instanceof Array&&(Xd=Xd.concat([])),Vd[Kd]=Xd}return Vd}function vt(Ud,jd){for(var Vd;Ud.innerMode&&(Vd=Ud.innerMode(jd),Vd&&Vd.mode!=Ud);)jd=Vd.state,Ud=Vd.mode;return Vd||{mode:Ud,state:jd}}function bt(Ud,jd,Vd){return!Ud.startState||Ud.startState(jd,Vd)}function Ct(Ud,jd,Vd,Kd){var Xd=[Ud.state.modeGen],Yd={};At(Ud,jd.text,Ud.doc.mode,Vd,function(Qd,Jd){return Xd.push(Qd,Jd)},Yd,Kd);for(var _d=Vd.state,qd=function(Qd){Vd.baseTokens=Xd;var Jd=Ud.state.overlays[Qd],ea=1,ta=0;Vd.state=!0,At(Ud,jd.text,Jd.mode,Vd,function(ia,na){for(var ra=ea,oa;ta<ia;)oa=Xd[ea],oa>ia&&Xd.splice(ea,1,ia,Xd[ea+1],oa),ea+=2,ta=Math.min(ia,oa);if(na)if(Jd.opaque)Xd.splice(ra,ea-ra,ia,'overlay '+na),ea=ra+2;else for(;ra<ea;ra+=2){var la=Xd[ra+1];Xd[ra+1]=(la?la+' ':'')+'overlay '+na}},Yd),Vd.state=_d,Vd.baseTokens=null,Vd.baseTokenPos=1},Zd=0;Zd<Ud.state.overlays.length;++Zd)qd(Zd);return{styles:Xd,classes:Yd.bgClass||Yd.textClass?Yd:null}}function wt(Ud,jd,Vd){if(!jd.styles||jd.styles[0]!=Ud.state.modeGen){var Kd=St(Ud,q(jd)),Xd=jd.text.length>Ud.options.maxHighlightLength&&xt(Ud.doc.mode,Kd.state),Yd=Ct(Ud,jd,Kd);Xd&&(Kd.state=Xd),jd.stateAfter=Kd.save(!Xd),jd.styles=Yd.styles,Yd.classes?jd.styleClasses=Yd.classes:jd.styleClasses&&(jd.styleClasses=null),Vd===Ud.doc.highlightFrontier&&(Ud.doc.modeFrontier=Math.max(Ud.doc.modeFrontier,++Ud.doc.highlightFrontier))}return jd.styles}function St(Ud,jd,Vd){var Kd=Ud.doc,Xd=Ud.display;if(!Kd.mode.startState)return new _s(Kd,!0,jd);var Yd=Mt(Ud,jd,Vd),_d=Yd>Kd.first&&K(Kd,Yd-1).stateAfter,qd=_d?_s.fromSaved(Kd,_d,Yd):new _s(Kd,bt(Kd.mode),Yd);return Kd.iter(Yd,jd,function(Zd){Lt(Ud,Zd.text,qd);var Qd=qd.line;Zd.stateAfter=Qd==jd-1||0==Qd%5||Qd>=Xd.viewFrom&&Qd<Xd.viewTo?qd.save():null,qd.nextLine()}),Vd&&(Kd.modeFrontier=qd.line),qd}function Lt(Ud,jd,Vd,Kd){var Xd=Ud.doc.mode,Yd=new Xs(jd,Ud.options.tabSize,Vd);for(Yd.start=Yd.pos=Kd||0,''==jd&&kt(Xd,Vd.state);!Yd.eol();)Tt(Xd,Yd,Vd.state),Yd.start=Yd.pos}function kt(Ud,jd){if(Ud.blankLine)return Ud.blankLine(jd);if(Ud.innerMode){var Vd=vt(Ud,jd);if(Vd.mode.blankLine)return Vd.mode.blankLine(Vd.state)}}function Tt(Ud,jd,Vd,Kd){for(var Xd=0;10>Xd;Xd++){Kd&&(Kd[0]=vt(Ud,Vd).mode);var Yd=Ud.token(jd,Vd);if(jd.pos>jd.start)return Yd}throw new Error('Mode '+Ud.name+' failed to advance stream.')}function Nt(Ud,jd,Vd,Kd){var Xd=Ud.doc,Yd=Xd.mode,_d;jd=ae(Xd,jd);var qd=K(Xd,jd.line),Zd=St(Ud,jd.line,Vd),Qd=new Xs(qd.text,Ud.options.tabSize,Zd),Jd;for(Kd&&(Jd=[]);(Kd||Qd.pos<jd.ch)&&!Qd.eol();)Qd.start=Qd.pos,_d=Tt(Yd,Qd,Zd.state),Kd&&Jd.push(new qs(Qd,_d,xt(Xd.mode,Zd.state)));return Kd?Jd:new qs(Qd,_d,Zd.state)}function Ot(Ud,jd){if(Ud)for(;;){var Vd=Ud.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!Vd)break;Ud=Ud.slice(0,Vd.index)+Ud.slice(Vd.index+Vd[0].length);var Kd=Vd[1]?'bgClass':'textClass';null==jd[Kd]?jd[Kd]=Vd[2]:!new RegExp('(?:^|s)'+Vd[2]+'(?:$|s)').test(jd[Kd])&&(jd[Kd]+=' '+Vd[2])}return Ud}function At(Ud,jd,Vd,Kd,Xd,Yd,_d){var qd=Vd.flattenSpans;null==qd&&(qd=Ud.options.flattenSpans);var Zd=0,Qd=null,Jd=new Xs(jd,Ud.options.tabSize,Kd),ta=Ud.options.addModeClass&&[null],ea;for(''==jd&&Ot(kt(Vd,Kd.state),Yd);!Jd.eol();){if(Jd.pos>Ud.options.maxHighlightLength?(qd=!1,_d&&Lt(Ud,jd,Kd,Jd.pos),Jd.pos=jd.length,ea=null):ea=Ot(Tt(Vd,Jd,Kd.state,ta),Yd),ta){var ia=ta[0].name;ia&&(ea='m-'+(ea?ia+' '+ea:ia))}if(!qd||Qd!=ea){for(;Zd<Jd.start;)Zd=Math.min(Jd.start,Zd+5e3),Xd(Zd,Qd);Qd=ea}Jd.start=Jd.pos}for(;Zd<Jd.pos;){var na=Math.min(Jd.pos,Zd+5e3);Xd(na,Qd),Zd=na}}function Mt(Ud,jd,Vd){for(var Yd=Ud.doc,_d=Vd?-1:jd-(Ud.doc.mode.innerMode?1e3:100),qd=jd,Kd,Xd;qd>_d;--qd){if(qd<=Yd.first)return Yd.first;var Zd=K(Yd,qd-1),Qd=Zd.stateAfter;if(Qd&&(!Vd||qd+(Qd instanceof Ys?Qd.lookAhead:0)<=Yd.modeFrontier))return qd;var Jd=A(Zd.text,null,Ud.options.tabSize);(null==Xd||Kd>Jd)&&(Xd=qd-1,Kd=Jd)}return Xd}function Wt(Ud,jd){if(Ud.modeFrontier=Math.min(Ud.modeFrontier,jd),!(Ud.highlightFrontier<jd-10)){for(var Vd=Ud.first,Kd=jd-1,Xd;Kd>Vd;Kd--)if(Xd=K(Ud,Kd).stateAfter,Xd&&(!(Xd instanceof Ys)||Kd+Xd.lookAhead<jd)){Vd=Kd+1;break}Ud.highlightFrontier=Math.min(Ud.highlightFrontier,Vd)}}function Dt(Ud,jd,Vd,Kd){Ud.text=jd,Ud.stateAfter&&(Ud.stateAfter=null),Ud.styles&&(Ud.styles=null),null!=Ud.order&&(Ud.order=null),Le(Ud),ke(Ud,Vd);var Xd=Kd?Kd(Ud):1;Xd!=Ud.height&&_(Ud,Xd)}function Ht(Ud){Ud.parent=null,Le(Ud)}function Ft(Ud,jd){if(!Ud||/^\s*$/.test(Ud))return null;var Vd=jd.addModeClass?Js:Qs;return Vd[Ud]||(Vd[Ud]=Ud.replace(/\S+/g,'cm-$&'))}function Pt(Ud,jd){var Vd=v('span',null,null,es?'padding-right: .1px':null),Kd={pre:v('pre',[Vd],'CodeMirror-line'),content:Vd,col:0,pos:0,cm:Ud,trailingSpace:!1,splitSpaces:(Ql||es)&&Ud.getOption('lineWrapping')};jd.measure={};for(var Xd=0;Xd<=(jd.rest?jd.rest.length:0);Xd++){var Yd=Xd?jd.rest[Xd-1]:jd.line,_d=void 0;Kd.pos=0,Kd.addToken=zt,ct(Ud.display.measure)&&(_d=Ke(Yd,Ud.doc.direction))&&(Kd.addToken=Rt(Kd.addToken,_d)),Kd.map=[];var qd=jd!=Ud.display.externalMeasured&&q(Yd);Gt(Yd,Kd,wt(Ud,Yd,qd)),Yd.styleClasses&&(Yd.styleClasses.bgClass&&(Kd.bgClass=T(Yd.styleClasses.bgClass,Kd.bgClass||'')),Yd.styleClasses.textClass&&(Kd.textClass=T(Yd.styleClasses.textClass,Kd.textClass||''))),0==Kd.map.length&&Kd.map.push(0,0,Kd.content.appendChild(pt(Ud.display.measure))),0==Xd?(jd.measure.map=Kd.map,jd.measure.cache={}):((jd.measure.maps||(jd.measure.maps=[])).push(Kd.map),(jd.measure.caches||(jd.measure.caches=[])).push({}))}if(es){var Zd=Kd.content.lastChild;(/\bcm-tab\b/.test(Zd.className)||Zd.querySelector&&Zd.querySelector('.cm-tab'))&&(Kd.content.className='cm-tab-wrap-hack')}return qe(Ud,'renderLine',Ud,jd.line,Kd.pre),Kd.pre.className&&(Kd.textClass=T(Kd.pre.className,Kd.textClass||'')),Kd}function It(Ud){var jd=u('span','\u2022','cm-invalidchar');return jd.title='\\u'+Ud.charCodeAt(0).toString(16),jd.setAttribute('aria-label',jd.title),jd}function zt(Ud,jd,Vd,Kd,Xd,Yd,_d){if(jd){var qd=Ud.splitSpaces?Et(jd,Ud.trailingSpace):jd,Zd=Ud.cm.state.specialChars,Qd=!1,Jd;if(!Zd.test(jd))Ud.col+=jd.length,Jd=document.createTextNode(qd),Ud.map.push(Ud.pos,Ud.pos+jd.length,Jd),Ql&&9>Jl&&(Qd=!0),Ud.pos+=jd.length;else{Jd=document.createDocumentFragment();for(var ea=0;;){Zd.lastIndex=ea;var ta=Zd.exec(jd),ia=ta?ta.index-ea:jd.length-ea;if(ia){var na=document.createTextNode(qd.slice(ea,ea+ia));Ql&&9>Jl?Jd.appendChild(u('span',[na])):Jd.appendChild(na),Ud.map.push(Ud.pos,Ud.pos+ia,na),Ud.col+=ia,Ud.pos+=ia}if(!ta)break;ea+=ia+1;var ra=void 0;if('\t'==ta[0]){var oa=Ud.cm.options.tabSize,la=oa-Ud.col%oa;ra=Jd.appendChild(u('span',D(la),'cm-tab')),ra.setAttribute('role','presentation'),ra.setAttribute('cm-text','\t'),Ud.col+=la}else'\r'==ta[0]||'\n'==ta[0]?(ra=Jd.appendChild(u('span','\r'==ta[0]?'\u240D':'\u2424','cm-invalidchar')),ra.setAttribute('cm-text',ta[0]),Ud.col+=1):(ra=Ud.cm.options.specialCharPlaceholder(ta[0]),ra.setAttribute('cm-text',ta[0]),Ql&&9>Jl?Jd.appendChild(u('span',[ra])):Jd.appendChild(ra),Ud.col+=1);Ud.map.push(Ud.pos,Ud.pos+1,ra),Ud.pos++}}if(Ud.trailingSpace=32==qd.charCodeAt(jd.length-1),Vd||Kd||Xd||Qd||_d){var sa=Vd||'';Kd&&(sa+=Kd),Xd&&(sa+=Xd);var da=u('span',[Jd],sa,_d);return Yd&&(da.title=Yd),Ud.content.appendChild(da)}Ud.content.appendChild(Jd)}}function Et(Ud,jd){if(1<Ud.length&&!/  /.test(Ud))return Ud;for(var Vd=jd,Kd='',Xd=0,Yd;Xd<Ud.length;Xd++)Yd=Ud.charAt(Xd),' '==Yd&&Vd&&(Xd==Ud.length-1||32==Ud.charCodeAt(Xd+1))&&(Yd='\xA0'),Kd+=Yd,Vd=' '==Yd;return Kd}function Rt(Ud,jd){return function(Vd,Kd,Xd,Yd,_d,qd,Zd){Xd=Xd?Xd+' cm-force-border':'cm-force-border';for(var Qd=Vd.pos,Jd=Qd+Kd.length,ea;;){ea=void 0;for(var ta=0;ta<jd.length&&(ea=jd[ta],!(ea.to>Qd&&ea.from<=Qd));ta++);if(ea.to>=Jd)return Ud(Vd,Kd,Xd,Yd,_d,qd,Zd);Ud(Vd,Kd.slice(0,ea.to-Qd),Xd,Yd,null,qd,Zd),Yd=null,Kd=Kd.slice(ea.to-Qd),Qd=ea.to}}}function Bt(Ud,jd,Vd,Kd){var Xd=!Kd&&Vd.widgetNode;Xd&&Ud.map.push(Ud.pos,Ud.pos+jd,Xd),!Kd&&Ud.cm.display.input.needsContentAttribute&&(!Xd&&(Xd=Ud.content.appendChild(document.createElement('span'))),Xd.setAttribute('cm-marker',Vd.id)),Xd&&(Ud.cm.display.input.setUneditable(Xd),Ud.content.appendChild(Xd)),Ud.pos+=jd,Ud.trailingSpace=!1}function Gt(Ud,jd,Vd){var Kd=Ud.markedSpans,Xd=Ud.text,Yd=0;if(!Kd){for(var _d=1;_d<Vd.length;_d+=2)jd.addToken(jd,Xd.slice(Yd,Yd=Vd[_d]),Ft(Vd[_d+1],jd.cm.options));return}for(var qd=Xd.length,Zd=0,Qd=1,Jd='',ia=0,ea,ta,na,ra,oa,la,sa;;){if(ia==Zd){na=ra=oa=la=ta='',sa=null,ia=Infinity;for(var da=[],aa=void 0,pa=0;pa<Kd.length;++pa){var ca=Kd[pa],ha=ca.marker;'bookmark'==ha.type&&ca.from==Zd&&ha.widgetNode?da.push(ha):ca.from<=Zd&&(null==ca.to||ca.to>Zd||ha.collapsed&&ca.to==Zd&&ca.from==Zd)?(null!=ca.to&&ca.to!=Zd&&ia>ca.to&&(ia=ca.to,ra=''),ha.className&&(na+=' '+ha.className),ha.css&&(ta=(ta?ta+';':'')+ha.css),ha.startStyle&&ca.from==Zd&&(oa+=' '+ha.startStyle),ha.endStyle&&ca.to==ia&&(aa||(aa=[])).push(ha.endStyle,ca.to),ha.title&&!la&&(la=ha.title),ha.collapsed&&(!sa||0>Oe(sa.marker,ha))&&(sa=ca)):ca.from>Zd&&ia>ca.from&&(ia=ca.from)}if(aa)for(var ua=0;ua<aa.length;ua+=2)aa[ua+1]==ia&&(ra+=' '+aa[ua]);if(!sa||sa.from==Zd)for(var ga=0;ga<da.length;++ga)Bt(jd,0,da[ga]);if(sa&&(sa.from||0)==Zd){if(Bt(jd,(null==sa.to?qd+1:sa.to)-Zd,sa.marker,null==sa.from),null==sa.to)return;sa.to==Zd&&(sa=!1)}}if(Zd>=qd)break;for(var fa=Math.min(qd,ia);;){if(Jd){var ma=Zd+Jd.length;if(!sa){var ya=ma>fa?Jd.slice(0,fa-Zd):Jd;jd.addToken(jd,ya,ea?ea+na:na,oa,Zd+ya.length==ia?ra:'',la,ta)}if(ma>=fa){Jd=Jd.slice(fa-Zd),Zd=fa;break}Zd=ma,oa=''}Jd=Xd.slice(Yd,Yd=Vd[Qd++]),ea=Ft(Vd[Qd++],jd.cm.options)}}}function $t(Ud,jd,Vd){this.line=jd,this.rest=Ie(jd),this.size=this.rest?q(H(this.rest))-Vd+1:1,this.node=this.text=null,this.hidden=Re(Ud,jd)}function Ut(Ud,jd,Vd){for(var Kd=[],Yd=jd,Xd,_d;Yd<Vd;Yd=Xd)_d=new $t(Ud.doc,K(Ud.doc,Yd),Yd),Xd=Yd+_d.size,Kd.push(_d);return Kd}function jt(Ud){ed?ed.ops.push(Ud):Ud.ownsGroup=ed={ops:[Ud],delayedCallbacks:[]}}function Vt(Ud){var jd=Ud.delayedCallbacks,Vd=0;do{for(;Vd<jd.length;Vd++)jd[Vd].call(null);for(var Kd=0,Xd;Kd<Ud.ops.length;Kd++)if(Xd=Ud.ops[Kd],Xd.cursorActivityHandlers)for(;Xd.cursorActivityCalled<Xd.cursorActivityHandlers.length;)Xd.cursorActivityHandlers[Xd.cursorActivityCalled++].call(null,Xd.cm)}while(Vd<jd.length)}function Kt(Ud,jd){var Vd=Ud.ownsGroup;if(Vd)try{Vt(Vd)}finally{ed=null,jd(Vd)}}function Xt(Ud,jd){var Vd=Xe(Ud,jd);if(Vd.length){var Kd=Array.prototype.slice.call(arguments,2),Xd;ed?Xd=ed.delayedCallbacks:td?Xd=td:(Xd=td=[],setTimeout(Yt,0));for(var Yd=function(qd){Xd.push(function(){return Vd[qd].apply(null,Kd)})},_d=0;_d<Vd.length;++_d)Yd(_d)}}function Yt(){var Ud=td;td=null;for(var jd=0;jd<Ud.length;++jd)Ud[jd]()}function _t(Ud,jd,Vd,Kd){for(var Xd=0,Yd;Xd<jd.changes.length;Xd++)Yd=jd.changes[Xd],'text'==Yd?Jt(Ud,jd):'gutter'==Yd?ti(Ud,jd,Vd,Kd):'class'==Yd?ei(Ud,jd):'widget'==Yd&&ii(Ud,jd,Kd);jd.changes=null}function qt(Ud){return Ud.node==Ud.text&&(Ud.node=u('div',null,null,'position: relative'),Ud.text.parentNode&&Ud.text.parentNode.replaceChild(Ud.node,Ud.text),Ud.node.appendChild(Ud.text),Ql&&8>Jl&&(Ud.node.style.zIndex=2)),Ud.node}function Zt(Ud,jd){var Vd=jd.bgClass?jd.bgClass+' '+(jd.line.bgClass||''):jd.line.bgClass;if(Vd&&(Vd+=' CodeMirror-linebackground'),jd.background)Vd?jd.background.className=Vd:(jd.background.parentNode.removeChild(jd.background),jd.background=null);else if(Vd){var Kd=qt(jd);jd.background=Kd.insertBefore(u('div',null,Vd),Kd.firstChild),Ud.display.input.setUneditable(jd.background)}}function Qt(Ud,jd){var Vd=Ud.display.externalMeasured;return Vd&&Vd.line==jd.line?(Ud.display.externalMeasured=null,jd.measure=Vd.measure,Vd.built):Pt(Ud,jd)}function Jt(Ud,jd){var Vd=jd.text.className,Kd=Qt(Ud,jd);jd.text==jd.node&&(jd.node=Kd.pre),jd.text.parentNode.replaceChild(Kd.pre,jd.text),jd.text=Kd.pre,Kd.bgClass!=jd.bgClass||Kd.textClass!=jd.textClass?(jd.bgClass=Kd.bgClass,jd.textClass=Kd.textClass,ei(Ud,jd)):Vd&&(jd.text.className=Vd)}function ei(Ud,jd){Zt(Ud,jd),jd.line.wrapClass?qt(jd).className=jd.line.wrapClass:jd.node!=jd.text&&(jd.node.className='');var Vd=jd.textClass?jd.textClass+' '+(jd.line.textClass||''):jd.line.textClass;jd.text.className=Vd||''}function ti(Ud,jd,Vd,Kd){if(jd.gutter&&(jd.node.removeChild(jd.gutter),jd.gutter=null),jd.gutterBackground&&(jd.node.removeChild(jd.gutterBackground),jd.gutterBackground=null),jd.line.gutterClass){var Xd=qt(jd);jd.gutterBackground=u('div',null,'CodeMirror-gutter-background '+jd.line.gutterClass,'left: '+(Ud.options.fixedGutter?Kd.fixedPos:-Kd.gutterTotalWidth)+'px; width: '+Kd.gutterTotalWidth+'px'),Ud.display.input.setUneditable(jd.gutterBackground),Xd.insertBefore(jd.gutterBackground,jd.text)}var Yd=jd.line.gutterMarkers;if(Ud.options.lineNumbers||Yd){var _d=qt(jd),qd=jd.gutter=u('div',null,'CodeMirror-gutter-wrapper','left: '+(Ud.options.fixedGutter?Kd.fixedPos:-Kd.gutterTotalWidth)+'px');if(Ud.display.input.setUneditable(qd),_d.insertBefore(qd,jd.text),jd.line.gutterClass&&(qd.className+=' '+jd.line.gutterClass),!Ud.options.lineNumbers||Yd&&Yd['CodeMirror-linenumbers']||(jd.lineNumber=qd.appendChild(u('div',J(Ud.options,Vd),'CodeMirror-linenumber CodeMirror-gutter-elt','left: '+Kd.gutterLeft['CodeMirror-linenumbers']+'px; width: '+Ud.display.lineNumInnerWidth+'px'))),Yd)for(var Zd=0;Zd<Ud.options.gutters.length;++Zd){var Qd=Ud.options.gutters[Zd],Jd=Yd.hasOwnProperty(Qd)&&Yd[Qd];Jd&&qd.appendChild(u('div',[Jd],'CodeMirror-gutter-elt','left: '+Kd.gutterLeft[Qd]+'px; width: '+Kd.gutterWidth[Qd]+'px'))}}}function ii(Ud,jd,Vd){jd.alignable&&(jd.alignable=null);for(var Kd=jd.node.firstChild,Xd=void 0;Kd;Kd=Xd)Xd=Kd.nextSibling,'CodeMirror-linewidget'==Kd.className&&jd.node.removeChild(Kd);ri(Ud,jd,Vd)}function ni(Ud,jd,Vd,Kd){var Xd=Qt(Ud,jd);return jd.text=jd.node=Xd.pre,Xd.bgClass&&(jd.bgClass=Xd.bgClass),Xd.textClass&&(jd.textClass=Xd.textClass),ei(Ud,jd),ti(Ud,jd,Vd,Kd),ri(Ud,jd,Kd),jd.node}function ri(Ud,jd,Vd){if(oi(Ud,jd.line,jd,Vd,!0),jd.rest)for(var Kd=0;Kd<jd.rest.length;Kd++)oi(Ud,jd.rest[Kd],jd,Vd,!1)}function oi(Ud,jd,Vd,Kd,Xd){if(jd.widgets)for(var Yd=qt(Vd),_d=0,qd=jd.widgets;_d<qd.length;++_d){var Zd=qd[_d],Qd=u('div',[Zd.node],'CodeMirror-linewidget');Zd.handleMouseEvents||Qd.setAttribute('cm-ignore-events','true'),li(Zd,Qd,Vd,Kd),Ud.display.input.setUneditable(Qd),Xd&&Zd.above?Yd.insertBefore(Qd,Vd.gutter||Vd.text):Yd.appendChild(Qd),Xt(Zd,'redraw')}}function li(Ud,jd,Vd,Kd){if(Ud.noHScroll){(Vd.alignable||(Vd.alignable=[])).push(jd);var Xd=Kd.wrapperWidth;jd.style.left=Kd.fixedPos+'px',Ud.coverGutter||(Xd-=Kd.gutterTotalWidth,jd.style.paddingLeft=Kd.gutterTotalWidth+'px'),jd.style.width=Xd+'px'}Ud.coverGutter&&(jd.style.zIndex=5,jd.style.position='relative',!Ud.noHScroll&&(jd.style.marginLeft=-Kd.gutterTotalWidth+'px'))}function si(Ud){if(null!=Ud.height)return Ud.height;var jd=Ud.doc.cm;if(!jd)return 0;if(!C(document.body,Ud.node)){var Vd='position: relative;';Ud.coverGutter&&(Vd+='margin-left: -'+jd.display.gutters.offsetWidth+'px;'),Ud.noHScroll&&(Vd+='width: '+jd.display.wrapper.clientWidth+'px;'),c(jd.display.measure,u('div',[Ud.node],null,Vd))}return Ud.height=Ud.node.parentNode.offsetHeight}function di(Ud,jd){for(var Vd=lt(jd);Vd!=Ud.wrapper;Vd=Vd.parentNode)if(!Vd||1==Vd.nodeType&&'true'==Vd.getAttribute('cm-ignore-events')||Vd.parentNode==Ud.sizer&&Vd!=Ud.mover)return!0}function ai(Ud){return Ud.lineSpace.offsetTop}function pi(Ud){return Ud.mover.offsetHeight-Ud.lineSpace.offsetHeight}function ci(Ud){if(Ud.cachedPaddingH)return Ud.cachedPaddingH;var jd=c(Ud.measure,u('pre','x')),Vd=window.getComputedStyle?window.getComputedStyle(jd):jd.currentStyle,Kd={left:parseInt(Vd.paddingLeft),right:parseInt(Vd.paddingRight)};return isNaN(Kd.left)||isNaN(Kd.right)||(Ud.cachedPaddingH=Kd),Kd}function hi(Ud){return Ss-Ud.display.nativeBarWidth}function ui(Ud){return Ud.display.scroller.clientWidth-hi(Ud)-Ud.display.barWidth}function gi(Ud){return Ud.display.scroller.clientHeight-hi(Ud)-Ud.display.barHeight}function fi(Ud,jd,Vd){var Kd=Ud.options.lineWrapping,Xd=Kd&&ui(Ud);if(!jd.measure.heights||Kd&&jd.measure.width!=Xd){var Yd=jd.measure.heights=[];if(Kd){jd.measure.width=Xd;for(var _d=jd.text.firstChild.getClientRects(),qd=0;qd<_d.length-1;qd++){var Zd=_d[qd],Qd=_d[qd+1];2<Math.abs(Zd.bottom-Qd.bottom)&&Yd.push((Zd.bottom+Qd.top)/2-Vd.top)}}Yd.push(Vd.bottom-Vd.top)}}function mi(Ud,jd,Vd){if(Ud.line==jd)return{map:Ud.measure.map,cache:Ud.measure.cache};for(var Kd=0;Kd<Ud.rest.length;Kd++)if(Ud.rest[Kd]==jd)return{map:Ud.measure.maps[Kd],cache:Ud.measure.caches[Kd]};for(var Xd=0;Xd<Ud.rest.length;Xd++)if(q(Ud.rest[Xd])>Vd)return{map:Ud.measure.maps[Xd],cache:Ud.measure.caches[Xd],before:!0}}function yi(Ud,jd){jd=Fe(jd);var Vd=q(jd),Kd=Ud.display.externalMeasured=new $t(Ud.doc,jd,Vd);Kd.lineN=Vd;var Xd=Kd.built=Pt(Ud,Kd);return Kd.text=Xd.pre,c(Ud.display.lineMeasure,Xd.pre),Kd}function xi(Ud,jd,Vd,Kd){return Ci(Ud,bi(Ud,jd),Vd,Kd)}function vi(Ud,jd){if(jd>=Ud.display.viewFrom&&jd<Ud.display.viewTo)return Ud.display.view[Qi(Ud,jd)];var Vd=Ud.display.externalMeasured;if(Vd&&jd>=Vd.lineN&&jd<Vd.lineN+Vd.size)return Vd}function bi(Ud,jd){var Vd=q(jd),Kd=vi(Ud,Vd);Kd&&!Kd.text?Kd=null:Kd&&Kd.changes&&(_t(Ud,Kd,Vd,Xi(Ud)),Ud.curOp.forceUpdate=!0),Kd||(Kd=yi(Ud,jd));var Xd=mi(Kd,jd,Vd);return{line:jd,view:Kd,rect:null,map:Xd.map,cache:Xd.cache,before:Xd.before,hasHeights:!1}}function Ci(Ud,jd,Vd,Kd,Xd){jd.before&&(Vd=-1);var Yd=Vd+(Kd||''),_d;return jd.cache.hasOwnProperty(Yd)?_d=jd.cache[Yd]:(!jd.rect&&(jd.rect=jd.view.text.getBoundingClientRect()),!jd.hasHeights&&(fi(Ud,jd.view,jd.rect),jd.hasHeights=!0),_d=Li(Ud,jd,Vd,Kd),!_d.bogus&&(jd.cache[Yd]=_d)),{left:_d.left,right:_d.right,top:Xd?_d.rtop:_d.top,bottom:Xd?_d.rbottom:_d.bottom}}function wi(Ud,jd,Vd){for(var Qd=0,Kd,Xd,Yd,_d,qd,Zd;Qd<Ud.length;Qd+=3)if(qd=Ud[Qd],Zd=Ud[Qd+1],jd<qd?(Xd=0,Yd=1,_d='left'):jd<Zd?(Xd=jd-qd,Yd=Xd+1):(Qd==Ud.length-3||jd==Zd&&Ud[Qd+3]>jd)&&(Yd=Zd-qd,Xd=Yd-1,jd>=Zd&&(_d='right')),null!=Xd){if(Kd=Ud[Qd+2],qd==Zd&&Vd==(Kd.insertLeft?'left':'right')&&(_d=Vd),'left'==Vd&&0==Xd)for(;Qd&&Ud[Qd-2]==Ud[Qd-3]&&Ud[Qd-1].insertLeft;)Kd=Ud[(Qd-=3)+2],_d='left';if('right'==Vd&&Xd==Zd-qd)for(;Qd<Ud.length-3&&Ud[Qd+3]==Ud[Qd+4]&&!Ud[Qd+5].insertLeft;)Kd=Ud[(Qd+=3)+2],_d='right';break}return{node:Kd,start:Xd,end:Yd,collapse:_d,coverStart:qd,coverEnd:Zd}}function Si(Ud,jd){var Vd=nd;if('left'==jd)for(var Kd=0;Kd<Ud.length&&(Vd=Ud[Kd]).left==Vd.right;Kd++);else for(var Xd=Ud.length-1;0<=Xd&&(Vd=Ud[Xd]).left==Vd.right;Xd--);return Vd}function Li(Ud,jd,Vd,Kd){var Xd=wi(jd.map,Vd,Kd),Yd=Xd.node,_d=Xd.start,qd=Xd.end,Zd=Xd.collapse,Qd;if(3==Yd.nodeType){for(var Jd=0;4>Jd;Jd++){for(;_d&&G(jd.line.text.charAt(Xd.coverStart+_d));)--_d;for(;Xd.coverStart+qd<Xd.coverEnd&&G(jd.line.text.charAt(Xd.coverStart+qd));)++qd;if(Qd=Ql&&9>Jl&&0==_d&&qd==Xd.coverEnd-Xd.coverStart?Yd.parentNode.getBoundingClientRect():Si(vs(Yd,_d,qd).getClientRects(),Kd),Qd.left||Qd.right||0==_d)break;qd=_d,--_d,Zd='right'}Ql&&11>Jl&&(Qd=ki(Ud.display.measure,Qd))}else{0<_d&&(Zd=Kd='right');var ea;Qd=Ud.options.lineWrapping&&1<(ea=Yd.getClientRects()).length?ea['right'==Kd?ea.length-1:0]:Yd.getBoundingClientRect()}if(Ql&&9>Jl&&!_d&&(!Qd||!Qd.left&&!Qd.right)){var ta=Yd.parentNode.getClientRects()[0];Qd=ta?{left:ta.left,right:ta.left+Ki(Ud.display),top:ta.top,bottom:ta.bottom}:nd}for(var ia=Qd.top-jd.rect.top,na=Qd.bottom-jd.rect.top,oa=jd.view.measure.heights,la=0;la<oa.length-1&&!((ia+na)/2<oa[la]);la++);var sa=la?oa[la-1]:0,da=oa[la],aa={left:('right'==Zd?Qd.right:Qd.left)-jd.rect.left,right:('left'==Zd?Qd.left:Qd.right)-jd.rect.left,top:sa,bottom:da};return Qd.left||Qd.right||(aa.bogus=!0),Ud.options.singleCursorHeightPerLine||(aa.rtop=ia,aa.rbottom=na),aa}function ki(Ud,jd){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!ht(Ud))return jd;var Vd=screen.logicalXDPI/screen.deviceXDPI,Kd=screen.logicalYDPI/screen.deviceYDPI;return{left:jd.left*Vd,right:jd.right*Vd,top:jd.top*Kd,bottom:jd.bottom*Kd}}function Ti(Ud){if(Ud.measure&&(Ud.measure.cache={},Ud.measure.heights=null,Ud.rest))for(var jd=0;jd<Ud.rest.length;jd++)Ud.measure.caches[jd]={}}function Ni(Ud){Ud.display.externalMeasure=null,s(Ud.display.lineMeasure);for(var jd=0;jd<Ud.display.view.length;jd++)Ti(Ud.display.view[jd])}function Oi(Ud){Ni(Ud),Ud.display.cachedCharWidth=Ud.display.cachedTextHeight=Ud.display.cachedPaddingH=null,Ud.options.lineWrapping||(Ud.display.maxLineChanged=!0),Ud.display.lineNumChars=null}function Ai(){return is&&ds?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Mi(){return is&&ds?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wi(Ud){var jd=0;if(Ud.widgets)for(var Vd=0;Vd<Ud.widgets.length;++Vd)Ud.widgets[Vd].above&&(jd+=si(Ud.widgets[Vd]));return jd}function Di(Ud,jd,Vd,Kd,Xd){if(!Xd){var Yd=Wi(jd);Vd.top+=Yd,Vd.bottom+=Yd}if('line'==Kd)return Vd;Kd||(Kd='local');var _d=Ge(jd);if('local'==Kd?_d+=ai(Ud.display):_d-=Ud.display.viewOffset,'page'==Kd||'window'==Kd){var qd=Ud.display.lineSpace.getBoundingClientRect();_d+=qd.top+('window'==Kd?0:Mi());var Zd=qd.left+('window'==Kd?0:Ai());Vd.left+=Zd,Vd.right+=Zd}return Vd.top+=_d,Vd.bottom+=_d,Vd}function Hi(Ud,jd,Vd){if('div'==Vd)return jd;var Kd=jd.left,Xd=jd.top;if('page'==Vd)Kd-=Ai(),Xd-=Mi();else if('local'==Vd||!Vd){var Yd=Ud.display.sizer.getBoundingClientRect();Kd+=Yd.left,Xd+=Yd.top}var _d=Ud.display.lineSpace.getBoundingClientRect();return{left:Kd-_d.left,top:Xd-_d.top}}function Fi(Ud,jd,Vd,Kd,Xd){return Kd||(Kd=K(Ud.doc,jd.line)),Di(Ud,Kd,xi(Ud,Kd,jd.ch,Xd),Vd)}function Pi(Ud,jd,Vd,Kd,Xd,Yd){function _d(na,ra){var oa=Ci(Ud,Xd,na,ra?'right':'left',Yd);return ra?oa.left=oa.right:oa.right=oa.left,Di(Ud,Kd,oa,Vd)}function qd(na,ra,oa){var la=Zd[ra],sa=1==la.level;return _d(oa?na-1:na,sa!=oa)}Kd=Kd||K(Ud.doc,jd.line),Xd||(Xd=bi(Ud,Kd));var Zd=Ke(Kd,Ud.doc.direction),Qd=jd.ch,Jd=jd.sticky;if(Qd>=Kd.text.length?(Qd=Kd.text.length,Jd='before'):0>=Qd&&(Qd=0,Jd='after'),!Zd)return _d('before'==Jd?Qd-1:Qd,'before'==Jd);var ea=Ve(Zd,Qd,Jd),ta=Hs,ia=qd(Qd,ea,'before'==Jd);return null!=ta&&(ia.other=qd(Qd,ta,'before'!=Jd)),ia}function Ii(Ud,jd){var Vd=0;jd=ae(Ud.doc,jd),Ud.options.lineWrapping||(Vd=Ki(Ud.display)*jd.ch);var Kd=K(Ud.doc,jd.line),Xd=Ge(Kd)+ai(Ud.display);return{left:Vd,right:Vd,top:Xd,bottom:Xd+Kd.height}}function zi(Ud,jd,Vd,Kd,Xd){var Yd=ee(Ud,jd,Vd);return Yd.xRel=Xd,Kd&&(Yd.outside=!0),Yd}function Ei(Ud,jd,Vd){var Kd=Ud.doc;if(Vd+=Ud.display.viewOffset,0>Vd)return zi(Kd.first,0,null,!0,-1);var Xd=Z(Kd,Vd),Yd=Kd.first+Kd.size-1;if(Xd>Yd)return zi(Kd.first+Kd.size-1,K(Kd,Yd).text.length,null,!0,1);0>jd&&(jd=0);for(var _d=K(Kd,Xd);;){var qd=$i(Ud,_d,Xd,jd,Vd),Zd=De(_d,qd.ch+(0<qd.xRel?1:0));if(!Zd)return qd;var Qd=Zd.find(1);if(Qd.line==Xd)return Qd;_d=K(Kd,Xd=Qd.line)}}function Ri(Ud,jd,Vd,Kd){Kd-=Wi(jd);var Xd=jd.text.length,Yd=U(function(_d){return Ci(Ud,Vd,_d-1).bottom<=Kd},Xd,0);return Xd=U(function(_d){return Ci(Ud,Vd,_d).top>Kd},Yd,Xd),{begin:Yd,end:Xd}}function Bi(Ud,jd,Vd,Kd){Vd||(Vd=bi(Ud,jd));var Xd=Di(Ud,jd,Ci(Ud,Vd,Kd),'line').top;return Ri(Ud,jd,Vd,Xd)}function Gi(Ud,jd,Vd,Kd){return!(Ud.bottom<=Vd)&&(!!(Ud.top>Vd)||(Kd?Ud.left:Ud.right)>jd)}function $i(Ud,jd,Vd,Kd,Xd){Xd-=Ge(jd);var Yd=bi(Ud,jd),_d=Wi(jd),qd=0,Zd=jd.text.length,Qd=!0,Jd=Ke(jd,Ud.doc.direction);if(Jd){var ea=(Ud.options.lineWrapping?ji:Ui)(Ud,jd,Vd,Yd,Jd,Kd,Xd);Qd=1!=ea.level,qd=Qd?ea.from:ea.to-1,Zd=Qd?ea.to:ea.from-1}var ta=null,ia=null,na=U(function(pa){var ca=Ci(Ud,Yd,pa);return(ca.top+=_d,ca.bottom+=_d,!!Gi(ca,Kd,Xd,!1))&&(ca.top<=Xd&&ca.left<=Kd&&(ta=pa,ia=ca),!0)},qd,Zd),la=!1,ra,oa;if(ia){var sa=Kd-ia.left<ia.right-Kd,da=sa==Qd;na=ta+(da?0:1),oa=da?'after':'before',ra=sa?ia.left:ia.right}else{Qd||na!=Zd&&na!=qd||na++,oa=0==na?'after':na==jd.text.length?'before':Ci(Ud,Yd,na-(Qd?1:0)).bottom+_d<=Xd==Qd?'after':'before';var aa=Pi(Ud,ee(Vd,na,oa),'line',jd,Yd);ra=aa.left,la=Xd<aa.top||Xd>=aa.bottom}return na=$(jd.text,na,1),zi(Vd,na,oa,la,Kd-ra)}function Ui(Ud,jd,Vd,Kd,Xd,Yd,_d){var qd=U(function(ea){var ta=Xd[ea],ia=1!=ta.level;return Gi(Pi(Ud,ee(Vd,ia?ta.to:ta.from,ia?'before':'after'),'line',jd,Kd),Yd,_d,!0)},0,Xd.length-1),Zd=Xd[qd];if(0<qd){var Qd=1!=Zd.level,Jd=Pi(Ud,ee(Vd,Qd?Zd.from:Zd.to,Qd?'after':'before'),'line',jd,Kd);Gi(Jd,Yd,_d,!0)&&Jd.top>_d&&(Zd=Xd[qd-1])}return Zd}function ji(Ud,jd,Vd,Kd,Xd,Yd,_d){var qd=Ri(Ud,jd,Kd,_d),Zd=qd.begin,Qd=qd.end;/\s/.test(jd.text.charAt(Qd-1))&&Qd--;for(var Jd=null,ea=null,ta=0,ia;ta<Xd.length;ta++)if(ia=Xd[ta],!(ia.from>=Qd||ia.to<=Zd)){var na=1!=ia.level,ra=Ci(Ud,Kd,na?Math.min(Qd,ia.to)-1:Math.max(Zd,ia.from)).right,oa=ra<Yd?Yd-ra+1e9:ra-Yd;(!Jd||ea>oa)&&(Jd=ia,ea=oa)}return Jd||(Jd=Xd[Xd.length-1]),Jd.from<Zd&&(Jd={from:Zd,to:Jd.to,level:Jd.level}),Jd.to>Qd&&(Jd={from:Jd.from,to:Qd,level:Jd.level}),Jd}function Vi(Ud){if(null!=Ud.cachedTextHeight)return Ud.cachedTextHeight;if(null==rd){rd=u('pre');for(var jd=0;49>jd;++jd)rd.appendChild(document.createTextNode('x')),rd.appendChild(u('br'));rd.appendChild(document.createTextNode('x'))}c(Ud.measure,rd);var Vd=rd.offsetHeight/50;return 3<Vd&&(Ud.cachedTextHeight=Vd),s(Ud.measure),Vd||1}function Ki(Ud){if(null!=Ud.cachedCharWidth)return Ud.cachedCharWidth;var jd=u('span','xxxxxxxxxx'),Vd=u('pre',[jd]);c(Ud.measure,Vd);var Kd=jd.getBoundingClientRect(),Xd=(Kd.right-Kd.left)/10;return 2<Xd&&(Ud.cachedCharWidth=Xd),Xd||10}function Xi(Ud){for(var jd=Ud.display,Vd={},Kd={},Xd=jd.gutters.clientLeft,Yd=jd.gutters.firstChild,_d=0;Yd;Yd=Yd.nextSibling,++_d)Vd[Ud.options.gutters[_d]]=Yd.offsetLeft+Yd.clientLeft+Xd,Kd[Ud.options.gutters[_d]]=Yd.clientWidth;return{fixedPos:Yi(jd),gutterTotalWidth:jd.gutters.offsetWidth,gutterLeft:Vd,gutterWidth:Kd,wrapperWidth:jd.wrapper.clientWidth}}function Yi(Ud){return Ud.scroller.getBoundingClientRect().left-Ud.sizer.getBoundingClientRect().left}function _i(Ud){var jd=Vi(Ud.display),Vd=Ud.options.lineWrapping,Kd=Vd&&Math.max(5,Ud.display.scroller.clientWidth/Ki(Ud.display)-3);return function(Xd){if(Re(Ud.doc,Xd))return 0;var Yd=0;if(Xd.widgets)for(var _d=0;_d<Xd.widgets.length;_d++)Xd.widgets[_d].height&&(Yd+=Xd.widgets[_d].height);return Vd?Yd+(Math.ceil(Xd.text.length/Kd)||1)*jd:Yd+jd}}function qi(Ud){var jd=Ud.doc,Vd=_i(Ud);jd.iter(function(Kd){var Xd=Vd(Kd);Xd!=Kd.height&&_(Kd,Xd)})}function Zi(Ud,jd,Vd,Kd){var Xd=Ud.display;if(!Vd&&'true'==lt(jd).getAttribute('cm-not-content'))return null;var qd=Xd.lineSpace.getBoundingClientRect(),Yd,_d;try{Yd=jd.clientX-qd.left,_d=jd.clientY-qd.top}catch(ea){return null}var Zd=Ei(Ud,Yd,_d),Qd;if(Kd&&1==Zd.xRel&&(Qd=K(Ud.doc,Zd.line).text).length==Zd.ch){var Jd=A(Qd,Qd.length,Ud.options.tabSize)-Qd.length;Zd=ee(Zd.line,Math.max(0,Math.round((Yd-ci(Ud.display).left)/Ki(Ud.display))-Jd))}return Zd}function Qi(Ud,jd){if(jd>=Ud.display.viewTo)return null;if(jd-=Ud.display.viewFrom,0>jd)return null;for(var Vd=Ud.display.view,Kd=0;Kd<Vd.length;Kd++)if(jd-=Vd[Kd].size,0>jd)return Kd}function Ji(Ud){Ud.display.input.showSelection(Ud.display.input.prepareSelection())}function en(Ud,jd){void 0===jd&&(jd=!0);for(var Vd=Ud.doc,Kd={},Xd=Kd.cursors=document.createDocumentFragment(),Yd=Kd.selection=document.createDocumentFragment(),_d=0;_d<Vd.sel.ranges.length;_d++)if(jd||_d!=Vd.sel.primIndex){var qd=Vd.sel.ranges[_d];if(!(qd.from().line>=Ud.display.viewTo||qd.to().line<Ud.display.viewFrom)){var Zd=qd.empty();(Zd||Ud.options.showCursorWhenSelecting)&&tn(Ud,qd.head,Xd),Zd||rn(Ud,qd,Yd)}}return Kd}function tn(Ud,jd,Vd){var Kd=Pi(Ud,jd,'div',null,null,!Ud.options.singleCursorHeightPerLine),Xd=Vd.appendChild(u('div','\xA0','CodeMirror-cursor'));if(Xd.style.left=Kd.left+'px',Xd.style.top=Kd.top+'px',Xd.style.height=Math.max(0,Kd.bottom-Kd.top)*Ud.options.cursorHeight+'px',Kd.other){var Yd=Vd.appendChild(u('div','\xA0','CodeMirror-cursor CodeMirror-secondarycursor'));Yd.style.display='',Yd.style.left=Kd.other.left+'px',Yd.style.top=Kd.other.top+'px',Yd.style.height=.85*(Kd.other.bottom-Kd.other.top)+'px'}}function nn(Ud,jd){return Ud.top-jd.top||Ud.left-jd.left}function rn(Ud,jd,Vd){function Kd(da,aa,pa,ca){0>aa&&(aa=0),aa=Math.round(aa),ca=Math.round(ca),qd.appendChild(u('div',null,'CodeMirror-selected','position: absolute; left: '+da+'px;\n                             top: '+aa+'px; width: '+(null==pa?Jd-da:pa)+'px;\n                             height: '+(ca-aa)+'px'))}function Xd(da,aa,pa){function ca(xa,va){return Fi(Ud,ee(da,xa),'div',ua,va)}function ha(xa,va,ba){var Ca=Bi(Ud,ua,null,xa),wa='ltr'==va==('after'==ba)?'left':'right',Sa='after'==ba?Ca.begin:Ca.end-(/\s/.test(ua.text.charAt(Ca.end-1))?2:1);return ca(Sa,wa)[wa]}var ua=K(_d,da),ga=ua.text.length,ya=Ke(ua,_d.direction),fa,ma;return je(ya,aa||0,null==pa?ga:pa,function(xa,va,ba,Ca){var wa='ltr'==ba,Sa=ca(xa,wa?'left':'right'),La=ca(va-1,wa?'right':'left'),ka=null==aa&&0==xa,Ta=null==pa&&va==ga,Na=0==Ca,Oa=!ya||Ca==ya.length-1;if(3>=La.top-Sa.top){var Aa=(ea?ka:Ta)&&Na,Ma=(ea?Ta:ka)&&Oa,Wa=Aa?Qd:(wa?Sa:La).left,Da=Ma?Jd:(wa?La:Sa).right;Kd(Wa,Sa.top,Da-Wa,Sa.bottom)}else{var Ha,Fa,Pa,Ia;wa?(Ha=ea&&ka&&Na?Qd:Sa.left,Fa=ea?Jd:ha(xa,ba,'before'),Pa=ea?Qd:ha(va,ba,'after'),Ia=ea&&Ta&&Oa?Jd:La.right):(Ha=ea?ha(xa,ba,'before'):Qd,Fa=!ea&&ka&&Na?Jd:Sa.right,Pa=!ea&&Ta&&Oa?Qd:La.left,Ia=ea?ha(va,ba,'after'):Jd),Kd(Ha,Sa.top,Fa-Ha,Sa.bottom),Sa.bottom<La.top&&Kd(Qd,Sa.bottom,null,La.top),Kd(Pa,La.top,Ia-Pa,La.bottom)}(!fa||0>nn(Sa,fa))&&(fa=Sa),0>nn(La,fa)&&(fa=La),(!ma||0>nn(Sa,ma))&&(ma=Sa),0>nn(La,ma)&&(ma=La)}),{start:fa,end:ma}}var Yd=Ud.display,_d=Ud.doc,qd=document.createDocumentFragment(),Zd=ci(Ud.display),Qd=Zd.left,Jd=Math.max(Yd.sizerWidth,ui(Ud)-Yd.sizer.offsetLeft)-Zd.right,ea='ltr'==_d.direction,ta=jd.from(),ia=jd.to();if(ta.line==ia.line)Xd(ta.line,ta.ch,ia.ch);else{var na=K(_d,ta.line),ra=K(_d,ia.line),oa=Fe(na)==Fe(ra),la=Xd(ta.line,ta.ch,oa?na.text.length+1:null).end,sa=Xd(ia.line,oa?0:null,ia.ch).start;oa&&(la.top<sa.top-2?(Kd(la.right,la.top,null,la.bottom),Kd(Qd,sa.top,sa.left,sa.bottom)):Kd(la.right,la.top,sa.left-la.right,la.bottom)),la.bottom<sa.top&&Kd(Qd,la.bottom,null,sa.top)}Vd.appendChild(qd)}function ln(Ud){if(Ud.state.focused){var jd=Ud.display;clearInterval(jd.blinker);var Vd=!0;jd.cursorDiv.style.visibility='',0<Ud.options.cursorBlinkRate?jd.blinker=setInterval(function(){return jd.cursorDiv.style.visibility=(Vd=!Vd)?'':'hidden'},Ud.options.cursorBlinkRate):0>Ud.options.cursorBlinkRate&&(jd.cursorDiv.style.visibility='hidden')}}function sn(Ud){Ud.state.focused||(Ud.display.input.focus(),an(Ud))}function dn(Ud){Ud.state.delayingBlurEvent=!0,setTimeout(function(){Ud.state.delayingBlurEvent&&(Ud.state.delayingBlurEvent=!1,pn(Ud))},100)}function an(Ud,jd){Ud.state.delayingBlurEvent&&(Ud.state.delayingBlurEvent=!1),'nocursor'==Ud.options.readOnly||(!Ud.state.focused&&(qe(Ud,'focus',Ud,jd),Ud.state.focused=!0,L(Ud.display.wrapper,'CodeMirror-focused'),!Ud.curOp&&Ud.display.selForContextMenu!=Ud.doc.sel&&(Ud.display.input.reset(),es&&setTimeout(function(){return Ud.display.input.reset(!0)},20)),Ud.display.input.receivedFocus()),ln(Ud))}function pn(Ud,jd){Ud.state.delayingBlurEvent||(Ud.state.focused&&(qe(Ud,'blur',Ud,jd),Ud.state.focused=!1,xs(Ud.display.wrapper,'CodeMirror-focused')),clearInterval(Ud.display.blinker),setTimeout(function(){Ud.state.focused||(Ud.display.shift=!1)},150))}function cn(Ud){for(var jd=Ud.display,Vd=jd.lineDiv.offsetTop,Kd=0;Kd<jd.view.length;Kd++){var Xd=jd.view[Kd],Yd=void 0;if(!Xd.hidden){if(Ql&&8>Jl){var _d=Xd.node.offsetTop+Xd.node.offsetHeight;Yd=_d-Vd,Vd=_d}else{var qd=Xd.node.getBoundingClientRect();Yd=qd.bottom-qd.top}var Zd=Xd.line.height-Yd;if(2>Yd&&(Yd=Vi(jd)),(.005<Zd||-.005>Zd)&&(_(Xd.line,Yd),hn(Xd.line),Xd.rest))for(var Qd=0;Qd<Xd.rest.length;Qd++)hn(Xd.rest[Qd])}}}function hn(Ud){if(Ud.widgets)for(var jd=0;jd<Ud.widgets.length;++jd){var Vd=Ud.widgets[jd],Kd=Vd.node.parentNode;Kd&&(Vd.height=Kd.offsetHeight)}}function un(Ud,jd,Vd){var Kd=Vd&&null!=Vd.top?Math.max(0,Vd.top):Ud.scroller.scrollTop;Kd=Math.floor(Kd-ai(Ud));var Xd=Vd&&null!=Vd.bottom?Vd.bottom:Kd+Ud.wrapper.clientHeight,Yd=Z(jd,Kd),_d=Z(jd,Xd);if(Vd&&Vd.ensure){var qd=Vd.ensure.from.line,Zd=Vd.ensure.to.line;qd<Yd?(Yd=qd,_d=Z(jd,Ge(K(jd,qd))+Ud.wrapper.clientHeight)):Math.min(Zd,jd.lastLine())>=_d&&(Yd=Z(jd,Ge(K(jd,Zd))-Ud.wrapper.clientHeight),_d=Zd)}return{from:Yd,to:Math.max(_d,Yd+1)}}function gn(Ud){var jd=Ud.display,Vd=jd.view;if(jd.alignWidgets||jd.gutters.firstChild&&Ud.options.fixedGutter){for(var Kd=Yi(jd)-jd.scroller.scrollLeft+Ud.doc.scrollLeft,Xd=jd.gutters.offsetWidth,Yd=Kd+'px',_d=0;_d<Vd.length;_d++)if(!Vd[_d].hidden){Ud.options.fixedGutter&&(Vd[_d].gutter&&(Vd[_d].gutter.style.left=Yd),Vd[_d].gutterBackground&&(Vd[_d].gutterBackground.style.left=Yd));var qd=Vd[_d].alignable;if(qd)for(var Zd=0;Zd<qd.length;Zd++)qd[Zd].style.left=Yd}Ud.options.fixedGutter&&(jd.gutters.style.left=Kd+Xd+'px')}}function fn(Ud){if(!Ud.options.lineNumbers)return!1;var jd=Ud.doc,Vd=J(Ud.options,jd.first+jd.size-1),Kd=Ud.display;if(Vd.length!=Kd.lineNumChars){var Xd=Kd.measure.appendChild(u('div',[u('div',Vd)],'CodeMirror-linenumber CodeMirror-gutter-elt')),Yd=Xd.firstChild.offsetWidth,_d=Xd.offsetWidth-Yd;return Kd.lineGutter.style.width='',Kd.lineNumInnerWidth=Math.max(Yd,Kd.lineGutter.offsetWidth-_d)+1,Kd.lineNumWidth=Kd.lineNumInnerWidth+_d,Kd.lineNumChars=Kd.lineNumInnerWidth?Vd.length:-1,Kd.lineGutter.style.width=Kd.lineNumWidth+'px',lr(Ud),!0}return!1}function mn(Ud,jd){if(!Ze(Ud,'scrollCursorIntoView')){var Vd=Ud.display,Kd=Vd.sizer.getBoundingClientRect(),Xd=null;if(0>jd.top+Kd.top?Xd=!0:jd.bottom+Kd.top>(window.innerHeight||document.documentElement.clientHeight)&&(Xd=!1),null!=Xd&&!ls){var Yd=u('div','\u200B',null,'position: absolute;\n                         top: '+(jd.top-Vd.viewOffset-ai(Ud.display))+'px;\n                         height: '+(jd.bottom-jd.top+hi(Ud)+Vd.barHeight)+'px;\n                         left: '+jd.left+'px; width: '+Math.max(2,jd.right-jd.left)+'px;');Ud.display.lineSpace.appendChild(Yd),Yd.scrollIntoView(Xd),Ud.display.lineSpace.removeChild(Yd)}}}function yn(Ud,jd,Vd,Kd){null==Kd&&(Kd=0);var Xd;Ud.options.lineWrapping||jd!=Vd||(jd=jd.ch?ee(jd.line,'before'==jd.sticky?jd.ch-1:jd.ch,'after'):jd,Vd='before'==jd.sticky?ee(jd.line,jd.ch+1,'before'):jd);for(var Yd=0;5>Yd;Yd++){var _d=!1,qd=Pi(Ud,jd),Zd=Vd&&Vd!=jd?Pi(Ud,Vd):qd;Xd={left:Math.min(qd.left,Zd.left),top:Math.min(qd.top,Zd.top)-Kd,right:Math.max(qd.left,Zd.left),bottom:Math.max(qd.bottom,Zd.bottom)+Kd};var Qd=vn(Ud,Xd),Jd=Ud.doc.scrollTop,ea=Ud.doc.scrollLeft;if(null!=Qd.scrollTop&&(Tn(Ud,Qd.scrollTop),1<Math.abs(Ud.doc.scrollTop-Jd)&&(_d=!0)),null!=Qd.scrollLeft&&(On(Ud,Qd.scrollLeft),1<Math.abs(Ud.doc.scrollLeft-ea)&&(_d=!0)),!_d)break}return Xd}function xn(Ud,jd){var Vd=vn(Ud,jd);null!=Vd.scrollTop&&Tn(Ud,Vd.scrollTop),null!=Vd.scrollLeft&&On(Ud,Vd.scrollLeft)}function vn(Ud,jd){var Vd=Ud.display,Kd=Vi(Ud.display);0>jd.top&&(jd.top=0);var Xd=Ud.curOp&&null!=Ud.curOp.scrollTop?Ud.curOp.scrollTop:Vd.scroller.scrollTop,Yd=gi(Ud),_d={};jd.bottom-jd.top>Yd&&(jd.bottom=jd.top+Yd);var qd=Ud.doc.height+pi(Vd),Zd=jd.top<Kd,Qd=jd.bottom>qd-Kd;if(jd.top<Xd)_d.scrollTop=Zd?0:jd.top;else if(jd.bottom>Xd+Yd){var Jd=Math.min(jd.top,(Qd?qd:jd.bottom)-Yd);Jd!=Xd&&(_d.scrollTop=Jd)}var ea=Ud.curOp&&null!=Ud.curOp.scrollLeft?Ud.curOp.scrollLeft:Vd.scroller.scrollLeft,ta=ui(Ud)-(Ud.options.fixedGutter?Vd.gutters.offsetWidth:0),ia=jd.right-jd.left>ta;return ia&&(jd.right=jd.left+ta),10>jd.left?_d.scrollLeft=0:jd.left<ea?_d.scrollLeft=Math.max(0,jd.left-(ia?0:10)):jd.right>ta+ea-3&&(_d.scrollLeft=jd.right+(ia?0:10)-ta),_d}function bn(Ud,jd){null==jd||(Ln(Ud),Ud.curOp.scrollTop=(null==Ud.curOp.scrollTop?Ud.doc.scrollTop:Ud.curOp.scrollTop)+jd)}function Cn(Ud){Ln(Ud);var jd=Ud.getCursor();Ud.curOp.scrollToPos={from:jd,to:jd,margin:Ud.options.cursorScrollMargin}}function wn(Ud,jd,Vd){(null!=jd||null!=Vd)&&Ln(Ud),null!=jd&&(Ud.curOp.scrollLeft=jd),null!=Vd&&(Ud.curOp.scrollTop=Vd)}function Sn(Ud,jd){Ln(Ud),Ud.curOp.scrollToPos=jd}function Ln(Ud){var jd=Ud.curOp.scrollToPos;if(jd){Ud.curOp.scrollToPos=null;var Vd=Ii(Ud,jd.from),Kd=Ii(Ud,jd.to);kn(Ud,Vd,Kd,jd.margin)}}function kn(Ud,jd,Vd,Kd){var Xd=vn(Ud,{left:Math.min(jd.left,Vd.left),top:Math.min(jd.top,Vd.top)-Kd,right:Math.max(jd.right,Vd.right),bottom:Math.max(jd.bottom,Vd.bottom)+Kd});wn(Ud,Xd.scrollLeft,Xd.scrollTop)}function Tn(Ud,jd){2>Math.abs(Ud.doc.scrollTop-jd)||(!Yl&&rr(Ud,{top:jd}),Nn(Ud,jd,!0),Yl&&rr(Ud),Zn(Ud,100))}function Nn(Ud,jd,Vd){jd=Math.min(Ud.display.scroller.scrollHeight-Ud.display.scroller.clientHeight,jd),(Ud.display.scroller.scrollTop!=jd||Vd)&&(Ud.doc.scrollTop=jd,Ud.display.scrollbars.setScrollTop(jd),Ud.display.scroller.scrollTop!=jd&&(Ud.display.scroller.scrollTop=jd))}function On(Ud,jd,Vd,Kd){jd=Math.min(jd,Ud.display.scroller.scrollWidth-Ud.display.scroller.clientWidth),(Vd?jd==Ud.doc.scrollLeft:2>Math.abs(Ud.doc.scrollLeft-jd))&&!Kd||(Ud.doc.scrollLeft=jd,gn(Ud),Ud.display.scroller.scrollLeft!=jd&&(Ud.display.scroller.scrollLeft=jd),Ud.display.scrollbars.setScrollLeft(jd))}function An(Ud){var jd=Ud.display,Vd=jd.gutters.offsetWidth,Kd=Math.round(Ud.doc.height+pi(Ud.display));return{clientHeight:jd.scroller.clientHeight,viewHeight:jd.wrapper.clientHeight,scrollWidth:jd.scroller.scrollWidth,clientWidth:jd.scroller.clientWidth,viewWidth:jd.wrapper.clientWidth,barLeft:Ud.options.fixedGutter?Vd:0,docHeight:Kd,scrollHeight:Kd+hi(Ud)+jd.barHeight,nativeBarWidth:jd.nativeBarWidth,gutterWidth:Vd}}function Mn(Ud,jd){jd||(jd=An(Ud));var Vd=Ud.display.barWidth,Kd=Ud.display.barHeight;Wn(Ud,jd);for(var Xd=0;4>Xd&&Vd!=Ud.display.barWidth||Kd!=Ud.display.barHeight;Xd++)Vd!=Ud.display.barWidth&&Ud.options.lineWrapping&&cn(Ud),Wn(Ud,An(Ud)),Vd=Ud.display.barWidth,Kd=Ud.display.barHeight}function Wn(Ud,jd){var Vd=Ud.display,Kd=Vd.scrollbars.update(jd);Vd.sizer.style.paddingRight=(Vd.barWidth=Kd.right)+'px',Vd.sizer.style.paddingBottom=(Vd.barHeight=Kd.bottom)+'px',Vd.heightForcer.style.borderBottom=Kd.bottom+'px solid transparent',Kd.right&&Kd.bottom?(Vd.scrollbarFiller.style.display='block',Vd.scrollbarFiller.style.height=Kd.bottom+'px',Vd.scrollbarFiller.style.width=Kd.right+'px'):Vd.scrollbarFiller.style.display='',Kd.bottom&&Ud.options.coverGutterNextToScrollbar&&Ud.options.fixedGutter?(Vd.gutterFiller.style.display='block',Vd.gutterFiller.style.height=Kd.bottom+'px',Vd.gutterFiller.style.width=jd.gutterWidth+'px'):Vd.gutterFiller.style.display=''}function Dn(Ud){Ud.display.scrollbars&&(Ud.display.scrollbars.clear(),Ud.display.scrollbars.addClass&&xs(Ud.display.wrapper,Ud.display.scrollbars.addClass)),Ud.display.scrollbars=new sd[Ud.options.scrollbarStyle](function(jd){Ud.display.wrapper.insertBefore(jd,Ud.display.scrollbarFiller),Is(jd,'mousedown',function(){Ud.state.focused&&setTimeout(function(){return Ud.display.input.focus()},0)}),jd.setAttribute('cm-not-content','true')},function(jd,Vd){'horizontal'==Vd?On(Ud,jd):Tn(Ud,jd)},Ud),Ud.display.scrollbars.addClass&&L(Ud.display.wrapper,Ud.display.scrollbars.addClass)}function Hn(Ud){Ud.curOp={cm:Ud,viewChanged:!1,startHeight:Ud.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++dd},jt(Ud.curOp)}function Fn(Ud){var jd=Ud.curOp;Kt(jd,function(Vd){for(var Kd=0;Kd<Vd.ops.length;Kd++)Vd.ops[Kd].cm.curOp=null;Pn(Vd)})}function Pn(Ud){for(var jd=Ud.ops,Vd=0;Vd<jd.length;Vd++)In(jd[Vd]);for(var Kd=0;Kd<jd.length;Kd++)zn(jd[Kd]);for(var Xd=0;Xd<jd.length;Xd++)En(jd[Xd]);for(var Yd=0;Yd<jd.length;Yd++)Rn(jd[Yd]);for(var _d=0;_d<jd.length;_d++)Bn(jd[_d])}function In(Ud){var jd=Ud.cm,Vd=jd.display;Jn(jd),Ud.updateMaxLine&&Ue(jd),Ud.mustUpdate=Ud.viewChanged||Ud.forceUpdate||null!=Ud.scrollTop||Ud.scrollToPos&&(Ud.scrollToPos.from.line<Vd.viewFrom||Ud.scrollToPos.to.line>=Vd.viewTo)||Vd.maxLineChanged&&jd.options.lineWrapping,Ud.update=Ud.mustUpdate&&new ad(jd,Ud.mustUpdate&&{top:Ud.scrollTop,ensure:Ud.scrollToPos},Ud.forceUpdate)}function zn(Ud){Ud.updatedDisplay=Ud.mustUpdate&&ir(Ud.cm,Ud.update)}function En(Ud){var jd=Ud.cm,Vd=jd.display;Ud.updatedDisplay&&cn(jd),Ud.barMeasure=An(jd),Vd.maxLineChanged&&!jd.options.lineWrapping&&(Ud.adjustWidthTo=xi(jd,Vd.maxLine,Vd.maxLine.text.length).left+3,jd.display.sizerWidth=Ud.adjustWidthTo,Ud.barMeasure.scrollWidth=Math.max(Vd.scroller.clientWidth,Vd.sizer.offsetLeft+Ud.adjustWidthTo+hi(jd)+jd.display.barWidth),Ud.maxScrollLeft=Math.max(0,Vd.sizer.offsetLeft+Ud.adjustWidthTo-ui(jd))),(Ud.updatedDisplay||Ud.selectionChanged)&&(Ud.preparedSelection=Vd.input.prepareSelection())}function Rn(Ud){var jd=Ud.cm;null!=Ud.adjustWidthTo&&(jd.display.sizer.style.minWidth=Ud.adjustWidthTo+'px',Ud.maxScrollLeft<jd.doc.scrollLeft&&On(jd,Math.min(jd.display.scroller.scrollLeft,Ud.maxScrollLeft),!0),jd.display.maxLineChanged=!1);var Vd=Ud.focus&&Ud.focus==S();Ud.preparedSelection&&jd.display.input.showSelection(Ud.preparedSelection,Vd),(Ud.updatedDisplay||Ud.startHeight!=jd.doc.height)&&Mn(jd,Ud.barMeasure),Ud.updatedDisplay&&sr(jd,Ud.barMeasure),Ud.selectionChanged&&ln(jd),jd.state.focused&&Ud.updateInput&&jd.display.input.reset(Ud.typing),Vd&&sn(Ud.cm)}function Bn(Ud){var jd=Ud.cm,Vd=jd.display,Kd=jd.doc;if(Ud.updatedDisplay&&nr(jd,Ud.update),null!=Vd.wheelStartX&&(null!=Ud.scrollTop||null!=Ud.scrollLeft||Ud.scrollToPos)&&(Vd.wheelStartX=Vd.wheelStartY=null),null!=Ud.scrollTop&&Nn(jd,Ud.scrollTop,Ud.forceScroll),null!=Ud.scrollLeft&&On(jd,Ud.scrollLeft,!0,!0),Ud.scrollToPos){var Xd=yn(jd,ae(Kd,Ud.scrollToPos.from),ae(Kd,Ud.scrollToPos.to),Ud.scrollToPos.margin);mn(jd,Xd)}var Yd=Ud.maybeHiddenMarkers,_d=Ud.maybeUnhiddenMarkers;if(Yd)for(var qd=0;qd<Yd.length;++qd)Yd[qd].lines.length||qe(Yd[qd],'hide');if(_d)for(var Zd=0;Zd<_d.length;++Zd)_d[Zd].lines.length&&qe(_d[Zd],'unhide');Vd.wrapper.offsetHeight&&(Kd.scrollTop=jd.display.scroller.scrollTop),Ud.changeObjs&&qe(jd,'changes',jd,Ud.changeObjs),Ud.update&&Ud.update.finish()}function Gn(Ud,jd){if(Ud.curOp)return jd();Hn(Ud);try{return jd()}finally{Fn(Ud)}}function $n(Ud,jd){return function(){if(Ud.curOp)return jd.apply(Ud,arguments);Hn(Ud);try{return jd.apply(Ud,arguments)}finally{Fn(Ud)}}}function Un(Ud){return function(){if(this.curOp)return Ud.apply(this,arguments);Hn(this);try{return Ud.apply(this,arguments)}finally{Fn(this)}}}function jn(Ud){return function(){var jd=this.cm;if(!jd||jd.curOp)return Ud.apply(this,arguments);Hn(jd);try{return Ud.apply(this,arguments)}finally{Fn(jd)}}}function Vn(Ud,jd,Vd,Kd){null==jd&&(jd=Ud.doc.first),null==Vd&&(Vd=Ud.doc.first+Ud.doc.size),Kd||(Kd=0);var Xd=Ud.display;if(Kd&&Vd<Xd.viewTo&&(null==Xd.updateLineNumbers||Xd.updateLineNumbers>jd)&&(Xd.updateLineNumbers=jd),Ud.curOp.viewChanged=!0,jd>=Xd.viewTo)Ds&&ze(Ud.doc,jd)<Xd.viewTo&&Xn(Ud);else if(Vd<=Xd.viewFrom)Ds&&Ee(Ud.doc,Vd+Kd)>Xd.viewFrom?Xn(Ud):(Xd.viewFrom+=Kd,Xd.viewTo+=Kd);else if(jd<=Xd.viewFrom&&Vd>=Xd.viewTo)Xn(Ud);else if(jd<=Xd.viewFrom){var Yd=Yn(Ud,Vd,Vd+Kd,1);Yd?(Xd.view=Xd.view.slice(Yd.index),Xd.viewFrom=Yd.lineN,Xd.viewTo+=Kd):Xn(Ud)}else if(Vd>=Xd.viewTo){var _d=Yn(Ud,jd,jd,-1);_d?(Xd.view=Xd.view.slice(0,_d.index),Xd.viewTo=_d.lineN):Xn(Ud)}else{var qd=Yn(Ud,jd,jd,-1),Zd=Yn(Ud,Vd,Vd+Kd,1);qd&&Zd?(Xd.view=Xd.view.slice(0,qd.index).concat(Ut(Ud,qd.lineN,Zd.lineN)).concat(Xd.view.slice(Zd.index)),Xd.viewTo+=Kd):Xn(Ud)}var Qd=Xd.externalMeasured;Qd&&(Vd<Qd.lineN?Qd.lineN+=Kd:jd<Qd.lineN+Qd.size&&(Xd.externalMeasured=null))}function Kn(Ud,jd,Vd){Ud.curOp.viewChanged=!0;var Kd=Ud.display,Xd=Ud.display.externalMeasured;if(Xd&&jd>=Xd.lineN&&jd<Xd.lineN+Xd.size&&(Kd.externalMeasured=null),!(jd<Kd.viewFrom||jd>=Kd.viewTo)){var Yd=Kd.view[Qi(Ud,jd)];if(null!=Yd.node){var _d=Yd.changes||(Yd.changes=[]);-1==M(_d,Vd)&&_d.push(Vd)}}}function Xn(Ud){Ud.display.viewFrom=Ud.display.viewTo=Ud.doc.first,Ud.display.view=[],Ud.display.viewOffset=0}function Yn(Ud,jd,Vd,Kd){var Xd=Qi(Ud,jd),_d=Ud.display.view,Yd;if(!Ds||Vd==Ud.doc.first+Ud.doc.size)return{index:Xd,lineN:Vd};for(var qd=Ud.display.viewFrom,Zd=0;Zd<Xd;Zd++)qd+=_d[Zd].size;if(qd!=jd){if(0<Kd){if(Xd==_d.length-1)return null;Yd=qd+_d[Xd].size-jd,Xd++}else Yd=qd-jd;jd+=Yd,Vd+=Yd}for(;ze(Ud.doc,Vd)!=Vd;){if(Xd==(0>Kd?0:_d.length-1))return null;Vd+=Kd*_d[Xd-(0>Kd?1:0)].size,Xd+=Kd}return{index:Xd,lineN:Vd}}function _n(Ud,jd,Vd){var Kd=Ud.display,Xd=Kd.view;0==Xd.length||jd>=Kd.viewTo||Vd<=Kd.viewFrom?(Kd.view=Ut(Ud,jd,Vd),Kd.viewFrom=jd):(Kd.viewFrom>jd?Kd.view=Ut(Ud,jd,Kd.viewFrom).concat(Kd.view):Kd.viewFrom<jd&&(Kd.view=Kd.view.slice(Qi(Ud,jd))),Kd.viewFrom=jd,Kd.viewTo<Vd?Kd.view=Kd.view.concat(Ut(Ud,Kd.viewTo,Vd)):Kd.viewTo>Vd&&(Kd.view=Kd.view.slice(0,Qi(Ud,Vd)))),Kd.viewTo=Vd}function qn(Ud){for(var jd=Ud.display.view,Vd=0,Kd=0,Xd;Kd<jd.length;Kd++)Xd=jd[Kd],Xd.hidden||Xd.node&&!Xd.changes||++Vd;return Vd}function Zn(Ud,jd){Ud.doc.highlightFrontier<Ud.display.viewTo&&Ud.state.highlight.set(jd,N(Qn,Ud))}function Qn(Ud){var jd=Ud.doc;if(!(jd.highlightFrontier>=Ud.display.viewTo)){var Vd=+new Date+Ud.options.workTime,Kd=St(Ud,jd.highlightFrontier),Xd=[];jd.iter(Kd.line,Math.min(jd.first+jd.size,Ud.display.viewTo+500),function(Yd){if(Kd.line>=Ud.display.viewFrom){var _d=Yd.styles,qd=Yd.text.length>Ud.options.maxHighlightLength?xt(jd.mode,Kd.state):null,Zd=Ct(Ud,Yd,Kd,!0);qd&&(Kd.state=qd),Yd.styles=Zd.styles;var Qd=Yd.styleClasses,Jd=Zd.classes;Jd?Yd.styleClasses=Jd:Qd&&(Yd.styleClasses=null);for(var ea=!_d||_d.length!=Yd.styles.length||Qd!=Jd&&(!Qd||!Jd||Qd.bgClass!=Jd.bgClass||Qd.textClass!=Jd.textClass),ta=0;!ea&&ta<_d.length;++ta)ea=_d[ta]!=Yd.styles[ta];ea&&Xd.push(Kd.line),Yd.stateAfter=Kd.save(),Kd.nextLine()}else Yd.text.length<=Ud.options.maxHighlightLength&&Lt(Ud,Yd.text,Kd),Yd.stateAfter=0==Kd.line%5?Kd.save():null,Kd.nextLine();return+new Date>Vd?(Zn(Ud,Ud.options.workDelay),!0):void 0}),jd.highlightFrontier=Kd.line,jd.modeFrontier=Math.max(jd.modeFrontier,Kd.line),Xd.length&&Gn(Ud,function(){for(var Yd=0;Yd<Xd.length;Yd++)Kn(Ud,Xd[Yd],'text')})}}function Jn(Ud){var jd=Ud.display;!jd.scrollbarsClipped&&jd.scroller.offsetWidth&&(jd.nativeBarWidth=jd.scroller.offsetWidth-jd.scroller.clientWidth,jd.heightForcer.style.height=hi(Ud)+'px',jd.sizer.style.marginBottom=-jd.nativeBarWidth+'px',jd.sizer.style.borderRightWidth=hi(Ud)+'px',jd.scrollbarsClipped=!0)}function er(Ud){if(Ud.hasFocus())return null;var jd=S();if(!jd||!C(Ud.display.lineDiv,jd))return null;var Vd={activeElt:jd};if(window.getSelection){var Kd=window.getSelection();Kd.anchorNode&&Kd.extend&&C(Ud.display.lineDiv,Kd.anchorNode)&&(Vd.anchorNode=Kd.anchorNode,Vd.anchorOffset=Kd.anchorOffset,Vd.focusNode=Kd.focusNode,Vd.focusOffset=Kd.focusOffset)}return Vd}function tr(Ud){if(Ud&&Ud.activeElt&&Ud.activeElt!=S()&&(Ud.activeElt.focus(),Ud.anchorNode&&C(document.body,Ud.anchorNode)&&C(document.body,Ud.focusNode))){var jd=window.getSelection(),Vd=document.createRange();Vd.setEnd(Ud.anchorNode,Ud.anchorOffset),Vd.collapse(!1),jd.removeAllRanges(),jd.addRange(Vd),jd.extend(Ud.focusNode,Ud.focusOffset)}}function ir(Ud,jd){var Vd=Ud.display,Kd=Ud.doc;if(jd.editorIsHidden)return Xn(Ud),!1;if(!jd.force&&jd.visible.from>=Vd.viewFrom&&jd.visible.to<=Vd.viewTo&&(null==Vd.updateLineNumbers||Vd.updateLineNumbers>=Vd.viewTo)&&Vd.renderedView==Vd.view&&0==qn(Ud))return!1;fn(Ud)&&(Xn(Ud),jd.dims=Xi(Ud));var Xd=Kd.first+Kd.size,Yd=Math.max(jd.visible.from-Ud.options.viewportMargin,Kd.first),_d=Math.min(Xd,jd.visible.to+Ud.options.viewportMargin);Vd.viewFrom<Yd&&20>Yd-Vd.viewFrom&&(Yd=Math.max(Kd.first,Vd.viewFrom)),Vd.viewTo>_d&&20>Vd.viewTo-_d&&(_d=Math.min(Xd,Vd.viewTo)),Ds&&(Yd=ze(Ud.doc,Yd),_d=Ee(Ud.doc,_d));var qd=Yd!=Vd.viewFrom||_d!=Vd.viewTo||Vd.lastWrapHeight!=jd.wrapperHeight||Vd.lastWrapWidth!=jd.wrapperWidth;_n(Ud,Yd,_d),Vd.viewOffset=Ge(K(Ud.doc,Vd.viewFrom)),Ud.display.mover.style.top=Vd.viewOffset+'px';var Zd=qn(Ud);if(!qd&&0==Zd&&!jd.force&&Vd.renderedView==Vd.view&&(null==Vd.updateLineNumbers||Vd.updateLineNumbers>=Vd.viewTo))return!1;var Qd=er(Ud);return 4<Zd&&(Vd.lineDiv.style.display='none'),or(Ud,Vd.updateLineNumbers,jd.dims),4<Zd&&(Vd.lineDiv.style.display=''),Vd.renderedView=Vd.view,tr(Qd),s(Vd.cursorDiv),s(Vd.selectionDiv),Vd.gutters.style.height=Vd.sizer.style.minHeight=0,qd&&(Vd.lastWrapHeight=jd.wrapperHeight,Vd.lastWrapWidth=jd.wrapperWidth,Zn(Ud,400)),Vd.updateLineNumbers=null,!0}function nr(Ud,jd){for(var Vd=jd.viewport,Kd=!0;;Kd=!1){if((!Kd||!Ud.options.lineWrapping||jd.oldDisplayWidth==ui(Ud))&&(Vd&&null!=Vd.top&&(Vd={top:Math.min(Ud.doc.height+pi(Ud.display)-gi(Ud),Vd.top)}),jd.visible=un(Ud.display,Ud.doc,Vd),jd.visible.from>=Ud.display.viewFrom&&jd.visible.to<=Ud.display.viewTo))break;if(!ir(Ud,jd))break;cn(Ud);var Xd=An(Ud);Ji(Ud),Mn(Ud,Xd),sr(Ud,Xd),jd.force=!1}jd.signal(Ud,'update',Ud),(Ud.display.viewFrom!=Ud.display.reportedViewFrom||Ud.display.viewTo!=Ud.display.reportedViewTo)&&(jd.signal(Ud,'viewportChange',Ud,Ud.display.viewFrom,Ud.display.viewTo),Ud.display.reportedViewFrom=Ud.display.viewFrom,Ud.display.reportedViewTo=Ud.display.viewTo)}function rr(Ud,jd){var Vd=new ad(Ud,jd);if(ir(Ud,Vd)){cn(Ud),nr(Ud,Vd);var Kd=An(Ud);Ji(Ud),Mn(Ud,Kd),sr(Ud,Kd),Vd.finish()}}function or(Ud,jd,Vd){function Kd(na){var ra=na.nextSibling;return es&&cs&&Ud.display.currentWheelTarget==na?na.style.display='none':na.parentNode.removeChild(na),ra}for(var Xd=Ud.display,Yd=Ud.options.lineNumbers,_d=Xd.lineDiv,qd=_d.firstChild,Zd=Xd.view,Qd=Xd.viewFrom,Jd=0,ea;Jd<Zd.length;Jd++){if(ea=Zd[Jd],ea.hidden);else if(!ea.node||ea.node.parentNode!=_d){var ta=ni(Ud,ea,Qd,Vd);_d.insertBefore(ta,qd)}else{for(;qd!=ea.node;)qd=Kd(qd);var ia=Yd&&null!=jd&&jd<=Qd&&ea.lineNumber;ea.changes&&(-1<M(ea.changes,'gutter')&&(ia=!1),_t(Ud,ea,Qd,Vd)),ia&&(s(ea.lineNumber),ea.lineNumber.appendChild(document.createTextNode(J(Ud.options,Qd)))),qd=ea.node.nextSibling}Qd+=ea.size}for(;qd;)qd=Kd(qd)}function lr(Ud){var jd=Ud.display.gutters.offsetWidth;Ud.display.sizer.style.marginLeft=jd+'px'}function sr(Ud,jd){Ud.display.sizer.style.minHeight=jd.docHeight+'px',Ud.display.heightForcer.style.top=jd.docHeight+'px',Ud.display.gutters.style.height=jd.docHeight+Ud.display.barHeight+hi(Ud)+'px'}function dr(Ud){var jd=Ud.display.gutters,Vd=Ud.options.gutters;s(jd);for(var Kd=0;Kd<Vd.length;++Kd){var Xd=Vd[Kd],Yd=jd.appendChild(u('div',null,'CodeMirror-gutter '+Xd));'CodeMirror-linenumbers'==Xd&&(Ud.display.lineGutter=Yd,Yd.style.width=(Ud.display.lineNumWidth||1)+'px')}jd.style.display=Kd?'':'none',lr(Ud)}function ar(Ud){var jd=M(Ud.gutters,'CodeMirror-linenumbers');-1==jd&&Ud.lineNumbers?Ud.gutters=Ud.gutters.concat(['CodeMirror-linenumbers']):-1<jd&&!Ud.lineNumbers&&(Ud.gutters=Ud.gutters.slice(0),Ud.gutters.splice(jd,1))}function pr(Ud){var jd=Ud.wheelDeltaX,Vd=Ud.wheelDeltaY;return null==jd&&Ud.detail&&Ud.axis==Ud.HORIZONTAL_AXIS&&(jd=Ud.detail),null==Vd&&Ud.detail&&Ud.axis==Ud.VERTICAL_AXIS?Vd=Ud.detail:null==Vd&&(Vd=Ud.wheelDelta),{x:jd,y:Vd}}function cr(Ud){var jd=pr(Ud);return jd.x*=cd,jd.y*=cd,jd}function hr(Ud,jd){var Vd=pr(jd),Kd=Vd.x,Xd=Vd.y,Yd=Ud.display,_d=Yd.scroller,qd=_d.scrollWidth>_d.clientWidth,Zd=_d.scrollHeight>_d.clientHeight;if(Kd&&qd||Xd&&Zd){if(Xd&&cs&&es)outer:for(var Qd=jd.target,Jd=Yd.view;Qd!=_d;Qd=Qd.parentNode)for(var ea=0;ea<Jd.length;ea++)if(Jd[ea].node==Qd){Ud.display.currentWheelTarget=Qd;break outer}if(Kd&&!Yl&&!ns&&null!=cd)return Xd&&Zd&&Tn(Ud,Math.max(0,_d.scrollTop+Xd*cd)),On(Ud,Math.max(0,_d.scrollLeft+Kd*cd)),(!Xd||Xd&&Zd)&&tt(jd),void(Yd.wheelStartX=null);if(Xd&&null!=cd){var ta=Xd*cd,ia=Ud.doc.scrollTop,na=ia+Yd.wrapper.clientHeight;0>ta?ia=Math.max(0,ia+ta-50):na=Math.min(Ud.doc.height,na+ta+50),rr(Ud,{top:ia,bottom:na})}20>pd&&(null==Yd.wheelStartX?(Yd.wheelStartX=_d.scrollLeft,Yd.wheelStartY=_d.scrollTop,Yd.wheelDX=Kd,Yd.wheelDY=Xd,setTimeout(function(){if(null!=Yd.wheelStartX){var ra=_d.scrollLeft-Yd.wheelStartX,oa=_d.scrollTop-Yd.wheelStartY,la=oa&&Yd.wheelDY&&oa/Yd.wheelDY||ra&&Yd.wheelDX&&ra/Yd.wheelDX;Yd.wheelStartX=Yd.wheelStartY=null,la&&(cd=(cd*pd+la)/(pd+1),++pd)}},200)):(Yd.wheelDX+=Kd,Yd.wheelDY+=Xd))}}function ur(Ud,jd){var Vd=Ud[jd];Ud.sort(function(Qd,Jd){return ne(Qd.from(),Jd.from())}),jd=M(Ud,Vd);for(var Kd=1;Kd<Ud.length;Kd++){var Xd=Ud[Kd],Yd=Ud[Kd-1];if(0<=ne(Yd.to(),Xd.from())){var _d=se(Yd.from(),Xd.from()),qd=le(Yd.to(),Xd.to()),Zd=Yd.empty()?Xd.from()==Xd.head:Yd.from()==Yd.head;Kd<=jd&&--jd,Ud.splice(--Kd,2,new ud(Zd?qd:_d,Zd?_d:qd))}}return new hd(Ud,jd)}function gr(Ud,jd){return new hd([new ud(Ud,jd||Ud)],0)}function fr(Ud){return Ud.text?ee(Ud.from.line+Ud.text.length-1,H(Ud.text).length+(1==Ud.text.length?Ud.from.ch:0)):Ud.to}function mr(Ud,jd){if(0>ne(Ud,jd.from))return Ud;if(0>=ne(Ud,jd.to))return fr(jd);var Vd=Ud.line+jd.text.length-(jd.to.line-jd.from.line)-1,Kd=Ud.ch;return Ud.line==jd.to.line&&(Kd+=fr(jd).ch-jd.to.ch),ee(Vd,Kd)}function yr(Ud,jd){for(var Vd=[],Kd=0,Xd;Kd<Ud.sel.ranges.length;Kd++)Xd=Ud.sel.ranges[Kd],Vd.push(new ud(mr(Xd.anchor,jd),mr(Xd.head,jd)));return ur(Vd,Ud.sel.primIndex)}function xr(Ud,jd,Vd){return Ud.line==jd.line?ee(Vd.line,Ud.ch-jd.ch+Vd.ch):ee(Vd.line+(Ud.line-jd.line),Ud.ch)}function vr(Ud,jd,Vd){for(var Kd=[],Xd=ee(Ud.first,0),Yd=Xd,_d=0;_d<jd.length;_d++){var qd=jd[_d],Zd=xr(qd.from,Xd,Yd),Qd=xr(fr(qd),Xd,Yd);if(Xd=qd.to,Yd=Qd,'around'==Vd){var Jd=Ud.sel.ranges[_d],ea=0>ne(Jd.head,Jd.anchor);Kd[_d]=new ud(ea?Qd:Zd,ea?Zd:Qd)}else Kd[_d]=new ud(Zd,Zd)}return new hd(Kd,Ud.sel.primIndex)}function br(Ud){Ud.doc.mode=mt(Ud.options,Ud.doc.modeOption),Cr(Ud)}function Cr(Ud){Ud.doc.iter(function(jd){jd.stateAfter&&(jd.stateAfter=null),jd.styles&&(jd.styles=null)}),Ud.doc.modeFrontier=Ud.doc.highlightFrontier=Ud.doc.first,Zn(Ud,100),Ud.state.modeGen++,Ud.curOp&&Vn(Ud)}function wr(Ud,jd){return 0==jd.from.ch&&0==jd.to.ch&&''==H(jd.text)&&(!Ud.cm||Ud.cm.options.wholeLineUpdateBefore)}function Sr(Ud,jd,Vd,Kd){function Xd(sa){return Vd?Vd[sa]:null}function Yd(sa,da,aa){Dt(sa,da,aa,Kd),Xt(sa,'change',sa,jd)}function _d(sa,da){for(var aa=[],pa=sa;pa<da;++pa)aa.push(new Zs(Qd[pa],Xd(pa),Kd));return aa}var qd=jd.from,Zd=jd.to,Qd=jd.text,Jd=K(Ud,qd.line),ea=K(Ud,Zd.line),ta=H(Qd),ia=Xd(Qd.length-1),na=Zd.line-qd.line;if(jd.full)Ud.insert(0,_d(0,Qd.length)),Ud.remove(Qd.length,Ud.size-Qd.length);else if(wr(Ud,jd)){var ra=_d(0,Qd.length-1);Yd(ea,ea.text,ia),na&&Ud.remove(qd.line,na),ra.length&&Ud.insert(qd.line,ra)}else if(Jd==ea){if(1==Qd.length)Yd(Jd,Jd.text.slice(0,qd.ch)+ta+Jd.text.slice(Zd.ch),ia);else{var oa=_d(1,Qd.length-1);oa.push(new Zs(ta+Jd.text.slice(Zd.ch),ia,Kd)),Yd(Jd,Jd.text.slice(0,qd.ch)+Qd[0],Xd(0)),Ud.insert(qd.line+1,oa)}}else if(1==Qd.length)Yd(Jd,Jd.text.slice(0,qd.ch)+Qd[0]+ea.text.slice(Zd.ch),Xd(0)),Ud.remove(qd.line+1,na);else{Yd(Jd,Jd.text.slice(0,qd.ch)+Qd[0],Xd(0)),Yd(ea,ta+ea.text.slice(Zd.ch),ia);var la=_d(1,Qd.length-1);1<na&&Ud.remove(qd.line+1,na-1),Ud.insert(qd.line+1,la)}Xt(Ud,'change',Ud,jd)}function Lr(Ud,jd,Vd){function Kd(Xd,Yd,_d){if(Xd.linked)for(var qd=0,Zd;qd<Xd.linked.length;++qd)if(Zd=Xd.linked[qd],Zd.doc!=Yd){var Qd=_d&&Zd.sharedHist;(!Vd||Qd)&&(jd(Zd.doc,Qd),Kd(Zd.doc,Xd,Qd))}}Kd(Ud,null,!0)}function kr(Ud,jd){if(jd.cm)throw new Error('This document is already in use.');Ud.doc=jd,jd.cm=Ud,qi(Ud),br(Ud),Tr(Ud),Ud.options.lineWrapping||Ue(Ud),Ud.options.mode=jd.modeOption,Vn(Ud)}function Tr(Ud){('rtl'==Ud.doc.direction?L:xs)(Ud.display.lineDiv,'CodeMirror-rtl')}function Nr(Ud){Gn(Ud,function(){Tr(Ud),Vn(Ud)})}function Or(Ud){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=Ud||1}function Ar(Ud,jd){var Vd={from:oe(jd.from),to:fr(jd),text:X(Ud,jd.from,jd.to)};return Ir(Ud,Vd,jd.from.line,jd.to.line+1),Lr(Ud,function(Kd){return Ir(Kd,Vd,jd.from.line,jd.to.line+1)},!0),Vd}function Mr(Ud){for(;Ud.length;){var jd=H(Ud);if(jd.ranges)Ud.pop();else break}}function Wr(Ud,jd){return jd?(Mr(Ud.done),H(Ud.done)):Ud.done.length&&!H(Ud.done).ranges?H(Ud.done):1<Ud.done.length&&!Ud.done[Ud.done.length-2].ranges?(Ud.done.pop(),H(Ud.done)):void 0}function Dr(Ud,jd,Vd,Kd){var Xd=Ud.history;Xd.undone.length=0;var Yd=+new Date,_d,qd;if((Xd.lastOp==Kd||Xd.lastOrigin==jd.origin&&jd.origin&&('+'==jd.origin.charAt(0)&&Xd.lastModTime>Yd-(Ud.cm?Ud.cm.options.historyEventDelay:500)||'*'==jd.origin.charAt(0)))&&(_d=Wr(Xd,Xd.lastOp==Kd)))qd=H(_d.changes),0==ne(jd.from,jd.to)&&0==ne(jd.from,qd.to)?qd.to=fr(jd):_d.changes.push(Ar(Ud,jd));else{var Zd=H(Xd.done);for(Zd&&Zd.ranges||Pr(Ud.sel,Xd.done),_d={changes:[Ar(Ud,jd)],generation:Xd.generation},Xd.done.push(_d);Xd.done.length>Xd.undoDepth;)Xd.done.shift(),Xd.done[0].ranges||Xd.done.shift()}Xd.done.push(Vd),Xd.generation=++Xd.maxGeneration,Xd.lastModTime=Xd.lastSelTime=Yd,Xd.lastOp=Xd.lastSelOp=Kd,Xd.lastOrigin=Xd.lastSelOrigin=jd.origin,qd||qe(Ud,'historyAdded')}function Hr(Ud,jd,Vd,Kd){var Xd=jd.charAt(0);return'*'==Xd||'+'==Xd&&Vd.ranges.length==Kd.ranges.length&&Vd.somethingSelected()==Kd.somethingSelected()&&new Date-Ud.history.lastSelTime<=(Ud.cm?Ud.cm.options.historyEventDelay:500)}function Fr(Ud,jd,Vd,Kd){var Xd=Ud.history,Yd=Kd&&Kd.origin;Vd==Xd.lastSelOp||Yd&&Xd.lastSelOrigin==Yd&&(Xd.lastModTime==Xd.lastSelTime&&Xd.lastOrigin==Yd||Hr(Ud,Yd,H(Xd.done),jd))?Xd.done[Xd.done.length-1]=jd:Pr(jd,Xd.done),Xd.lastSelTime=+new Date,Xd.lastSelOrigin=Yd,Xd.lastSelOp=Vd,Kd&&!1!==Kd.clearRedo&&Mr(Xd.undone)}function Pr(Ud,jd){var Vd=H(jd);Vd&&Vd.ranges&&Vd.equals(Ud)||jd.push(Ud)}function Ir(Ud,jd,Vd,Kd){var Xd=jd['spans_'+Ud.id],Yd=0;Ud.iter(Math.max(Ud.first,Vd),Math.min(Ud.first+Ud.size,Kd),function(_d){_d.markedSpans&&((Xd||(Xd=jd['spans_'+Ud.id]={}))[Yd]=_d.markedSpans),++Yd})}function zr(Ud){if(!Ud)return null;for(var Vd=0,jd;Vd<Ud.length;++Vd)Ud[Vd].marker.explicitlyCleared?jd||(jd=Ud.slice(0,Vd)):jd&&jd.push(Ud[Vd]);return jd?jd.length?jd:null:Ud}function Er(Ud,jd){var Vd=jd['spans_'+Ud.id];if(!Vd)return null;for(var Kd=[],Xd=0;Xd<jd.text.length;++Xd)Kd.push(zr(Vd[Xd]));return Kd}function Rr(Ud,jd){var Vd=Er(Ud,jd),Kd=Ce(Ud,jd);if(!Vd)return Kd;if(!Kd)return Vd;for(var Xd=0;Xd<Vd.length;++Xd){var Yd=Vd[Xd],_d=Kd[Xd];if(Yd&&_d)spans:for(var qd=0,Zd;qd<_d.length;++qd){Zd=_d[qd];for(var Qd=0;Qd<Yd.length;++Qd)if(Yd[Qd].marker==Zd.marker)continue spans;Yd.push(Zd)}else _d&&(Vd[Xd]=_d)}return Vd}function Br(Ud,jd,Vd){for(var Kd=[],Xd=0,Yd;Xd<Ud.length;++Xd){if(Yd=Ud[Xd],Yd.ranges){Kd.push(Vd?hd.prototype.deepCopy.call(Yd):Yd);continue}var _d=Yd.changes,qd=[];Kd.push({changes:qd});for(var Zd=0;Zd<_d.length;++Zd){var Qd=_d[Zd],Jd=void 0;if(qd.push({from:Qd.from,to:Qd.to,text:Qd.text}),jd)for(var ea in Qd)(Jd=ea.match(/^spans_(\d+)$/))&&-1<M(jd,+Jd[1])&&(H(qd)[ea]=Qd[ea],delete Qd[ea])}}return Kd}function Gr(Ud,jd,Vd,Kd){if(Kd){var Xd=Ud.anchor;if(Vd){var Yd=0>ne(jd,Xd);Yd==0>ne(Vd,Xd)?Yd!=0>ne(jd,Vd)&&(jd=Vd):(Xd=jd,jd=Vd)}return new ud(Xd,jd)}return new ud(Vd||jd,jd)}function $r(Ud,jd,Vd,Kd,Xd){null==Xd&&(Xd=Ud.cm&&(Ud.cm.display.shift||Ud.extend)),Yr(Ud,new hd([Gr(Ud.sel.primary(),jd,Vd,Xd)],0),Kd)}function Ur(Ud,jd,Vd){for(var Kd=[],Xd=Ud.cm&&(Ud.cm.display.shift||Ud.extend),Yd=0;Yd<Ud.sel.ranges.length;Yd++)Kd[Yd]=Gr(Ud.sel.ranges[Yd],jd[Yd],null,Xd);var _d=ur(Kd,Ud.sel.primIndex);Yr(Ud,_d,Vd)}function jr(Ud,jd,Vd,Kd){var Xd=Ud.sel.ranges.slice(0);Xd[jd]=Vd,Yr(Ud,ur(Xd,Ud.sel.primIndex),Kd)}function Vr(Ud,jd,Vd,Kd){Yr(Ud,gr(jd,Vd),Kd)}function Kr(Ud,jd,Vd){var Kd={ranges:jd.ranges,update:function(Xd){var Yd=this;this.ranges=[];for(var _d=0;_d<Xd.length;_d++)Yd.ranges[_d]=new ud(ae(Ud,Xd[_d].anchor),ae(Ud,Xd[_d].head))},origin:Vd&&Vd.origin};return qe(Ud,'beforeSelectionChange',Ud,Kd),Ud.cm&&qe(Ud.cm,'beforeSelectionChange',Ud.cm,Kd),Kd.ranges==jd.ranges?jd:ur(Kd.ranges,Kd.ranges.length-1)}function Xr(Ud,jd,Vd){var Kd=Ud.history.done,Xd=H(Kd);Xd&&Xd.ranges?(Kd[Kd.length-1]=jd,_r(Ud,jd,Vd)):Yr(Ud,jd,Vd)}function Yr(Ud,jd,Vd){_r(Ud,jd,Vd),Fr(Ud,Ud.sel,Ud.cm?Ud.cm.curOp.id:NaN,Vd)}function _r(Ud,jd,Vd){(Je(Ud,'beforeSelectionChange')||Ud.cm&&Je(Ud.cm,'beforeSelectionChange'))&&(jd=Kr(Ud,jd,Vd));var Kd=Vd&&Vd.bias||(0>ne(jd.primary().head,Ud.sel.primary().head)?-1:1);qr(Ud,Qr(Ud,jd,Kd,!0)),!(Vd&&!1===Vd.scroll)&&Ud.cm&&Cn(Ud.cm)}function qr(Ud,jd){jd.equals(Ud.sel)||(Ud.sel=jd,Ud.cm&&(Ud.cm.curOp.updateInput=Ud.cm.curOp.selectionChanged=!0,Qe(Ud.cm)),Xt(Ud,'cursorActivity',Ud))}function Zr(Ud){qr(Ud,Qr(Ud,Ud.sel,null,!1))}function Qr(Ud,jd,Vd,Kd){for(var Yd=0,Xd;Yd<jd.ranges.length;Yd++){var _d=jd.ranges[Yd],qd=jd.ranges.length==Ud.sel.ranges.length&&Ud.sel.ranges[Yd],Zd=eo(Ud,_d.anchor,qd&&qd.anchor,Vd,Kd),Qd=eo(Ud,_d.head,qd&&qd.head,Vd,Kd);(Xd||Zd!=_d.anchor||Qd!=_d.head)&&(!Xd&&(Xd=jd.ranges.slice(0,Yd)),Xd[Yd]=new ud(Zd,Qd))}return Xd?ur(Xd,jd.primIndex):jd}function Jr(Ud,jd,Vd,Kd,Xd){var Yd=K(Ud,jd.line);if(Yd.markedSpans)for(var _d=0;_d<Yd.markedSpans.length;++_d){var qd=Yd.markedSpans[_d],Zd=qd.marker;if((null==qd.from||(Zd.inclusiveLeft?qd.from<=jd.ch:qd.from<jd.ch))&&(null==qd.to||(Zd.inclusiveRight?qd.to>=jd.ch:qd.to>jd.ch))){if(Xd&&(qe(Zd,'beforeCursorEnter'),Zd.explicitlyCleared))if(!Yd.markedSpans)break;else{--_d;continue}if(!Zd.atomic)continue;if(Vd){var Qd=Zd.find(0>Kd?1:-1),Jd=void 0;if((0>Kd?Zd.inclusiveRight:Zd.inclusiveLeft)&&(Qd=io(Ud,Qd,-Kd,Qd&&Qd.line==jd.line?Yd:null)),Qd&&Qd.line==jd.line&&(Jd=ne(Qd,Vd))&&(0>Kd?0>Jd:0<Jd))return Jr(Ud,Qd,jd,Kd,Xd)}var ea=Zd.find(0>Kd?-1:1);return(0>Kd?Zd.inclusiveLeft:Zd.inclusiveRight)&&(ea=io(Ud,ea,Kd,ea.line==jd.line?Yd:null)),ea?Jr(Ud,ea,jd,Kd,Xd):null}}return jd}function eo(Ud,jd,Vd,Kd,Xd){var Yd=Kd||1,_d=Jr(Ud,jd,Vd,Yd,Xd)||!Xd&&Jr(Ud,jd,Vd,Yd,!0)||Jr(Ud,jd,Vd,-Yd,Xd)||!Xd&&Jr(Ud,jd,Vd,-Yd,!0);return _d?_d:(Ud.cantEdit=!0,ee(Ud.first,0))}function io(Ud,jd,Vd,Kd){return 0>Vd&&0==jd.ch?jd.line>Ud.first?ae(Ud,ee(jd.line-1)):null:0<Vd&&jd.ch==(Kd||K(Ud,jd.line)).text.length?jd.line<Ud.first+Ud.size-1?ee(jd.line+1,0):null:new ee(jd.line,jd.ch+Vd)}function ro(Ud){Ud.setSelection(ee(Ud.firstLine(),0),ee(Ud.lastLine()),ks)}function oo(Ud,jd,Vd){var Kd={canceled:!1,from:jd.from,to:jd.to,text:jd.text,origin:jd.origin,cancel:function(){return Kd.canceled=!0}};return Vd&&(Kd.update=function(Xd,Yd,_d,qd){Xd&&(Kd.from=ae(Ud,Xd)),Yd&&(Kd.to=ae(Ud,Yd)),_d&&(Kd.text=_d),void 0!==qd&&(Kd.origin=qd)}),qe(Ud,'beforeChange',Ud,Kd),Ud.cm&&qe(Ud.cm,'beforeChange',Ud.cm,Kd),Kd.canceled?null:{from:Kd.from,to:Kd.to,text:Kd.text,origin:Kd.origin}}function lo(Ud,jd,Vd){if(Ud.cm){if(!Ud.cm.curOp)return $n(Ud.cm,lo)(Ud,jd,Vd);if(Ud.cm.state.suppressEdits)return}if(!((Je(Ud,'beforeChange')||Ud.cm&&Je(Ud.cm,'beforeChange'))&&(jd=oo(Ud,jd,!0),!jd))){var Kd=Ws&&!Vd&&Se(Ud,jd.from,jd.to);if(Kd)for(var Xd=Kd.length-1;0<=Xd;--Xd)so(Ud,{from:Kd[Xd].from,to:Kd[Xd].to,text:Xd?['']:jd.text,origin:jd.origin});else so(Ud,jd)}}function so(Ud,jd){if(1!=jd.text.length||''!=jd.text[0]||0!=ne(jd.from,jd.to)){var Vd=yr(Ud,jd);Dr(Ud,jd,Vd,Ud.cm?Ud.cm.curOp.id:NaN),co(Ud,jd,Vd,Ce(Ud,jd));var Kd=[];Lr(Ud,function(Xd,Yd){Yd||-1!=M(Kd,Xd.history)||(mo(Xd.history,jd),Kd.push(Xd.history)),co(Xd,jd,null,Ce(Xd,jd))})}}function ao(Ud,jd,Vd){var Kd=Ud.cm&&Ud.cm.state.suppressEdits;if(!Kd||Vd){for(var Xd=Ud.history,_d=Ud.sel,qd='undo'==jd?Xd.done:Xd.undone,Zd='undo'==jd?Xd.undone:Xd.done,Qd=0,Yd;Qd<qd.length&&(Yd=qd[Qd],Vd?!Yd.ranges||Yd.equals(Ud.sel):!!Yd.ranges);Qd++);if(Qd!=qd.length){for(Xd.lastOrigin=Xd.lastSelOrigin=null;;)if(Yd=qd.pop(),Yd.ranges){if(Pr(Yd,Zd),Vd&&!Yd.equals(Ud.sel))return void Yr(Ud,Yd,{clearRedo:!1});_d=Yd}else{if(Kd)return void qd.push(Yd);break}var Jd=[];Pr(_d,Zd),Zd.push({changes:Jd,generation:Xd.generation}),Xd.generation=Yd.generation||++Xd.maxGeneration;for(var ea=Je(Ud,'beforeChange')||Ud.cm&&Je(Ud.cm,'beforeChange'),ta=function(ra){var oa=Yd.changes[ra];if(oa.origin=jd,ea&&!oo(Ud,oa,!1))return qd.length=0,{};Jd.push(Ar(Ud,oa));var la=ra?yr(Ud,oa):H(qd);co(Ud,oa,la,Rr(Ud,oa)),!ra&&Ud.cm&&Ud.cm.scrollIntoView({from:oa.from,to:fr(oa)});var sa=[];Lr(Ud,function(da,aa){aa||-1!=M(sa,da.history)||(mo(da.history,oa),sa.push(da.history)),co(da,oa,null,Rr(da,oa))})},ia=Yd.changes.length-1,na;0<=ia;--ia)if(na=ta(ia),na)return na.v}}}function po(Ud,jd){if(0!=jd&&(Ud.first+=jd,Ud.sel=new hd(F(Ud.sel.ranges,function(Xd){return new ud(ee(Xd.anchor.line+jd,Xd.anchor.ch),ee(Xd.head.line+jd,Xd.head.ch))}),Ud.sel.primIndex),Ud.cm)){Vn(Ud.cm,Ud.first,Ud.first-jd,jd);for(var Vd=Ud.cm.display,Kd=Vd.viewFrom;Kd<Vd.viewTo;Kd++)Kn(Ud.cm,Kd,'gutter')}}function co(Ud,jd,Vd,Kd){if(Ud.cm&&!Ud.cm.curOp)return $n(Ud.cm,co)(Ud,jd,Vd,Kd);if(jd.to.line<Ud.first)return void po(Ud,jd.text.length-1-(jd.to.line-jd.from.line));if(!(jd.from.line>Ud.lastLine())){if(jd.from.line<Ud.first){var Xd=jd.text.length-1-(Ud.first-jd.from.line);po(Ud,Xd),jd={from:ee(Ud.first,0),to:ee(jd.to.line+Xd,jd.to.ch),text:[H(jd.text)],origin:jd.origin}}var Yd=Ud.lastLine();jd.to.line>Yd&&(jd={from:jd.from,to:ee(Yd,K(Ud,Yd).text.length),text:[jd.text[0]],origin:jd.origin}),jd.removed=X(Ud,jd.from,jd.to),Vd||(Vd=yr(Ud,jd)),Ud.cm?ho(Ud.cm,jd,Kd):Sr(Ud,jd,Kd),_r(Ud,Vd,ks)}}function ho(Ud,jd,Vd){var Kd=Ud.doc,Xd=Ud.display,Yd=jd.from,_d=jd.to,qd=!1,Zd=Yd.line;Ud.options.lineWrapping||(Zd=q(Fe(K(Kd,Yd.line))),Kd.iter(Zd,_d.line+1,function(ia){if(ia==Xd.maxLine)return qd=!0,!0})),-1<Kd.sel.contains(jd.from,jd.to)&&Qe(Ud),Sr(Kd,jd,Vd,_i(Ud)),Ud.options.lineWrapping||(Kd.iter(Zd,Yd.line+jd.text.length,function(ia){var na=$e(ia);na>Xd.maxLineLength&&(Xd.maxLine=ia,Xd.maxLineLength=na,Xd.maxLineChanged=!0,qd=!1)}),qd&&(Ud.curOp.updateMaxLine=!0)),Wt(Kd,Yd.line),Zn(Ud,400);var Qd=jd.text.length-(_d.line-Yd.line)-1;jd.full?Vn(Ud):Yd.line!=_d.line||1!=jd.text.length||wr(Ud.doc,jd)?Vn(Ud,Yd.line,_d.line+1,Qd):Kn(Ud,Yd.line,'text');var Jd=Je(Ud,'changes'),ea=Je(Ud,'change');if(ea||Jd){var ta={from:Yd,to:_d,text:jd.text,removed:jd.removed,origin:jd.origin};ea&&Xt(Ud,'change',Ud,ta),Jd&&(Ud.curOp.changeObjs||(Ud.curOp.changeObjs=[])).push(ta)}Ud.display.selForContextMenu=null}function uo(Ud,jd,Vd,Kd,Xd){if(Kd||(Kd=Vd),0>ne(Kd,Vd)){var Yd;Yd=[Kd,Vd],Vd=Yd[0],Kd=Yd[1],Yd}'string'==typeof jd&&(jd=Ud.splitLines(jd)),lo(Ud,{from:Vd,to:Kd,text:jd,origin:Xd})}function go(Ud,jd,Vd,Kd){Vd<Ud.line?Ud.line+=Kd:jd<Ud.line&&(Ud.line=jd,Ud.ch=0)}function fo(Ud,jd,Vd,Kd){for(var Xd=0;Xd<Ud.length;++Xd){var Yd=Ud[Xd],_d=!0;if(Yd.ranges){Yd.copied||(Yd=Ud[Xd]=Yd.deepCopy(),Yd.copied=!0);for(var qd=0;qd<Yd.ranges.length;qd++)go(Yd.ranges[qd].anchor,jd,Vd,Kd),go(Yd.ranges[qd].head,jd,Vd,Kd);continue}for(var Zd=0,Qd;Zd<Yd.changes.length;++Zd)if(Qd=Yd.changes[Zd],Vd<Qd.from.line)Qd.from=ee(Qd.from.line+Kd,Qd.from.ch),Qd.to=ee(Qd.to.line+Kd,Qd.to.ch);else if(jd<=Qd.to.line){_d=!1;break}_d||(Ud.splice(0,Xd+1),Xd=0)}}function mo(Ud,jd){var Vd=jd.from.line,Kd=jd.to.line,Xd=jd.text.length-(Kd-Vd)-1;fo(Ud.done,Vd,Kd,Xd),fo(Ud.undone,Vd,Kd,Xd)}function yo(Ud,jd,Vd,Kd){var Xd=jd,Yd=jd;return('number'==typeof jd?Yd=K(Ud,de(Ud,jd)):Xd=q(jd),null==Xd)?null:(Kd(Yd,Xd)&&Ud.cm&&Kn(Ud.cm,Xd,Vd),Yd)}function xo(Ud){var jd=this;this.lines=Ud,this.parent=null;for(var Vd=0,Kd=0;Kd<Ud.length;++Kd)Ud[Kd].parent=jd,Vd+=Ud[Kd].height;this.height=Vd}function vo(Ud){var jd=this;this.children=Ud;for(var Vd=0,Kd=0,Xd=0,Yd;Xd<Ud.length;++Xd)Yd=Ud[Xd],Vd+=Yd.chunkSize(),Kd+=Yd.height,Yd.parent=jd;this.size=Vd,this.height=Kd,this.parent=null}function bo(Ud,jd,Vd){Ge(jd)<(Ud.curOp&&Ud.curOp.scrollTop||Ud.doc.scrollTop)&&bn(Ud,Vd)}function Co(Ud,jd,Vd,Kd){var Xd=new gd(Ud,Vd,Kd),Yd=Ud.cm;return Yd&&Xd.noHScroll&&(Yd.display.alignWidgets=!0),yo(Ud,jd,'widget',function(_d){var qd=_d.widgets||(_d.widgets=[]);if(null==Xd.insertAt?qd.push(Xd):qd.splice(Math.min(qd.length-1,Math.max(0,Xd.insertAt)),0,Xd),Xd.line=_d,Yd&&!Re(Ud,_d)){var Zd=Ge(_d)<Ud.scrollTop;_(_d,_d.height+si(Xd)),Zd&&bn(Yd,Xd.height),Yd.curOp.forceUpdate=!0}return!0}),Yd&&Xt(Yd,'lineWidgetAdded',Yd,Xd,'number'==typeof jd?jd:q(jd)),Xd}function wo(Ud,jd,Vd,Kd,Xd){if(Kd&&Kd.shared)return So(Ud,jd,Vd,Kd,Xd);if(Ud.cm&&!Ud.cm.curOp)return $n(Ud.cm,wo)(Ud,jd,Vd,Kd,Xd);var Yd=new md(Ud,Xd),_d=ne(jd,Vd);if(Kd&&O(Kd,Yd,!1),0<_d||0==_d&&!1!==Yd.clearWhenEmpty)return Yd;if(Yd.replacedWith&&(Yd.collapsed=!0,Yd.widgetNode=v('span',[Yd.replacedWith],'CodeMirror-widget'),!Kd.handleMouseEvents&&Yd.widgetNode.setAttribute('cm-ignore-events','true'),Kd.insertLeft&&(Yd.widgetNode.insertLeft=!0)),Yd.collapsed){if(He(Ud,jd.line,jd,Vd,Yd)||jd.line!=Vd.line&&He(Ud,Vd.line,jd,Vd,Yd))throw new Error('Inserting collapsed marker partially overlapping an existing one');ue()}Yd.addToHistory&&Dr(Ud,{from:jd,to:Vd,origin:'markText'},Ud.sel,NaN);var qd=jd.line,Zd=Ud.cm,Qd;if(Ud.iter(qd,Vd.line+1,function(ea){Zd&&Yd.collapsed&&!Zd.options.lineWrapping&&Fe(ea)==Zd.display.maxLine&&(Qd=!0),Yd.collapsed&&qd!=jd.line&&_(ea,0),xe(ea,new ge(Yd,qd==jd.line?jd.ch:null,qd==Vd.line?Vd.ch:null)),++qd}),Yd.collapsed&&Ud.iter(jd.line,Vd.line+1,function(ea){Re(Ud,ea)&&_(ea,0)}),Yd.clearOnEnter&&Is(Yd,'beforeCursorEnter',function(){return Yd.clear()}),Yd.readOnly&&(he(),(Ud.history.done.length||Ud.history.undone.length)&&Ud.clearHistory()),Yd.collapsed&&(Yd.id=++fd,Yd.atomic=!0),Zd){if(Qd&&(Zd.curOp.updateMaxLine=!0),Yd.collapsed)Vn(Zd,jd.line,Vd.line+1);else if(Yd.className||Yd.title||Yd.startStyle||Yd.endStyle||Yd.css)for(var Jd=jd.line;Jd<=Vd.line;Jd++)Kn(Zd,Jd,'text');Yd.atomic&&Zr(Zd.doc),Xt(Zd,'markerAdded',Zd,Yd)}return Yd}function So(Ud,jd,Vd,Kd,Xd){Kd=O(Kd),Kd.shared=!1;var Yd=[wo(Ud,jd,Vd,Kd,Xd)],_d=Yd[0],qd=Kd.widgetNode;return Lr(Ud,function(Zd){qd&&(Kd.widgetNode=qd.cloneNode(!0)),Yd.push(wo(Zd,ae(Zd,jd),ae(Zd,Vd),Kd,Xd));for(var Qd=0;Qd<Zd.linked.length;++Qd)if(Zd.linked[Qd].isParent)return;_d=H(Yd)}),new yd(Yd,_d)}function Lo(Ud){return Ud.findMarks(ee(Ud.first,0),Ud.clipPos(ee(Ud.lastLine())),function(jd){return jd.parent})}function ko(Ud,jd){for(var Vd=0;Vd<jd.length;Vd++){var Kd=jd[Vd],Xd=Kd.find(),Yd=Ud.clipPos(Xd.from),_d=Ud.clipPos(Xd.to);if(ne(Yd,_d)){var qd=wo(Ud,Yd,_d,Kd.primary,Kd.primary.type);Kd.markers.push(qd),qd.parent=Kd}}}function To(Ud){for(var jd=function(Kd){var Xd=Ud[Kd],Yd=[Xd.primary.doc];Lr(Xd.primary.doc,function(Zd){return Yd.push(Zd)});for(var _d=0,qd;_d<Xd.markers.length;_d++)qd=Xd.markers[_d],-1==M(Yd,qd.doc)&&(qd.parent=null,Xd.markers.splice(_d--,1))},Vd=0;Vd<Ud.length;Vd++)jd(Vd)}function No(Ud){var jd=this;if(Mo(jd),!(Ze(jd,Ud)||di(jd.display,Ud))){tt(Ud),Ql&&(bd=+new Date);var Vd=Zi(jd,Ud,!0),Kd=Ud.dataTransfer.files;if(Vd&&!jd.isReadOnly())if(Kd&&Kd.length&&window.FileReader&&window.File)for(var Xd=Kd.length,Yd=Array(Xd),_d=0,qd=function(ta,ia){if(!(jd.options.allowDropFileTypes&&-1==M(jd.options.allowDropFileTypes,ta.type))){var na=new FileReader;na.onload=$n(jd,function(){var ra=na.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ra)&&(ra=''),Yd[ia]=ra,++_d==Xd){Vd=ae(jd.doc,Vd);var oa={from:Vd,to:Vd,text:jd.doc.splitLines(Yd.join(jd.doc.lineSeparator())),origin:'paste'};lo(jd.doc,oa),Xr(jd.doc,gr(Vd,fr(oa)))}}),na.readAsText(ta)}},Zd=0;Zd<Xd;++Zd)qd(Kd[Zd],Zd);else{if(jd.state.draggingText&&-1<jd.doc.sel.contains(Vd))return jd.state.draggingText(Ud),void setTimeout(function(){return jd.display.input.focus()},20);try{var Qd=Ud.dataTransfer.getData('Text');if(Qd){var Jd;if(jd.state.draggingText&&!jd.state.draggingText.copy&&(Jd=jd.listSelections()),_r(jd.doc,gr(Vd,Vd)),Jd)for(var ea=0;ea<Jd.length;++ea)uo(jd.doc,'',Jd[ea].anchor,Jd[ea].head,'drag');jd.replaceSelection(Qd,'around','paste'),jd.display.input.focus()}}catch(ta){}}}}function Oo(Ud,jd){if(Ql&&(!Ud.state.draggingText||100>+new Date-bd))return void ot(jd);if(!(Ze(Ud,jd)||di(Ud.display,jd))&&(jd.dataTransfer.setData('Text',Ud.getSelection()),jd.dataTransfer.effectAllowed='copyMove',jd.dataTransfer.setDragImage&&!rs)){var Vd=u('img',null,null,'position: fixed; left: 0; top: 0;');Vd.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',ns&&(Vd.width=Vd.height=1,Ud.display.wrapper.appendChild(Vd),Vd._top=Vd.offsetTop),jd.dataTransfer.setDragImage(Vd,0,0),ns&&Vd.parentNode.removeChild(Vd)}}function Ao(Ud,jd){var Vd=Zi(Ud,jd);if(Vd){var Kd=document.createDocumentFragment();tn(Ud,Vd,Kd),Ud.display.dragCursor||(Ud.display.dragCursor=u('div',null,'CodeMirror-cursors CodeMirror-dragcursors'),Ud.display.lineSpace.insertBefore(Ud.display.dragCursor,Ud.display.cursorDiv)),c(Ud.display.dragCursor,Kd)}}function Mo(Ud){Ud.display.dragCursor&&(Ud.display.lineSpace.removeChild(Ud.display.dragCursor),Ud.display.dragCursor=null)}function Wo(Ud){if(document.getElementsByClassName)for(var jd=document.getElementsByClassName('CodeMirror'),Vd=0,Kd;Vd<jd.length;Vd++)Kd=jd[Vd].CodeMirror,Kd&&Ud(Kd)}function Do(){Cd||(Ho(),Cd=!0)}function Ho(){var Ud;Is(window,'resize',function(){null==Ud&&(Ud=setTimeout(function(){Ud=null,Wo(Fo)},100))}),Is(window,'blur',function(){return Wo(pn)})}function Fo(Ud){var jd=Ud.display;jd.cachedCharWidth=jd.cachedTextHeight=jd.cachedPaddingH=null,jd.scrollbarsClipped=!1,Ud.setSize()}function Po(Ud){var jd=Ud.split(/-(?!$)/);Ud=jd[jd.length-1];for(var _d=0,Vd,Kd,Xd,Yd,qd;_d<jd.length-1;_d++)if(qd=jd[_d],/^(cmd|meta|m)$/i.test(qd))Yd=!0;else if(/^a(lt)?$/i.test(qd))Vd=!0;else if(/^(c|ctrl|control)$/i.test(qd))Kd=!0;else if(/^s(hift)?$/i.test(qd))Xd=!0;else throw new Error('Unrecognized modifier name: '+qd);return Vd&&(Ud='Alt-'+Ud),Kd&&(Ud='Ctrl-'+Ud),Yd&&(Ud='Cmd-'+Ud),Xd&&(Ud='Shift-'+Ud),Ud}function Io(Ud){var jd={};for(var Vd in Ud)if(Ud.hasOwnProperty(Vd)){var Kd=Ud[Vd];if(/^(name|fallthrough|(de|at)tach)$/.test(Vd))continue;if('...'==Kd){delete Ud[Vd];continue}for(var Xd=F(Vd.split(' '),Po),Yd=0;Yd<Xd.length;Yd++){var _d=void 0,qd=void 0;Yd==Xd.length-1?(qd=Xd.join(' '),_d=Kd):(qd=Xd.slice(0,Yd+1).join(' '),_d='...');var Zd=jd[qd];if(!Zd)jd[qd]=_d;else if(Zd!=_d)throw new Error('Inconsistent bindings for '+qd)}delete Ud[Vd]}for(var Qd in jd)Ud[Qd]=jd[Qd];return Ud}function zo(Ud,jd,Vd,Kd){jd=Go(jd);var Xd=jd.call?jd.call(Ud,Kd):jd[Ud];if(!1===Xd)return'nothing';if('...'===Xd)return'multi';if(null!=Xd&&Vd(Xd))return'handled';if(jd.fallthrough){if('[object Array]'!=Object.prototype.toString.call(jd.fallthrough))return zo(Ud,jd.fallthrough,Vd,Kd);for(var Yd=0,_d;Yd<jd.fallthrough.length;Yd++)if(_d=zo(Ud,jd.fallthrough[Yd],Vd,Kd),_d)return _d}}function Eo(Ud){var jd='string'==typeof Ud?Ud:wd[Ud.keyCode];return'Ctrl'==jd||'Alt'==jd||'Shift'==jd||'Mod'==jd}function Ro(Ud,jd,Vd){var Kd=Ud;return jd.altKey&&'Alt'!=Kd&&(Ud='Alt-'+Ud),(fs?jd.metaKey:jd.ctrlKey)&&'Ctrl'!=Kd&&(Ud='Ctrl-'+Ud),(fs?jd.ctrlKey:jd.metaKey)&&'Cmd'!=Kd&&(Ud='Cmd-'+Ud),!Vd&&jd.shiftKey&&'Shift'!=Kd&&(Ud='Shift-'+Ud),Ud}function Bo(Ud,jd){if(ns&&34==Ud.keyCode&&Ud.char)return!1;var Vd=wd[Ud.keyCode];return null==Vd||Ud.altGraphKey?!1:(3==Ud.keyCode&&Ud.code&&(Vd=Ud.code),Ro(Vd,Ud,jd))}function Go(Ud){return'string'==typeof Ud?Td[Ud]:Ud}function $o(Ud,jd){for(var Vd=Ud.doc.sel.ranges,Kd=[],Xd=0,Yd;Xd<Vd.length;Xd++){for(Yd=jd(Vd[Xd]);Kd.length&&0>=ne(Yd.from,H(Kd).to);){var _d=Kd.pop();if(0>ne(_d.from,Yd.from)){Yd.from=_d.from;break}}Kd.push(Yd)}Gn(Ud,function(){for(var qd=Kd.length-1;0<=qd;qd--)uo(Ud.doc,'',Kd[qd].from,Kd[qd].to,'+delete');Cn(Ud)})}function Uo(Ud,jd,Vd){var Kd=$(Ud.text,jd+Vd,Vd);return 0>Kd||Kd>Ud.text.length?null:Kd}function jo(Ud,jd,Vd){var Kd=Uo(Ud,jd.ch,Vd);return null==Kd?null:new ee(jd.line,Kd,0>Vd?'after':'before')}function Vo(Ud,jd,Vd,Kd,Xd){if(Ud){var Yd=Ke(Vd,jd.doc.direction);if(Yd){var _d=0>Xd?H(Yd):Yd[0],qd=0>Xd==(1==_d.level),Zd=qd?'after':'before',Qd;if(0<_d.level||'rtl'==jd.doc.direction){var Jd=bi(jd,Vd);Qd=0>Xd?Vd.text.length-1:0;var ea=Ci(jd,Jd,Qd).top;Qd=U(function(ta){return Ci(jd,Jd,ta).top==ea},0>Xd==(1==_d.level)?_d.from:_d.to-1,Qd),'before'==Zd&&(Qd=Uo(Vd,Qd,1))}else Qd=0>Xd?_d.to:_d.from;return new ee(Kd,Qd,Zd)}}return new ee(Kd,0>Xd?Vd.text.length:0,0>Xd?'before':'after')}function Ko(Ud,jd,Vd,Kd){var Xd=Ke(jd,Ud.doc.direction);if(!Xd)return jo(jd,Vd,Kd);Vd.ch>=jd.text.length?(Vd.ch=jd.text.length,Vd.sticky='before'):0>=Vd.ch&&(Vd.ch=0,Vd.sticky='after');var Yd=Ve(Xd,Vd.ch,Vd.sticky),_d=Xd[Yd];if('ltr'==Ud.doc.direction&&0==_d.level%2&&(0<Kd?_d.to>Vd.ch:_d.from<Vd.ch))return jo(jd,Vd,Kd);var qd=function(la,sa){return Uo(jd,la instanceof ee?la.ch:la,sa)},Qd=function(la){return Ud.options.lineWrapping?(Zd=Zd||bi(Ud,jd),Bi(Ud,jd,Zd,la)):{begin:0,end:jd.text.length}},Jd=Qd('before'==Vd.sticky?qd(Vd,-1):Vd.ch),Zd;if('rtl'==Ud.doc.direction||1==_d.level){var ea=1==_d.level==0>Kd,ta=qd(Vd,ea?1:-1);if(null!=ta&&(ea?ta<=_d.to&&ta<=Jd.end:ta>=_d.from&&ta>=Jd.begin)){var ia=ea?'before':'after';return new ee(Vd.line,ta,ia)}}var na=function(la,sa,da){for(var aa=function(ua,ga){return ga?new ee(Vd.line,qd(ua,1),'before'):new ee(Vd.line,ua,'after')};0<=la&&la<Xd.length;la+=sa){var pa=Xd[la],ca=0<sa==(1!=pa.level),ha=ca?da.begin:qd(da.end,-1);if(pa.from<=ha&&ha<pa.to)return aa(ha,ca);if(ha=ca?pa.from:qd(pa.to,-1),da.begin<=ha&&ha<da.end)return aa(ha,ca)}},ra=na(Yd+Kd,Kd,Jd);if(ra)return ra;var oa=0<Kd?Jd.end:qd(Jd.begin,-1);return null!=oa&&!(0<Kd&&oa==jd.text.length)&&(ra=na(0<Kd?0:Xd.length-1,Kd,Qd(oa)),ra)?ra:null}function Xo(Ud,jd){var Vd=K(Ud.doc,jd),Kd=Fe(Vd);return Kd!=Vd&&(jd=q(Kd)),Vo(!0,Ud,Kd,jd,1)}function Yo(Ud,jd){var Vd=K(Ud.doc,jd),Kd=Pe(Vd);return Kd!=Vd&&(jd=q(Kd)),Vo(!0,Ud,Vd,jd,-1)}function _o(Ud,jd){var Vd=Xo(Ud,jd.line),Kd=K(Ud.doc,Vd.line),Xd=Ke(Kd,Ud.doc.direction);if(!Xd||0==Xd[0].level){var Yd=Math.max(0,Kd.text.search(/\S/)),_d=jd.line==Vd.line&&jd.ch<=Yd&&jd.ch;return ee(Vd.line,_d?0:Yd,Vd.sticky)}return Vd}function qo(Ud,jd,Vd){if('string'==typeof jd&&(jd=Nd[jd],!jd))return!1;Ud.display.input.ensurePolled();var Kd=Ud.display.shift,Xd=!1;try{Ud.isReadOnly()&&(Ud.state.suppressEdits=!0),Vd&&(Ud.display.shift=!1),Xd=jd(Ud)!=Ls}finally{Ud.display.shift=Kd,Ud.state.suppressEdits=!1}return Xd}function Zo(Ud,jd,Vd){for(var Kd=0,Xd;Kd<Ud.state.keyMaps.length;Kd++)if(Xd=zo(jd,Ud.state.keyMaps[Kd],Vd,Ud),Xd)return Xd;return Ud.options.extraKeys&&zo(jd,Ud.options.extraKeys,Vd,Ud)||zo(jd,Ud.options.keyMap,Vd,Ud)}function Qo(Ud,jd,Vd,Kd){var Xd=Ud.state.keySeq;if(Xd){if(Eo(jd))return'handled';if(/\'$/.test(jd)?Ud.state.keySeq=null:Od.set(50,function(){Ud.state.keySeq==Xd&&(Ud.state.keySeq=null,Ud.display.input.reset())}),Jo(Ud,Xd+' '+jd,Vd,Kd))return!0}return Jo(Ud,jd,Vd,Kd)}function Jo(Ud,jd,Vd,Kd){var Xd=Zo(Ud,jd,Kd);return'multi'==Xd&&(Ud.state.keySeq=jd),'handled'==Xd&&Xt(Ud,'keyHandled',Ud,jd,Vd),('handled'==Xd||'multi'==Xd)&&(tt(Vd),ln(Ud)),!!Xd}function el(Ud,jd){var Vd=Bo(jd,!0);return!!Vd&&(jd.shiftKey&&!Ud.state.keySeq?Qo(Ud,'Shift-'+Vd,jd,function(Kd){return qo(Ud,Kd,!0)})||Qo(Ud,Vd,jd,function(Kd){if('string'==typeof Kd?/^go[A-Z]/.test(Kd):Kd.motion)return qo(Ud,Kd)}):Qo(Ud,Vd,jd,function(Kd){return qo(Ud,Kd)}))}function tl(Ud,jd,Vd){return Qo(Ud,'\''+Vd+'\'',jd,function(Kd){return qo(Ud,Kd,!0)})}function il(Ud){var jd=this;if(jd.curOp.focus=S(),!Ze(jd,Ud)){Ql&&11>Jl&&27==Ud.keyCode&&(Ud.returnValue=!1);var Vd=Ud.keyCode;jd.display.shift=16==Vd||Ud.shiftKey;var Kd=el(jd,Ud);ns&&(Ad=Kd?Vd:null,!Kd&&88==Vd&&!$s&&(cs?Ud.metaKey:Ud.ctrlKey)&&jd.replaceSelection('',null,'cut')),18!=Vd||/\bCodeMirror-crosshair\b/.test(jd.display.lineDiv.className)||rl(jd)}}function rl(Ud){function jd(Kd){18!=Kd.keyCode&&Kd.altKey||(xs(Vd,'CodeMirror-crosshair'),Ye(document,'keyup',jd),Ye(document,'mouseover',jd))}var Vd=Ud.display.lineDiv;L(Vd,'CodeMirror-crosshair'),Is(document,'keyup',jd),Is(document,'mouseover',jd)}function ol(Ud){16==Ud.keyCode&&(this.doc.sel.shift=!1),Ze(this,Ud)}function ll(Ud){var jd=this;if(!(di(jd.display,Ud)||Ze(jd,Ud)||Ud.ctrlKey&&!Ud.altKey||cs&&Ud.metaKey)){var Vd=Ud.keyCode,Kd=Ud.charCode;if(ns&&Vd==Ad)return Ad=null,void tt(Ud);if(!(ns&&(!Ud.which||10>Ud.which)&&el(jd,Ud))){var Xd=String.fromCharCode(null==Kd?Vd:Kd);'\b'==Xd||tl(jd,Ud,Xd)||jd.display.input.onKeyPress(Ud)}}}function sl(Ud,jd){var Vd=+new Date;return Hd&&Hd.compare(Vd,Ud,jd)?(Dd=Hd=null,'triple'):Dd&&Dd.compare(Vd,Ud,jd)?(Hd=new Wd(Vd,Ud,jd),Dd=null,'double'):(Dd=new Wd(Vd,Ud,jd),Hd=null,'single')}function dl(Ud){var jd=this,Vd=jd.display;if(!(Ze(jd,Ud)||Vd.activeTouch&&Vd.input.supportsTouch())){if(Vd.input.ensurePolled(),Vd.shift=Ud.shiftKey,di(Vd,Ud))return void(es||(Vd.scroller.draggable=!1,setTimeout(function(){return Vd.scroller.draggable=!0},100)));if(!yl(jd,Ud)){var Kd=Zi(jd,Ud),Xd=dt(Ud),Yd=Kd?sl(Kd,Xd):'single';window.focus(),1==Xd&&jd.state.selectingText&&jd.state.selectingText(Ud),Kd&&al(jd,Xd,Kd,Yd,Ud)||(1==Xd?Kd?cl(jd,Kd,Yd,Ud):lt(Ud)==Vd.scroller&&tt(Ud):2==Xd?(Kd&&$r(jd.doc,Kd),setTimeout(function(){return Vd.input.focus()},20)):3==Xd&&(ys?xl(jd,Ud):dn(jd)))}}}function al(Ud,jd,Vd,Kd,Xd){var Yd='Click';return'double'==Kd?Yd='Double'+Yd:'triple'==Kd&&(Yd='Triple'+Yd),Yd=(1==jd?'Left':2==jd?'Middle':'Right')+Yd,Qo(Ud,Ro(Yd,Xd),Xd,function(_d){if('string'==typeof _d&&(_d=Nd[_d]),!_d)return!1;var qd=!1;try{Ud.isReadOnly()&&(Ud.state.suppressEdits=!0),qd=_d(Ud,Vd)!=Ls}finally{Ud.state.suppressEdits=!1}return qd})}function pl(Ud,jd,Vd){var Kd=Ud.getOption('configureMouse'),Xd=Kd?Kd(Ud,jd,Vd):{};if(null==Xd.unit){var Yd=hs?Vd.shiftKey&&Vd.metaKey:Vd.altKey;Xd.unit=Yd?'rectangle':'single'==jd?'char':'double'==jd?'word':'line'}return(null==Xd.extend||Ud.doc.extend)&&(Xd.extend=Ud.doc.extend||Vd.shiftKey),null==Xd.addNew&&(Xd.addNew=cs?Vd.metaKey:Vd.ctrlKey),null==Xd.moveOnDrag&&(Xd.moveOnDrag=cs?!Vd.altKey:!Vd.ctrlKey),Xd}function cl(Ud,jd,Vd,Kd){Ql?setTimeout(N(sn,Ud),0):Ud.curOp.focus=S();var Xd=pl(Ud,Vd,Kd),Yd=Ud.doc.sel,_d;Ud.options.dragDrop&&zs&&!Ud.isReadOnly()&&'single'==Vd&&-1<(_d=Yd.contains(jd))&&(0>ne((_d=Yd.ranges[_d]).from(),jd)||0<jd.xRel)&&(0<ne(_d.to(),jd)||0>jd.xRel)?hl(Ud,Kd,jd,Xd):gl(Ud,Kd,jd,Xd)}function hl(Ud,jd,Vd,Kd){var Xd=Ud.display,Yd=!1,_d=$n(Ud,function(Qd){es&&(Xd.scroller.draggable=!1),Ud.state.draggingText=!1,Ye(Xd.wrapper.ownerDocument,'mouseup',_d),Ye(Xd.wrapper.ownerDocument,'mousemove',qd),Ye(Xd.scroller,'dragstart',Zd),Ye(Xd.scroller,'drop',_d),Yd||(tt(Qd),!Kd.addNew&&$r(Ud.doc,Vd,null,null,Kd.extend),es||Ql&&9==Jl?setTimeout(function(){Xd.wrapper.ownerDocument.body.focus(),Xd.input.focus()},20):Xd.input.focus())}),qd=function(Qd){Yd=Yd||10<=Math.abs(jd.clientX-Qd.clientX)+Math.abs(jd.clientY-Qd.clientY)},Zd=function(){return Yd=!0};es&&(Xd.scroller.draggable=!0),Ud.state.draggingText=_d,_d.copy=!Kd.moveOnDrag,Xd.scroller.dragDrop&&Xd.scroller.dragDrop(),Is(Xd.wrapper.ownerDocument,'mouseup',_d),Is(Xd.wrapper.ownerDocument,'mousemove',qd),Is(Xd.scroller,'dragstart',Zd),Is(Xd.scroller,'drop',_d),dn(Ud),setTimeout(function(){return Xd.input.focus()},20)}function ul(Ud,jd,Vd){if('char'==Vd)return new ud(jd,jd);if('word'==Vd)return Ud.findWordAt(jd);if('line'==Vd)return new ud(ee(jd.line,0),ae(Ud.doc,ee(jd.line+1,0)));var Kd=Vd(Ud,jd);return new ud(Kd.from,Kd.to)}function gl(Ud,jd,Vd,Kd){function Xd(da){if(0!=ne(na,da))if(na=da,'rectangle'==Kd.unit){for(var aa=[],pa=Ud.options.tabSize,ca=A(K(Zd,Vd.line).text,Vd.ch,pa),ha=A(K(Zd,da.line).text,da.ch,pa),ua=Math.min(ca,ha),ga=Math.max(ca,ha),fa=Math.min(Vd.line,da.line),ma=Math.min(Ud.lastLine(),Math.max(Vd.line,da.line));fa<=ma;fa++){var ya=K(Zd,fa).text,xa=W(ya,ua,pa);ua==ga?aa.push(new ud(ee(fa,xa),ee(fa,xa))):ya.length>xa&&aa.push(new ud(ee(fa,xa),ee(fa,W(ya,ga,pa))))}aa.length||aa.push(new ud(Vd,Vd)),Yr(Zd,ur(ea.ranges.slice(0,Jd).concat(aa),Jd),{origin:'*mouse',scroll:!1}),Ud.scrollIntoView(da)}else{var va=Qd,ba=ul(Ud,da,Kd.unit),Ca=va.anchor,wa;0<ne(ba.anchor,Ca)?(wa=ba.head,Ca=se(va.from(),ba.anchor)):(wa=ba.anchor,Ca=le(va.to(),ba.head));var Sa=ea.ranges.slice(0);Sa[Jd]=fl(Ud,new ud(ae(Zd,Ca),wa)),Yr(Zd,ur(Sa,Jd),Ts)}}function Yd(da){var aa=++oa,pa=Zi(Ud,da,!0,'rectangle'==Kd.unit);if(pa)if(0!=ne(pa,na)){Ud.curOp.focus=S(),Xd(pa);var ca=un(qd,Zd);(pa.line>=ca.to||pa.line<ca.from)&&setTimeout($n(Ud,function(){oa==aa&&Yd(da)}),150)}else{var ha=da.clientY<ra.top?-20:da.clientY>ra.bottom?20:0;ha&&setTimeout($n(Ud,function(){oa!=aa||(qd.scroller.scrollTop+=ha,Yd(da))}),50)}}function _d(da){Ud.state.selectingText=!1,oa=Infinity,tt(da),qd.input.focus(),Ye(qd.wrapper.ownerDocument,'mousemove',la),Ye(qd.wrapper.ownerDocument,'mouseup',sa),Zd.history.lastSelOrigin=null}var qd=Ud.display,Zd=Ud.doc;tt(jd);var ea=Zd.sel,ta=ea.ranges,Qd,Jd;if(Kd.addNew&&!Kd.extend?(Jd=Zd.sel.contains(Vd),Qd=-1<Jd?ta[Jd]:new ud(Vd,Vd)):(Qd=Zd.sel.primary(),Jd=Zd.sel.primIndex),'rectangle'==Kd.unit)Kd.addNew||(Qd=new ud(Vd,Vd)),Vd=Zi(Ud,jd,!0,!0),Jd=-1;else{var ia=ul(Ud,Vd,Kd.unit);Qd=Kd.extend?Gr(Qd,ia.anchor,ia.head,Kd.extend):ia}Kd.addNew?-1==Jd?(Jd=ta.length,Yr(Zd,ur(ta.concat([Qd]),Jd),{scroll:!1,origin:'*mouse'})):1<ta.length&&ta[Jd].empty()&&'char'==Kd.unit&&!Kd.extend?(Yr(Zd,ur(ta.slice(0,Jd).concat(ta.slice(Jd+1)),0),{scroll:!1,origin:'*mouse'}),ea=Zd.sel):jr(Zd,Jd,Qd,Ts):(Jd=0,Yr(Zd,new hd([Qd],0),Ts),ea=Zd.sel);var na=Vd,ra=qd.wrapper.getBoundingClientRect(),oa=0,la=$n(Ud,function(da){0!==da.buttons&&dt(da)?Yd(da):_d(da)}),sa=$n(Ud,_d);Ud.state.selectingText=sa,Is(qd.wrapper.ownerDocument,'mousemove',la),Is(qd.wrapper.ownerDocument,'mouseup',sa)}function fl(Ud,jd){var Vd=jd.anchor,Kd=jd.head,Xd=K(Ud.doc,Vd.line);if(0==ne(Vd,Kd)&&Vd.sticky==Kd.sticky)return jd;var Yd=Ke(Xd);if(!Yd)return jd;var _d=Ve(Yd,Vd.ch,Vd.sticky),qd=Yd[_d];if(qd.from!=Vd.ch&&qd.to!=Vd.ch)return jd;var Zd=_d+(qd.from==Vd.ch==(1!=qd.level)?0:1);if(0==Zd||Zd==Yd.length)return jd;var Qd;if(Kd.line!=Vd.line)Qd=0<(Kd.line-Vd.line)*('ltr'==Ud.doc.direction?1:-1);else{var Jd=Ve(Yd,Kd.ch,Kd.sticky),ea=Jd-_d||(Kd.ch-Vd.ch)*(1==qd.level?-1:1);Qd=Jd==Zd-1||Jd==Zd?0>ea:0<ea}var ta=Yd[Zd+(Qd?-1:0)],ia=Qd==(1==ta.level),na=ia?ta.from:ta.to,ra=ia?'after':'before';return Vd.ch==na&&Vd.sticky==ra?jd:new ud(new ee(Vd.line,na,ra),Kd)}function ml(Ud,jd,Vd,Kd){var Xd,Yd;if(jd.touches)Xd=jd.touches[0].clientX,Yd=jd.touches[0].clientY;else try{Xd=jd.clientX,Yd=jd.clientY}catch(ta){return!1}if(Xd>=Math.floor(Ud.display.gutters.getBoundingClientRect().right))return!1;Kd&&tt(jd);var _d=Ud.display,qd=_d.lineDiv.getBoundingClientRect();if(Yd>qd.bottom||!Je(Ud,Vd))return nt(jd);Yd-=qd.top-_d.viewOffset;for(var Zd=0,Qd;Zd<Ud.options.gutters.length;++Zd)if(Qd=_d.gutters.childNodes[Zd],Qd&&Qd.getBoundingClientRect().right>=Xd){var Jd=Z(Ud.doc,Yd),ea=Ud.options.gutters[Zd];return qe(Ud,Vd,Ud,Jd,ea,jd),nt(jd)}}function yl(Ud,jd){return ml(Ud,jd,'gutterClick',!0)}function xl(Ud,jd){di(Ud.display,jd)||vl(Ud,jd)||Ze(Ud,jd,'contextmenu')||Ud.display.input.onContextMenu(jd)}function vl(Ud,jd){return!!Je(Ud,'gutterContextMenu')&&ml(Ud,jd,'gutterContextMenu',!1)}function bl(Ud){Ud.display.wrapper.className=Ud.display.wrapper.className.replace(/\s*cm-s-\S+/g,'')+Ud.options.theme.replace(/(^|\s)\s*/g,' cm-s-'),Oi(Ud)}function wl(Ud){dr(Ud),Vn(Ud),gn(Ud)}function Sl(Ud,jd,Vd){if(!jd!=!(Vd&&Vd!=Fd)){var Xd=Ud.display.dragFunctions,Yd=jd?Is:Ye;Yd(Ud.display.scroller,'dragstart',Xd.start),Yd(Ud.display.scroller,'dragenter',Xd.enter),Yd(Ud.display.scroller,'dragover',Xd.over),Yd(Ud.display.scroller,'dragleave',Xd.leave),Yd(Ud.display.scroller,'drop',Xd.drop)}}function Ll(Ud){Ud.options.lineWrapping?(L(Ud.display.wrapper,'CodeMirror-wrap'),Ud.display.sizer.style.minWidth='',Ud.display.sizerWidth=null):(xs(Ud.display.wrapper,'CodeMirror-wrap'),Ue(Ud)),qi(Ud),Vn(Ud),Oi(Ud),setTimeout(function(){return Mn(Ud)},100)}function kl(Ud,jd){var Vd=this;if(!(this instanceof kl))return new kl(Ud,jd);this.options=jd=jd?O(jd):{},O(Pd,jd,!1),ar(jd);var Kd=jd.value;'string'==typeof Kd?Kd=new vd(Kd,jd.mode,null,jd.lineSeparator,jd.direction):jd.mode&&(Kd.modeOption=jd.mode),this.doc=Kd;var Xd=new kl.inputStyles[jd.inputStyle](this),Yd=this.display=new V(Ud,Kd,Xd);for(var _d in Yd.wrapper.CodeMirror=this,dr(this),bl(this),jd.lineWrapping&&(this.display.wrapper.className+=' CodeMirror-wrap'),Dn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Cs,keySeq:null,specialChars:null},jd.autofocus&&!ps&&Yd.input.focus(),Ql&&11>Jl&&setTimeout(function(){return Vd.display.input.reset(!0)},20),Tl(this),Do(),Hn(this),this.curOp.forceUpdate=!0,kr(this,Kd),jd.autofocus&&!ps||this.hasFocus()?setTimeout(N(an,this),20):pn(this),Id)Id.hasOwnProperty(_d)&&Id[_d](Vd,jd[_d],Fd);fn(this),jd.finishInit&&jd.finishInit(this);for(var qd=0;qd<zd.length;++qd)zd[qd](Vd);Fn(this),es&&jd.lineWrapping&&'optimizelegibility'==getComputedStyle(Yd.lineDiv).textRendering&&(Yd.lineDiv.style.textRendering='auto')}function Tl(Ud){function jd(){Xd.activeTouch&&(Yd=setTimeout(function(){return Xd.activeTouch=null},1e3),_d=Xd.activeTouch,_d.end=+new Date)}function Vd(Zd){if(1!=Zd.touches.length)return!1;var Qd=Zd.touches[0];return 1>=Qd.radiusX&&1>=Qd.radiusY}function Kd(Zd,Qd){if(null==Qd.left)return!0;var Jd=Qd.left-Zd.left,ea=Qd.top-Zd.top;return 400<Jd*Jd+ea*ea}var Xd=Ud.display;Is(Xd.scroller,'mousedown',$n(Ud,dl)),Ql&&11>Jl?Is(Xd.scroller,'dblclick',$n(Ud,function(Zd){if(!Ze(Ud,Zd)){var Qd=Zi(Ud,Zd);if(!(!Qd||yl(Ud,Zd)||di(Ud.display,Zd))){tt(Zd);var Jd=Ud.findWordAt(Qd);$r(Ud.doc,Jd.anchor,Jd.head)}}})):Is(Xd.scroller,'dblclick',function(Zd){return Ze(Ud,Zd)||tt(Zd)}),ys||Is(Xd.scroller,'contextmenu',function(Zd){return xl(Ud,Zd)});var _d={end:0},Yd;Is(Xd.scroller,'touchstart',function(Zd){if(!Ze(Ud,Zd)&&!Vd(Zd)&&!yl(Ud,Zd)){Xd.input.ensurePolled(),clearTimeout(Yd);var Qd=+new Date;Xd.activeTouch={start:Qd,moved:!1,prev:300>=Qd-_d.end?_d:null},1==Zd.touches.length&&(Xd.activeTouch.left=Zd.touches[0].pageX,Xd.activeTouch.top=Zd.touches[0].pageY)}}),Is(Xd.scroller,'touchmove',function(){Xd.activeTouch&&(Xd.activeTouch.moved=!0)}),Is(Xd.scroller,'touchend',function(Zd){var Qd=Xd.activeTouch;if(Qd&&!di(Xd,Zd)&&null!=Qd.left&&!Qd.moved&&300>new Date-Qd.start){var Jd=Ud.coordsChar(Xd.activeTouch,'page'),ea;ea=!Qd.prev||Kd(Qd,Qd.prev)?new ud(Jd,Jd):!Qd.prev.prev||Kd(Qd,Qd.prev.prev)?Ud.findWordAt(Jd):new ud(ee(Jd.line,0),ae(Ud.doc,ee(Jd.line+1,0))),Ud.setSelection(ea.anchor,ea.head),Ud.focus(),tt(Zd)}jd()}),Is(Xd.scroller,'touchcancel',jd),Is(Xd.scroller,'scroll',function(){Xd.scroller.clientHeight&&(Tn(Ud,Xd.scroller.scrollTop),On(Ud,Xd.scroller.scrollLeft,!0),qe(Ud,'scroll',Ud))}),Is(Xd.scroller,'mousewheel',function(Zd){return hr(Ud,Zd)}),Is(Xd.scroller,'DOMMouseScroll',function(Zd){return hr(Ud,Zd)}),Is(Xd.wrapper,'scroll',function(){return Xd.wrapper.scrollTop=Xd.wrapper.scrollLeft=0}),Xd.dragFunctions={enter:function(Zd){Ze(Ud,Zd)||ot(Zd)},over:function(Zd){Ze(Ud,Zd)||(Ao(Ud,Zd),ot(Zd))},start:function(Zd){return Oo(Ud,Zd)},drop:$n(Ud,No),leave:function(Zd){Ze(Ud,Zd)||Mo(Ud)}};var qd=Xd.input.getField();Is(qd,'keyup',function(Zd){return ol.call(Ud,Zd)}),Is(qd,'keydown',$n(Ud,il)),Is(qd,'keypress',$n(Ud,ll)),Is(qd,'focus',function(Zd){return an(Ud,Zd)}),Is(qd,'blur',function(Zd){return pn(Ud,Zd)})}function Nl(Ud,jd,Vd,Kd){var Xd=Ud.doc,Yd;null==Vd&&(Vd='add'),'smart'==Vd&&(Xd.mode.indent?Yd=St(Ud,jd).state:Vd='prev');var _d=Ud.options.tabSize,qd=K(Xd,jd),Zd=A(qd.text,null,_d);qd.stateAfter&&(qd.stateAfter=null);var Qd=qd.text.match(/^\s*/)[0],Jd;if(!Kd&&!/\S/.test(qd.text))Jd=0,Vd='not';else if('smart'==Vd&&(Jd=Xd.mode.indent(Yd,qd.text.slice(Qd.length),qd.text),Jd==Ls||150<Jd)){if(!Kd)return;Vd='prev'}'prev'==Vd?jd>Xd.first?Jd=A(K(Xd,jd-1).text,null,_d):Jd=0:'add'==Vd?Jd=Zd+Ud.options.indentUnit:'subtract'==Vd?Jd=Zd-Ud.options.indentUnit:'number'==typeof Vd&&(Jd=Zd+Vd),Jd=Math.max(0,Jd);var ea='',ta=0;if(Ud.options.indentWithTabs)for(var ia=Math.floor(Jd/_d);ia;--ia)ta+=_d,ea+='\t';if(ta<Jd&&(ea+=D(Jd-ta)),ea!=Qd)return uo(Xd,ea,ee(jd,0),ee(jd,Qd.length),'+input'),qd.stateAfter=null,!0;for(var na=0,ra;na<Xd.sel.ranges.length;na++)if(ra=Xd.sel.ranges[na],ra.head.line==jd&&ra.head.ch<Qd.length){var oa=ee(jd,Qd.length);jr(Xd,na,new ud(oa,oa));break}}function Ol(Ud){Ed=Ud}function Al(Ud,jd,Vd,Kd,Xd){var Yd=Ud.doc;Ud.display.shift=!1,Kd||(Kd=Yd.sel);var _d=Ud.state.pasteIncoming||'paste'==Xd,qd=Bs(jd),Zd=null;if(_d&&1<Kd.ranges.length)if(!(Ed&&Ed.text.join('\n')==jd))qd.length==Kd.ranges.length&&Ud.options.pasteLinesPerSelection&&(Zd=F(qd,function(oa){return[oa]}));else if(0==Kd.ranges.length%Ed.text.length){Zd=[];for(var Qd=0;Qd<Ed.text.length;Qd++)Zd.push(Yd.splitLines(Ed.text[Qd]))}for(var ea=Kd.ranges.length-1,Jd;0<=ea;ea--){var ta=Kd.ranges[ea],ia=ta.from(),na=ta.to();ta.empty()&&(Vd&&0<Vd?ia=ee(ia.line,ia.ch-Vd):Ud.state.overwrite&&!_d?na=ee(na.line,Math.min(K(Yd,na.line).text.length,na.ch+H(qd).length)):Ed&&Ed.lineWise&&Ed.text.join('\n')==jd&&(ia=na=ee(ia.line,0))),Jd=Ud.curOp.updateInput;var ra={from:ia,to:na,text:Zd?Zd[ea%Zd.length]:qd,origin:Xd||(_d?'paste':Ud.state.cutIncoming?'cut':'+input')};lo(Ud.doc,ra),Xt(Ud,'inputRead',Ud,ra)}jd&&!_d&&Wl(Ud,jd),Cn(Ud),Ud.curOp.updateInput=Jd,Ud.curOp.typing=!0,Ud.state.pasteIncoming=Ud.state.cutIncoming=!1}function Ml(Ud,jd){var Vd=Ud.clipboardData&&Ud.clipboardData.getData('Text');if(Vd)return Ud.preventDefault(),jd.isReadOnly()||jd.options.disableInput||Gn(jd,function(){return Al(jd,Vd,0,null,'paste')}),!0}function Wl(Ud,jd){if(Ud.options.electricChars&&Ud.options.smartIndent)for(var Vd=Ud.doc.sel,Kd=Vd.ranges.length-1,Xd;0<=Kd;Kd--)if(Xd=Vd.ranges[Kd],!(100<Xd.head.ch||Kd&&Vd.ranges[Kd-1].head.line==Xd.head.line)){var Yd=Ud.getModeAt(Xd.head),_d=!1;if(Yd.electricChars){for(var qd=0;qd<Yd.electricChars.length;qd++)if(-1<jd.indexOf(Yd.electricChars.charAt(qd))){_d=Nl(Ud,Xd.head.line,'smart');break}}else Yd.electricInput&&Yd.electricInput.test(K(Ud.doc,Xd.head.line).text.slice(0,Xd.head.ch))&&(_d=Nl(Ud,Xd.head.line,'smart'));_d&&Xt(Ud,'electricInput',Ud,Xd.head.line)}}function Dl(Ud){for(var jd=[],Vd=[],Kd=0;Kd<Ud.doc.sel.ranges.length;Kd++){var Xd=Ud.doc.sel.ranges[Kd].head.line,Yd={anchor:ee(Xd,0),head:ee(Xd+1,0)};Vd.push(Yd),jd.push(Ud.getRange(Yd.anchor,Yd.head))}return{text:jd,ranges:Vd}}function Hl(Ud,jd){Ud.setAttribute('autocorrect','off'),Ud.setAttribute('autocapitalize','off'),Ud.setAttribute('spellcheck',!!jd)}function Fl(){var Ud=u('textarea',null,null,'position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none'),jd=u('div',[Ud],null,'overflow: hidden; position: relative; width: 3px; height: 0px;');return es?Ud.style.width='1000px':Ud.setAttribute('wrap','off'),ss&&(Ud.style.border='1px solid black'),Hl(Ud),jd}function Il(Ud,jd,Vd,Kd,Xd){function Yd(){var la=jd.line+Vd;return la<Ud.first||la>=Ud.first+Ud.size?!1:(jd=new ee(la,jd.ch,jd.sticky),Qd=K(Ud,la))}function _d(la){var sa;if(sa=Xd?Ko(Ud.cm,Qd,jd,Vd):jo(Qd,jd,Vd),null!=sa)jd=sa;else if(!la&&Yd())jd=Vo(Xd,Ud.cm,Qd,jd.line,Vd);else return!1;return!0}var qd=jd,Zd=Vd,Qd=K(Ud,jd.line);if('char'==Kd)_d();else if('column'==Kd)_d(!0);else if('word'==Kd||'group'==Kd)for(var Jd=null,ea='group'==Kd,ta=Ud.cm&&Ud.cm.getHelper(jd,'wordChars'),ia=!0;;ia=!1){if(0>Vd&&!_d(!ia))break;var na=Qd.text.charAt(jd.ch)||'\n',ra=R(na,ta)?'w':ea&&'\n'==na?'n':!ea||/\s/.test(na)?null:'p';if(!ea||ia||ra||(ra='s'),Jd&&Jd!=ra){0>Vd&&(Vd=1,_d(),jd.sticky='after');break}if(ra&&(Jd=ra),0<Vd&&!_d(!ia))break}var oa=eo(Ud,jd,qd,Zd,!0);return re(qd,oa)&&(oa.hitSide=!0),oa}function zl(Ud,jd,Vd,Kd){var Xd=Ud.doc,Yd=jd.left,_d;if('page'==Kd){var qd=Math.min(Ud.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Zd=Math.max(qd-.5*Vi(Ud.display),3);_d=(0<Vd?jd.bottom:jd.top)+Vd*Zd}else'line'==Kd&&(_d=0<Vd?jd.bottom+3:jd.top-3);for(var Qd;;){if(Qd=Ei(Ud,Yd,_d),!Qd.outside)break;if(0>Vd?0>=_d:_d>=Xd.height){Qd.hitSide=!0;break}_d+=5*Vd}return Qd}function El(Ud,jd){var Vd=vi(Ud,jd.line);if(!Vd||Vd.hidden)return null;var Kd=K(Ud.doc,jd.line),Xd=mi(Vd,Kd,jd.line),Yd=Ke(Kd,Ud.doc.direction),_d='left';if(Yd){var qd=Ve(Yd,jd.ch);_d=qd%2?'right':'left'}var Zd=wi(Xd.map,jd.ch,_d);return Zd.offset='right'==Zd.collapse?Zd.end:Zd.start,Zd}function Rl(Ud){for(var jd=Ud;jd;jd=jd.parentNode)if(/CodeMirror-gutter-wrapper/.test(jd.className))return!0;return!1}function Bl(Ud,jd){return jd&&(Ud.bad=!0),Ud}function Gl(Ud,jd,Vd,Kd,Xd){function Yd(ia){return function(na){return na.id==ia}}function _d(){Jd&&(Qd+=ea,ta&&(Qd+=ea),Jd=ta=!1)}function qd(ia){ia&&(_d(),Qd+=ia)}function Zd(ia){if(1==ia.nodeType){var na=ia.getAttribute('cm-text');if(na)return void qd(na);var ra=ia.getAttribute('cm-marker'),oa;if(ra){var la=Ud.findMarks(ee(Kd,0),ee(Xd+1,0),Yd(+ra));return void(la.length&&(oa=la[0].find(0))&&qd(X(Ud.doc,oa.from,oa.to).join(ea)))}if('false'==ia.getAttribute('contenteditable'))return;var sa=/^(pre|div|p|li|table|br)$/i.test(ia.nodeName);if(!/^br$/i.test(ia.nodeName)&&0==ia.textContent.length)return;sa&&_d();for(var da=0;da<ia.childNodes.length;da++)Zd(ia.childNodes[da]);/^(pre|p)$/i.test(ia.nodeName)&&(ta=!0),sa&&(Jd=!0)}else 3==ia.nodeType&&qd(ia.nodeValue.replace(/\u200b/g,'').replace(/\u00a0/g,' '))}for(var Qd='',Jd=!1,ea=Ud.doc.lineSeparator(),ta=!1;;){if(Zd(jd),jd==Vd)break;jd=jd.nextSibling,ta=!1}return Qd}function $l(Ud,jd,Vd){var Kd;if(jd==Ud.display.lineDiv){if(Kd=Ud.display.lineDiv.childNodes[Vd],!Kd)return Bl(Ud.clipPos(ee(Ud.display.viewTo-1)),!0);jd=null,Vd=0}else for(Kd=jd;;Kd=Kd.parentNode){if(!Kd||Kd==Ud.display.lineDiv)return null;if(Kd.parentNode&&Kd.parentNode==Ud.display.lineDiv)break}for(var Xd=0,Yd;Xd<Ud.display.view.length;Xd++)if(Yd=Ud.display.view[Xd],Yd.node==Kd)return Ul(Yd,jd,Vd)}function Ul(Ud,jd,Vd){function Kd(oa,la,sa){for(var da=-1,aa;da<(Jd?Jd.length:0);da++){aa=0>da?Qd.map:Jd[da];for(var pa=0,ca;pa<aa.length;pa+=3)if(ca=aa[pa+2],ca==oa||ca==la){var ha=q(0>da?Ud.line:Ud.rest[da]),ua=aa[pa]+sa;return(0>sa||ca!=oa)&&(ua=aa[pa+(sa?1:0)]),ee(ha,ua)}}}var Xd=Ud.text.firstChild,Yd=!1;if(!jd||!C(Xd,jd))return Bl(ee(q(Ud.line),0),!0);if(jd==Xd&&(Yd=!0,jd=Xd.childNodes[Vd],Vd=0,!jd)){var _d=Ud.rest?H(Ud.rest):Ud.line;return Bl(ee(q(_d),_d.text.length),Yd)}var qd=3==jd.nodeType?jd:null,Zd=jd;for(qd||1!=jd.childNodes.length||3!=jd.firstChild.nodeType||(qd=jd.firstChild,Vd&&(Vd=qd.nodeValue.length));Zd.parentNode!=Xd;)Zd=Zd.parentNode;var Qd=Ud.measure,Jd=Qd.maps,ea=Kd(qd,Zd,Vd);if(ea)return Bl(ea,Yd);for(var ta=Zd.nextSibling,ia=qd?qd.nodeValue.length-Vd:0;ta;ta=ta.nextSibling){if(ea=Kd(ta,ta.firstChild,0),ea)return Bl(ee(ea.line,ea.ch-ia),Yd);ia+=ta.textContent.length}for(var na=Zd.previousSibling,ra=Vd;na;na=na.previousSibling){if(ea=Kd(na,na.firstChild,-1),ea)return Bl(ee(ea.line,ea.ch+ra),Yd);ra+=na.textContent.length}}var Kl=navigator.userAgent,Xl=navigator.platform,Yl=/gecko\/\d/i.test(Kl),_l=/MSIE \d/.test(Kl),ql=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kl),Zl=/Edge\/(\d+)/.exec(Kl),Ql=_l||ql||Zl,Jl=Ql&&(_l?document.documentMode||6:+(Zl||ql)[1]),es=!Zl&&/WebKit\//.test(Kl),ts=es&&/Qt\/\d+\.\d+/.test(Kl),is=!Zl&&/Chrome\//.test(Kl),ns=/Opera\//.test(Kl),rs=/Apple Computer/.test(navigator.vendor),os=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Kl),ls=/PhantomJS/.test(Kl),ss=!Zl&&/AppleWebKit/.test(Kl)&&/Mobile\/\w+/.test(Kl),ds=/Android/.test(Kl),ps=ss||ds||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Kl),cs=ss||/Mac/.test(Xl),hs=/\bCrOS\b/.test(Kl),us=/win/i.test(Xl),gs=ns&&Kl.match(/Version\/(\d*\.\d*)/);gs&&(gs=+gs[1]),gs&&15<=gs&&(ns=!1,es=!0);var fs=cs&&(ts||ns&&(null==gs||12.11>gs)),ys=Yl||Ql&&9<=Jl,xs=function(Ud,jd){var Vd=Ud.className,Kd=t(jd).exec(Vd);if(Kd){var Xd=Vd.slice(Kd.index+Kd[0].length);Ud.className=Vd.slice(0,Kd.index)+(Xd?Kd[1]+Xd:'')}},vs;vs=document.createRange?function(Ud,jd,Vd,Kd){var Xd=document.createRange();return Xd.setEnd(Kd||Ud,Vd),Xd.setStart(Ud,jd),Xd}:function(Ud,jd,Vd){var Kd=document.body.createTextRange();try{Kd.moveToElementText(Ud.parentNode)}catch(Xd){return Kd}return Kd.collapse(!0),Kd.moveEnd('character',Vd),Kd.moveStart('character',jd),Kd};var bs=function(Ud){Ud.select()};ss?bs=function(Ud){Ud.selectionStart=0,Ud.selectionEnd=Ud.value.length}:Ql&&(bs=function(Ud){try{Ud.select()}catch(jd){}});var Cs=function(){this.id=null};Cs.prototype.set=function(Ud,jd){clearTimeout(this.id),this.id=setTimeout(jd,Ud)};var Ss=30,Ls={toString:function(){return'CodeMirror.Pass'}},ks={scroll:!1},Ts={origin:'*mouse'},Ns={origin:'+move'},Os=[''],As=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ms=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Ws=!1,Ds=!1,Hs=null,Fs=function(){function Ud(Qd){return 247>=Qd?'bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN'.charAt(Qd):1424<=Qd&&1524>=Qd?'R':1536<=Qd&&1785>=Qd?'nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111'.charAt(Qd-1536):1774<=Qd&&2220>=Qd?'r':8192<=Qd&&8203>=Qd?'w':8204==Qd?'b':'L'}function jd(Qd,Jd,ea){this.level=Qd,this.from=Jd,this.to=ea}var Xd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Yd=/[stwN]/,_d=/[LRr]/,qd=/[Lb1n]/,Zd=/[1n]/;return function(Qd,Jd){var ea='ltr'==Jd?'L':'R';if(0==Qd.length||'ltr'==Jd&&!Xd.test(Qd))return!1;for(var ta=Qd.length,ia=[],na=0;na<ta;++na)ia.push(Ud(Qd.charCodeAt(na)));for(var ra=0,oa=ea,la;ra<ta;++ra)la=ia[ra],'m'==la?ia[ra]=oa:oa=la;for(var sa=0,da=ea,aa;sa<ta;++sa)aa=ia[sa],'1'==aa&&'r'==da?ia[sa]='n':_d.test(aa)&&(da=aa,'r'==aa&&(ia[sa]='R'));for(var pa=1,ca=ia[0],ha;pa<ta-1;++pa)ha=ia[pa],'+'==ha&&'1'==ca&&'1'==ia[pa+1]?ia[pa]='1':','==ha&&ca==ia[pa+1]&&('1'==ca||'n'==ca)&&(ia[pa]=ca),ca=ha;for(var ua=0,ga;ua<ta;++ua)if(ga=ia[ua],','==ga)ia[ua]='N';else if('%'==ga){var fa=void 0;for(fa=ua+1;fa<ta&&'%'==ia[fa];++fa);for(var ma=ua&&'!'==ia[ua-1]||fa<ta&&'1'==ia[fa]?'1':'N',ya=ua;ya<fa;++ya)ia[ya]=ma;ua=fa-1}for(var xa=0,va=ea,ba;xa<ta;++xa)ba=ia[xa],'L'==va&&'1'==ba?ia[xa]='L':_d.test(ba)&&(va=ba);for(var Ca=0;Ca<ta;++Ca)if(Yd.test(ia[Ca])){var wa=void 0;for(wa=Ca+1;wa<ta&&Yd.test(ia[wa]);++wa);for(var Sa='L'==(Ca?ia[Ca-1]:ea),La='L'==(wa<ta?ia[wa]:ea),ka=Sa==La?Sa?'L':'R':ea,Ta=Ca;Ta<wa;++Ta)ia[Ta]=ka;Ca=wa-1}for(var Na=[],Aa=0,Oa;Aa<ta;)if(qd.test(ia[Aa])){var Ma=Aa;for(++Aa;Aa<ta&&qd.test(ia[Aa]);++Aa);Na.push(new jd(0,Ma,Aa))}else{var Wa=Aa,Da=Na.length;for(++Aa;Aa<ta&&'L'!=ia[Aa];++Aa);for(var Ha=Wa;Ha<Aa;)if(Zd.test(ia[Ha])){Wa<Ha&&Na.splice(Da,0,new jd(1,Wa,Ha));var Fa=Ha;for(++Ha;Ha<Aa&&Zd.test(ia[Ha]);++Ha);Na.splice(Da,0,new jd(2,Fa,Ha)),Wa=Ha}else++Ha;Wa<Aa&&Na.splice(Da,0,new jd(1,Wa,Aa))}return'ltr'==Jd&&(1==Na[0].level&&(Oa=Qd.match(/^\s+/))&&(Na[0].from=Oa[0].length,Na.unshift(new jd(0,0,Oa[0].length))),1==H(Na).level&&(Oa=Qd.match(/\s+$/))&&(H(Na).to-=Oa[0].length,Na.push(new jd(0,ta-Oa[0].length,ta)))),'rtl'==Jd?Na.reverse():Na}}(),Ps=[],Is=function(Ud,jd,Vd){if(Ud.addEventListener)Ud.addEventListener(jd,Vd,!1);else if(Ud.attachEvent)Ud.attachEvent('on'+jd,Vd);else{var Kd=Ud._handlers||(Ud._handlers={});Kd[jd]=(Kd[jd]||Ps).concat(Vd)}},zs=function(){if(Ql&&9>Jl)return!1;var Ud=u('div');return'draggable'in Ud||'dragDrop'in Ud}(),Bs=3=='\n\nb'.split(/\n/).length?function(Ud){return Ud.split(/\r\n?|\n/)}:function(Ud){for(var jd=0,Vd=[],Kd=Ud.length,Xd;jd<=Kd;){Xd=Ud.indexOf('\n',jd),-1==Xd&&(Xd=Ud.length);var Yd=Ud.slice(jd,'\r'==Ud.charAt(Xd-1)?Xd-1:Xd),_d=Yd.indexOf('\r');-1==_d?(Vd.push(Yd),jd=Xd+1):(Vd.push(Yd.slice(0,_d)),jd+=_d+1)}return Vd},Gs=window.getSelection?function(Ud){try{return Ud.selectionStart!=Ud.selectionEnd}catch(jd){return!1}}:function(Ud){var jd;try{jd=Ud.ownerDocument.selection.createRange()}catch(Vd){}return jd&&jd.parentElement()==Ud&&0!=jd.compareEndPoints('StartToEnd',jd)},$s=function(){var Ud=u('div');return!!('oncopy'in Ud)||(Ud.setAttribute('oncopy','return;'),'function'==typeof Ud.oncopy)}(),Us=null,js={},Vs={},Ks={},Xs=function(Ud,jd,Vd){this.pos=this.start=0,this.string=Ud,this.tabSize=jd||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=Vd},Es,Rs;Xs.prototype.eol=function(){return this.pos>=this.string.length},Xs.prototype.sol=function(){return this.pos==this.lineStart},Xs.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xs.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xs.prototype.eat=function(Ud){var jd=this.string.charAt(this.pos),Vd;if(Vd='string'==typeof Ud?jd==Ud:jd&&(Ud.test?Ud.test(jd):Ud(jd)),Vd)return++this.pos,jd},Xs.prototype.eatWhile=function(Ud){for(var jd=this.pos;this.eat(Ud););return this.pos>jd},Xs.prototype.eatSpace=function(){for(var Ud=this,jd=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++Ud.pos;return this.pos>jd},Xs.prototype.skipToEnd=function(){this.pos=this.string.length},Xs.prototype.skipTo=function(Ud){var jd=this.string.indexOf(Ud,this.pos);if(-1<jd)return this.pos=jd,!0},Xs.prototype.backUp=function(Ud){this.pos-=Ud},Xs.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=A(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Xs.prototype.indentation=function(){return A(this.string,null,this.tabSize)-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Xs.prototype.match=function(Ud,jd,Vd){if('string'==typeof Ud){var Kd=function(_d){return Vd?_d.toLowerCase():_d},Xd=this.string.substr(this.pos,Ud.length);if(Kd(Xd)==Kd(Ud))return!1!==jd&&(this.pos+=Ud.length),!0}else{var Yd=this.string.slice(this.pos).match(Ud);return Yd&&0<Yd.index?null:(Yd&&!1!==jd&&(this.pos+=Yd[0].length),Yd)}},Xs.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xs.prototype.hideFirstChars=function(Ud,jd){this.lineStart+=Ud;try{return jd()}finally{this.lineStart-=Ud}},Xs.prototype.lookAhead=function(Ud){var jd=this.lineOracle;return jd&&jd.lookAhead(Ud)},Xs.prototype.baseToken=function(){var Ud=this.lineOracle;return Ud&&Ud.baseToken(this.pos)};var Ys=function(Ud,jd){this.state=Ud,this.lookAhead=jd},_s=function(Ud,jd,Vd,Kd){this.state=jd,this.doc=Ud,this.line=Vd,this.maxLookAhead=Kd||0,this.baseTokens=null,this.baseTokenPos=1};_s.prototype.lookAhead=function(Ud){var jd=this.doc.getLine(this.line+Ud);return null!=jd&&Ud>this.maxLookAhead&&(this.maxLookAhead=Ud),jd},_s.prototype.baseToken=function(Ud){var jd=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=Ud;)jd.baseTokenPos+=2;var Vd=this.baseTokens[this.baseTokenPos+1];return{type:Vd&&Vd.replace(/( |^)overlay .*/,''),size:this.baseTokens[this.baseTokenPos]-Ud}},_s.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},_s.fromSaved=function(Ud,jd,Vd){return jd instanceof Ys?new _s(Ud,xt(Ud.mode,jd.state),Vd,jd.lookAhead):new _s(Ud,xt(Ud.mode,jd),Vd)},_s.prototype.save=function(Ud){var jd=!1===Ud?this.state:xt(this.doc.mode,this.state);return 0<this.maxLookAhead?new Ys(jd,this.maxLookAhead):jd};var qs=function(Ud,jd,Vd){this.start=Ud.start,this.end=Ud.pos,this.string=Ud.current(),this.type=jd||null,this.state=Vd},Zs=function(Ud,jd,Vd){this.text=Ud,ke(this,jd),this.height=Vd?Vd(this):1};Zs.prototype.lineNo=function(){return q(this)},et(Zs);var Qs={},Js={},ed=null,td=null,nd={left:0,right:0,top:0,bottom:0},od=function(Ud,jd,Vd){this.cm=Vd;var Kd=this.vert=u('div',[u('div',null,null,'min-width: 1px')],'CodeMirror-vscrollbar'),Xd=this.horiz=u('div',[u('div',null,null,'height: 100%; min-height: 1px')],'CodeMirror-hscrollbar');Kd.tabIndex=Xd.tabIndex=-1,Ud(Kd),Ud(Xd),Is(Kd,'scroll',function(){Kd.clientHeight&&jd(Kd.scrollTop,'vertical')}),Is(Xd,'scroll',function(){Xd.clientWidth&&jd(Xd.scrollLeft,'horizontal')}),this.checkedZeroWidth=!1,Ql&&8>Jl&&(this.horiz.style.minHeight=this.vert.style.minWidth='18px')},rd;od.prototype.update=function(Ud){var jd=Ud.scrollWidth>Ud.clientWidth+1,Vd=Ud.scrollHeight>Ud.clientHeight+1,Kd=Ud.nativeBarWidth;if(Vd){this.vert.style.display='block',this.vert.style.bottom=jd?Kd+'px':'0';var Xd=Ud.viewHeight-(jd?Kd:0);this.vert.firstChild.style.height=Math.max(0,Ud.scrollHeight-Ud.clientHeight+Xd)+'px'}else this.vert.style.display='',this.vert.firstChild.style.height='0';if(jd){this.horiz.style.display='block',this.horiz.style.right=Vd?Kd+'px':'0',this.horiz.style.left=Ud.barLeft+'px';var Yd=Ud.viewWidth-Ud.barLeft-(Vd?Kd:0);this.horiz.firstChild.style.width=Math.max(0,Ud.scrollWidth-Ud.clientWidth+Yd)+'px'}else this.horiz.style.display='',this.horiz.firstChild.style.width='0';return!this.checkedZeroWidth&&0<Ud.clientHeight&&(0==Kd&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:Vd?Kd:0,bottom:jd?Kd:0}},od.prototype.setScrollLeft=function(Ud){this.horiz.scrollLeft!=Ud&&(this.horiz.scrollLeft=Ud),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,'horiz')},od.prototype.setScrollTop=function(Ud){this.vert.scrollTop!=Ud&&(this.vert.scrollTop=Ud),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,'vert')},od.prototype.zeroWidthHack=function(){var Ud=cs&&!os?'12px':'18px';this.horiz.style.height=this.vert.style.width=Ud,this.horiz.style.pointerEvents=this.vert.style.pointerEvents='none',this.disableHoriz=new Cs,this.disableVert=new Cs},od.prototype.enableZeroWidthBar=function(Ud,jd,Vd){function Kd(){var Xd=Ud.getBoundingClientRect(),Yd='vert'==Vd?document.elementFromPoint(Xd.right-1,(Xd.top+Xd.bottom)/2):document.elementFromPoint((Xd.right+Xd.left)/2,Xd.bottom-1);Yd==Ud?jd.set(1e3,Kd):Ud.style.pointerEvents='none'}Ud.style.pointerEvents='auto',jd.set(1e3,Kd)},od.prototype.clear=function(){var Ud=this.horiz.parentNode;Ud.removeChild(this.horiz),Ud.removeChild(this.vert)};var ld=function(){};ld.prototype.update=function(){return{bottom:0,right:0}},ld.prototype.setScrollLeft=function(){},ld.prototype.setScrollTop=function(){},ld.prototype.clear=function(){};var sd={native:od,'null':ld},dd=0,ad=function(Ud,jd,Vd){var Kd=Ud.display;this.viewport=jd,this.visible=un(Kd,Ud.doc,jd),this.editorIsHidden=!Kd.wrapper.offsetWidth,this.wrapperHeight=Kd.wrapper.clientHeight,this.wrapperWidth=Kd.wrapper.clientWidth,this.oldDisplayWidth=ui(Ud),this.force=Vd,this.dims=Xi(Ud),this.events=[]};ad.prototype.signal=function(Ud,jd){Je(Ud,jd)&&this.events.push(arguments)},ad.prototype.finish=function(){for(var Ud=this,jd=0;jd<this.events.length;jd++)qe.apply(null,Ud.events[jd])};var pd=0,cd=null;Ql?cd=-.53:Yl?cd=15:is?cd=-.7:rs&&(cd=-1/3);var hd=function(Ud,jd){this.ranges=Ud,this.primIndex=jd};hd.prototype.primary=function(){return this.ranges[this.primIndex]},hd.prototype.equals=function(Ud){var jd=this;if(Ud==this)return!0;if(Ud.primIndex!=this.primIndex||Ud.ranges.length!=this.ranges.length)return!1;for(var Vd=0;Vd<this.ranges.length;Vd++){var Kd=jd.ranges[Vd],Xd=Ud.ranges[Vd];if(!re(Kd.anchor,Xd.anchor)||!re(Kd.head,Xd.head))return!1}return!0},hd.prototype.deepCopy=function(){for(var Ud=this,jd=[],Vd=0;Vd<this.ranges.length;Vd++)jd[Vd]=new ud(oe(Ud.ranges[Vd].anchor),oe(Ud.ranges[Vd].head));return new hd(jd,this.primIndex)},hd.prototype.somethingSelected=function(){for(var Ud=this,jd=0;jd<this.ranges.length;jd++)if(!Ud.ranges[jd].empty())return!0;return!1},hd.prototype.contains=function(Ud,jd){var Vd=this;jd||(jd=Ud);for(var Kd=0,Xd;Kd<this.ranges.length;Kd++)if(Xd=Vd.ranges[Kd],0<=ne(jd,Xd.from())&&0>=ne(Ud,Xd.to()))return Kd;return-1};var ud=function(Ud,jd){this.anchor=Ud,this.head=jd};ud.prototype.from=function(){return se(this.anchor,this.head)},ud.prototype.to=function(){return le(this.anchor,this.head)},ud.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(jd,Vd){for(var Kd=this,Xd=jd,_d;Xd<jd+Vd;++Xd)_d=Kd.lines[Xd],Kd.height-=_d.height,Ht(_d),Xt(_d,'delete');this.lines.splice(jd,Vd)},collapse:function(jd){jd.push.apply(jd,this.lines)},insertInner:function(jd,Vd,Kd){var Xd=this;this.height+=Kd,this.lines=this.lines.slice(0,jd).concat(Vd).concat(this.lines.slice(jd));for(var Yd=0;Yd<Vd.length;++Yd)Vd[Yd].parent=Xd},iterN:function(jd,Vd,Kd){for(var Xd=this,Yd=jd+Vd;jd<Yd;++jd)if(Kd(Xd.lines[jd]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(jd,Vd){var Kd=this;this.size-=Vd;for(var Xd=0;Xd<this.children.length;++Xd){var Yd=Kd.children[Xd],_d=Yd.chunkSize();if(jd<_d){var qd=Math.min(Vd,_d-jd),Zd=Yd.height;if(Yd.removeInner(jd,qd),Kd.height-=Zd-Yd.height,_d==qd&&(Kd.children.splice(Xd--,1),Yd.parent=null),0==(Vd-=qd))break;jd=0}else jd-=_d}if(25>this.size-Vd&&(1<this.children.length||!(this.children[0]instanceof xo))){var Qd=[];this.collapse(Qd),this.children=[new xo(Qd)],this.children[0].parent=this}},collapse:function(jd){for(var Vd=this,Kd=0;Kd<this.children.length;++Kd)Vd.children[Kd].collapse(jd)},insertInner:function(jd,Vd,Kd){var Xd=this;this.size+=Vd.length,this.height+=Kd;for(var Yd=0;Yd<this.children.length;++Yd){var _d=Xd.children[Yd],qd=_d.chunkSize();if(jd<=qd){if(_d.insertInner(jd,Vd,Kd),_d.lines&&50<_d.lines.length){for(var Zd=_d.lines.length%25+25,Qd=Zd,Jd;Qd<_d.lines.length;)Jd=new xo(_d.lines.slice(Qd,Qd+=25)),_d.height-=Jd.height,Xd.children.splice(++Yd,0,Jd),Jd.parent=Xd;_d.lines=_d.lines.slice(0,Zd),Xd.maybeSpill()}break}jd-=qd}},maybeSpill:function(){if(!(10>=this.children.length)){var jd=this;do{var Vd=jd.children.splice(jd.children.length-5,5),Kd=new vo(Vd);if(!jd.parent){var Xd=new vo(jd.children);Xd.parent=jd,jd.children=[Xd,Kd],jd=Xd}else{jd.size-=Kd.size,jd.height-=Kd.height;var Yd=M(jd.parent.children,jd);jd.parent.children.splice(Yd+1,0,Kd)}Kd.parent=jd.parent}while(10<jd.children.length);jd.parent.maybeSpill()}},iterN:function(jd,Vd,Kd){for(var Xd=this,Yd=0;Yd<this.children.length;++Yd){var _d=Xd.children[Yd],qd=_d.chunkSize();if(jd<qd){var Zd=Math.min(Vd,qd-jd);if(_d.iterN(jd,Zd,Kd))return!0;if(0==(Vd-=Zd))break;jd=0}else jd-=qd}}};var gd=function(Ud,jd,Vd){var Kd=this;if(Vd)for(var Xd in Vd)Vd.hasOwnProperty(Xd)&&(Kd[Xd]=Vd[Xd]);this.doc=Ud,this.node=jd};gd.prototype.clear=function(){var Ud=this,jd=this.doc.cm,Vd=this.line.widgets,Kd=this.line,Xd=q(Kd);if(null!=Xd&&Vd){for(var Yd=0;Yd<Vd.length;++Yd)Vd[Yd]==Ud&&Vd.splice(Yd--,1);Vd.length||(Kd.widgets=null);var _d=si(this);_(Kd,Math.max(0,Kd.height-_d)),jd&&(Gn(jd,function(){bo(jd,Kd,-_d),Kn(jd,Xd,'widget')}),Xt(jd,'lineWidgetCleared',jd,this,Xd))}},gd.prototype.changed=function(){var Ud=this,jd=this.height,Vd=this.doc.cm,Kd=this.line;this.height=null;var Xd=si(this)-jd;Xd&&(!Re(this.doc,Kd)&&_(Kd,Kd.height+Xd),Vd&&Gn(Vd,function(){Vd.curOp.forceUpdate=!0,bo(Vd,Kd,Xd),Xt(Vd,'lineWidgetChanged',Vd,Ud,q(Kd))}))},et(gd);var fd=0,md=function(Ud,jd){this.lines=[],this.type=jd,this.doc=Ud,this.id=++fd};md.prototype.clear=function(){var Ud=this;if(!this.explicitlyCleared){var jd=this.doc.cm,Vd=jd&&!jd.curOp;if(Vd&&Hn(jd),Je(this,'clear')){var Kd=this.find();Kd&&Xt(this,'clear',Kd.from,Kd.to)}for(var Xd=null,Yd=null,_d=0;_d<this.lines.length;++_d){var qd=Ud.lines[_d],Zd=fe(qd.markedSpans,Ud);jd&&!Ud.collapsed?Kn(jd,q(qd),'text'):jd&&(null!=Zd.to&&(Yd=q(qd)),null!=Zd.from&&(Xd=q(qd))),qd.markedSpans=ye(qd.markedSpans,Zd),null==Zd.from&&Ud.collapsed&&!Re(Ud.doc,qd)&&jd&&_(qd,Vi(jd.display))}if(jd&&this.collapsed&&!jd.options.lineWrapping)for(var Qd=0;Qd<this.lines.length;++Qd){var Jd=Fe(Ud.lines[Qd]),ea=$e(Jd);ea>jd.display.maxLineLength&&(jd.display.maxLine=Jd,jd.display.maxLineLength=ea,jd.display.maxLineChanged=!0)}null!=Xd&&jd&&this.collapsed&&Vn(jd,Xd,Yd+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,jd&&Zr(jd.doc)),jd&&Xt(jd,'markerCleared',jd,this,Xd,Yd),Vd&&Fn(jd),this.parent&&this.parent.clear()}},md.prototype.find=function(Ud,jd){var Vd=this;null==Ud&&'bookmark'==this.type&&(Ud=1);for(var Yd=0,Kd,Xd;Yd<this.lines.length;++Yd){var _d=Vd.lines[Yd],qd=fe(_d.markedSpans,Vd);if(null!=qd.from&&(Kd=ee(jd?_d:q(_d),qd.from),-1==Ud))return Kd;if(null!=qd.to&&(Xd=ee(jd?_d:q(_d),qd.to),1==Ud))return Xd}return Kd&&{from:Kd,to:Xd}},md.prototype.changed=function(){var Ud=this,jd=this.find(-1,!0),Vd=this,Kd=this.doc.cm;jd&&Kd&&Gn(Kd,function(){var Xd=jd.line,Yd=q(jd.line),_d=vi(Kd,Yd);if(_d&&(Ti(_d),Kd.curOp.selectionChanged=Kd.curOp.forceUpdate=!0),Kd.curOp.updateMaxLine=!0,!Re(Vd.doc,Xd)&&null!=Vd.height){var qd=Vd.height;Vd.height=null;var Zd=si(Vd)-qd;Zd&&_(Xd,Xd.height+Zd)}Xt(Kd,'markerChanged',Kd,Ud)})},md.prototype.attachLine=function(Ud){if(!this.lines.length&&this.doc.cm){var jd=this.doc.cm.curOp;jd.maybeHiddenMarkers&&-1!=M(jd.maybeHiddenMarkers,this)||(jd.maybeUnhiddenMarkers||(jd.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(Ud)},md.prototype.detachLine=function(Ud){if(this.lines.splice(M(this.lines,Ud),1),!this.lines.length&&this.doc.cm){var jd=this.doc.cm.curOp;(jd.maybeHiddenMarkers||(jd.maybeHiddenMarkers=[])).push(this)}},et(md);var yd=function(Ud,jd){var Vd=this;this.markers=Ud,this.primary=jd;for(var Kd=0;Kd<Ud.length;++Kd)Ud[Kd].parent=Vd};yd.prototype.clear=function(){var Ud=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var jd=0;jd<this.markers.length;++jd)Ud.markers[jd].clear();Xt(this,'clear')}},yd.prototype.find=function(Ud,jd){return this.primary.find(Ud,jd)},et(yd);var xd=0,vd=function(Ud,jd,Vd,Kd,Xd){if(!(this instanceof vd))return new vd(Ud,jd,Vd,Kd,Xd);null==Vd&&(Vd=0),vo.call(this,[new xo([new Zs('',null)])]),this.first=Vd,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=Vd;var Yd=ee(Vd,0);this.sel=gr(Yd),this.history=new Or(null),this.id=++xd,this.modeOption=jd,this.lineSep=Kd,this.direction='rtl'==Xd?'rtl':'ltr',this.extend=!1,'string'==typeof Ud&&(Ud=this.splitLines(Ud)),Sr(this,{from:Yd,to:Yd,text:Ud}),Yr(this,gr(Yd),ks)};vd.prototype=z(vo.prototype,{constructor:vd,iter:function(Ud,jd,Vd){Vd?this.iterN(Ud-this.first,jd-Ud,Vd):this.iterN(this.first,this.first+this.size,Ud)},insert:function(Ud,jd){for(var Vd=0,Kd=0;Kd<jd.length;++Kd)Vd+=jd[Kd].height;this.insertInner(Ud-this.first,jd,Vd)},remove:function(Ud,jd){this.removeInner(Ud-this.first,jd)},getValue:function(Ud){var jd=Y(this,this.first,this.first+this.size);return!1===Ud?jd:jd.join(Ud||this.lineSeparator())},setValue:jn(function(Ud){var jd=ee(this.first,0),Vd=this.first+this.size-1;lo(this,{from:jd,to:ee(Vd,K(this,Vd).text.length),text:this.splitLines(Ud),origin:'setValue',full:!0},!0),this.cm&&wn(this.cm,0,0),Yr(this,gr(jd),ks)}),replaceRange:function(Ud,jd,Vd,Kd){jd=ae(this,jd),Vd=Vd?ae(this,Vd):jd,uo(this,Ud,jd,Vd,Kd)},getRange:function(Ud,jd,Vd){var Kd=X(this,ae(this,Ud),ae(this,jd));return!1===Vd?Kd:Kd.join(Vd||this.lineSeparator())},getLine:function(Ud){var jd=this.getLineHandle(Ud);return jd&&jd.text},getLineHandle:function(Ud){if(Q(this,Ud))return K(this,Ud)},getLineNumber:function(Ud){return q(Ud)},getLineHandleVisualStart:function(Ud){return'number'==typeof Ud&&(Ud=K(this,Ud)),Fe(Ud)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(Ud){return ae(this,Ud)},getCursor:function(Ud){var jd=this.sel.primary(),Vd;return Vd=null==Ud||'head'==Ud?jd.head:'anchor'==Ud?jd.anchor:'end'==Ud||'to'==Ud||!1===Ud?jd.to():jd.from(),Vd},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:jn(function(Ud,jd,Vd){Vr(this,ae(this,'number'==typeof Ud?ee(Ud,jd||0):Ud),null,Vd)}),setSelection:jn(function(Ud,jd,Vd){Vr(this,ae(this,Ud),ae(this,jd||Ud),Vd)}),extendSelection:jn(function(Ud,jd,Vd){$r(this,ae(this,Ud),jd&&ae(this,jd),Vd)}),extendSelections:jn(function(Ud,jd){Ur(this,ce(this,Ud),jd)}),extendSelectionsBy:jn(function(Ud,jd){var Vd=F(this.sel.ranges,Ud);Ur(this,ce(this,Vd),jd)}),setSelections:jn(function(Ud,jd,Vd){var Kd=this;if(Ud.length){for(var Xd=[],Yd=0;Yd<Ud.length;Yd++)Xd[Yd]=new ud(ae(Kd,Ud[Yd].anchor),ae(Kd,Ud[Yd].head));null==jd&&(jd=Math.min(Ud.length-1,this.sel.primIndex)),Yr(this,ur(Xd,jd),Vd)}}),addSelection:jn(function(Ud,jd,Vd){var Kd=this.sel.ranges.slice(0);Kd.push(new ud(ae(this,Ud),ae(this,jd||Ud))),Yr(this,ur(Kd,Kd.length-1),Vd)}),getSelection:function(Ud){for(var jd=this,Vd=this.sel.ranges,Xd=0,Kd,Yd;Xd<Vd.length;Xd++)Yd=X(jd,Vd[Xd].from(),Vd[Xd].to()),Kd=Kd?Kd.concat(Yd):Yd;return!1===Ud?Kd:Kd.join(Ud||this.lineSeparator())},getSelections:function(Ud){for(var jd=this,Vd=[],Kd=this.sel.ranges,Xd=0,Yd;Xd<Kd.length;Xd++)Yd=X(jd,Kd[Xd].from(),Kd[Xd].to()),!1!==Ud&&(Yd=Yd.join(Ud||jd.lineSeparator())),Vd[Xd]=Yd;return Vd},replaceSelection:function(Ud,jd,Vd){for(var Kd=[],Xd=0;Xd<this.sel.ranges.length;Xd++)Kd[Xd]=Ud;this.replaceSelections(Kd,jd,Vd||'+input')},replaceSelections:jn(function(Ud,jd,Vd){for(var Kd=this,Xd=[],Yd=this.sel,_d=0,qd;_d<Yd.ranges.length;_d++)qd=Yd.ranges[_d],Xd[_d]={from:qd.from(),to:qd.to(),text:Kd.splitLines(Ud[_d]),origin:Vd};for(var Zd=jd&&'end'!=jd&&vr(this,Xd,jd),Qd=Xd.length-1;0<=Qd;Qd--)lo(Kd,Xd[Qd]);Zd?Xr(this,Zd):this.cm&&Cn(this.cm)}),undo:jn(function(){ao(this,'undo')}),redo:jn(function(){ao(this,'redo')}),undoSelection:jn(function(){ao(this,'undo',!0)}),redoSelection:jn(function(){ao(this,'redo',!0)}),setExtending:function(Ud){this.extend=Ud},getExtending:function(){return this.extend},historySize:function(){for(var Ud=this.history,jd=0,Vd=0,Kd=0;Kd<Ud.done.length;Kd++)Ud.done[Kd].ranges||++jd;for(var Xd=0;Xd<Ud.undone.length;Xd++)Ud.undone[Xd].ranges||++Vd;return{undo:jd,redo:Vd}},clearHistory:function(){this.history=new Or(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(Ud){return Ud&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(Ud){return this.history.generation==(Ud||this.cleanGeneration)},getHistory:function(){return{done:Br(this.history.done),undone:Br(this.history.undone)}},setHistory:function(Ud){var jd=this.history=new Or(this.history.maxGeneration);jd.done=Br(Ud.done.slice(0),null,!0),jd.undone=Br(Ud.undone.slice(0),null,!0)},setGutterMarker:jn(function(Ud,jd,Vd){return yo(this,Ud,'gutter',function(Kd){var Xd=Kd.gutterMarkers||(Kd.gutterMarkers={});return Xd[jd]=Vd,!Vd&&B(Xd)&&(Kd.gutterMarkers=null),!0})}),clearGutter:jn(function(Ud){var jd=this;this.iter(function(Vd){Vd.gutterMarkers&&Vd.gutterMarkers[Ud]&&yo(jd,Vd,'gutter',function(){return Vd.gutterMarkers[Ud]=null,B(Vd.gutterMarkers)&&(Vd.gutterMarkers=null),!0})})}),lineInfo:function(Ud){var jd;if('number'==typeof Ud){if(!Q(this,Ud))return null;if(jd=Ud,Ud=K(this,Ud),!Ud)return null}else if(jd=q(Ud),null==jd)return null;return{line:jd,handle:Ud,text:Ud.text,gutterMarkers:Ud.gutterMarkers,textClass:Ud.textClass,bgClass:Ud.bgClass,wrapClass:Ud.wrapClass,widgets:Ud.widgets}},addLineClass:jn(function(Ud,jd,Vd){return yo(this,Ud,'gutter'==jd?'gutter':'class',function(Kd){var Xd='text'==jd?'textClass':'background'==jd?'bgClass':'gutter'==jd?'gutterClass':'wrapClass';if(!Kd[Xd])Kd[Xd]=Vd;else{if(t(Vd).test(Kd[Xd]))return!1;Kd[Xd]+=' '+Vd}return!0})}),removeLineClass:jn(function(Ud,jd,Vd){return yo(this,Ud,'gutter'==jd?'gutter':'class',function(Kd){var Xd='text'==jd?'textClass':'background'==jd?'bgClass':'gutter'==jd?'gutterClass':'wrapClass',Yd=Kd[Xd];if(!Yd)return!1;if(null==Vd)Kd[Xd]=null;else{var _d=Yd.match(t(Vd));if(!_d)return!1;var qd=_d.index+_d[0].length;Kd[Xd]=Yd.slice(0,_d.index)+(_d.index&&qd!=Yd.length?' ':'')+Yd.slice(qd)||null}return!0})}),addLineWidget:jn(function(Ud,jd,Vd){return Co(this,Ud,jd,Vd)}),removeLineWidget:function(Ud){Ud.clear()},markText:function(Ud,jd,Vd){return wo(this,ae(this,Ud),ae(this,jd),Vd,Vd&&Vd.type||'range')},setBookmark:function(Ud,jd){var Vd={replacedWith:jd&&(null==jd.nodeType?jd.widget:jd),insertLeft:jd&&jd.insertLeft,clearWhenEmpty:!1,shared:jd&&jd.shared,handleMouseEvents:jd&&jd.handleMouseEvents};return Ud=ae(this,Ud),wo(this,Ud,Ud,Vd,'bookmark')},findMarksAt:function(Ud){Ud=ae(this,Ud);var jd=[],Vd=K(this,Ud.line).markedSpans;if(Vd)for(var Kd=0,Xd;Kd<Vd.length;++Kd)Xd=Vd[Kd],(null==Xd.from||Xd.from<=Ud.ch)&&(null==Xd.to||Xd.to>=Ud.ch)&&jd.push(Xd.marker.parent||Xd.marker);return jd},findMarks:function(Ud,jd,Vd){Ud=ae(this,Ud),jd=ae(this,jd);var Kd=[],Xd=Ud.line;return this.iter(Ud.line,jd.line+1,function(Yd){var _d=Yd.markedSpans;if(_d)for(var qd=0,Zd;qd<_d.length;qd++)Zd=_d[qd],null!=Zd.to&&Xd==Ud.line&&Ud.ch>=Zd.to||null==Zd.from&&Xd!=Ud.line||null!=Zd.from&&Xd==jd.line&&Zd.from>=jd.ch||Vd&&!Vd(Zd.marker)||Kd.push(Zd.marker.parent||Zd.marker);++Xd}),Kd},getAllMarks:function(){var Ud=[];return this.iter(function(jd){var Vd=jd.markedSpans;if(Vd)for(var Kd=0;Kd<Vd.length;++Kd)null!=Vd[Kd].from&&Ud.push(Vd[Kd].marker)}),Ud},posFromIndex:function(Ud){var Vd=this.first,Kd=this.lineSeparator().length,jd;return this.iter(function(Xd){var Yd=Xd.text.length+Kd;return Yd>Ud?(jd=Ud,!0):void(Ud-=Yd,++Vd)}),ae(this,ee(Vd,jd))},indexFromPos:function(Ud){Ud=ae(this,Ud);var jd=Ud.ch;if(Ud.line<this.first||0>Ud.ch)return 0;var Vd=this.lineSeparator().length;return this.iter(this.first,Ud.line,function(Kd){jd+=Kd.text.length+Vd}),jd},copy:function(Ud){var jd=new vd(Y(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return jd.scrollTop=this.scrollTop,jd.scrollLeft=this.scrollLeft,jd.sel=this.sel,jd.extend=!1,Ud&&(jd.history.undoDepth=this.history.undoDepth,jd.setHistory(this.getHistory())),jd},linkedDoc:function(Ud){Ud||(Ud={});var jd=this.first,Vd=this.first+this.size;null!=Ud.from&&Ud.from>jd&&(jd=Ud.from),null!=Ud.to&&Ud.to<Vd&&(Vd=Ud.to);var Kd=new vd(Y(this,jd,Vd),Ud.mode||this.modeOption,jd,this.lineSep,this.direction);return Ud.sharedHist&&(Kd.history=this.history),(this.linked||(this.linked=[])).push({doc:Kd,sharedHist:Ud.sharedHist}),Kd.linked=[{doc:this,isParent:!0,sharedHist:Ud.sharedHist}],ko(Kd,Lo(this)),Kd},unlinkDoc:function(Ud){var jd=this;if(Ud instanceof kl&&(Ud=Ud.doc),this.linked)for(var Vd=0,Kd;Vd<this.linked.length;++Vd)if(Kd=jd.linked[Vd],Kd.doc==Ud){jd.linked.splice(Vd,1),Ud.unlinkDoc(jd),To(Lo(jd));break}if(Ud.history==this.history){var Xd=[Ud.id];Lr(Ud,function(Yd){return Xd.push(Yd.id)},!0),Ud.history=new Or(null),Ud.history.done=Br(this.history.done,Xd),Ud.history.undone=Br(this.history.undone,Xd)}},iterLinkedDocs:function(Ud){Lr(this,Ud)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(Ud){return this.lineSep?Ud.split(this.lineSep):Bs(Ud)},lineSeparator:function(){return this.lineSep||'\n'},setDirection:jn(function(Ud){'rtl'!=Ud&&(Ud='ltr'),Ud==this.direction||(this.direction=Ud,this.iter(function(jd){return jd.order=null}),this.cm&&Nr(this.cm))})}),vd.prototype.eachLine=vd.prototype.iter;for(var bd=0,Cd=!1,wd={3:'Pause',8:'Backspace',9:'Tab',13:'Enter',16:'Shift',17:'Ctrl',18:'Alt',19:'Pause',20:'CapsLock',27:'Esc',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'Left',38:'Up',39:'Right',40:'Down',44:'PrintScrn',45:'Insert',46:'Delete',59:';',61:'=',91:'Mod',92:'Mod',93:'Mod',106:'*',107:'=',109:'-',110:'.',111:'/',127:'Delete',145:'ScrollLock',173:'-',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:'\'',63232:'Up',63233:'Down',63234:'Left',63235:'Right',63272:'Delete',63273:'Home',63275:'End',63276:'PageUp',63277:'PageDown',63302:'Insert'},Sd=0;10>Sd;Sd++)wd[Sd+48]=wd[Sd+96]=Sd+'';for(var Ld=65;90>=Ld;Ld++)wd[Ld]=String.fromCharCode(Ld);for(var kd=1;12>=kd;kd++)wd[kd+111]=wd[kd+63235]='F'+kd;var Td={};Td.basic={Left:'goCharLeft',Right:'goCharRight',Up:'goLineUp',Down:'goLineDown',End:'goLineEnd',Home:'goLineStartSmart',PageUp:'goPageUp',PageDown:'goPageDown',Delete:'delCharAfter',Backspace:'delCharBefore','Shift-Backspace':'delCharBefore',Tab:'defaultTab','Shift-Tab':'indentAuto',Enter:'newlineAndIndent',Insert:'toggleOverwrite',Esc:'singleSelection'},Td.pcDefault={'Ctrl-A':'selectAll','Ctrl-D':'deleteLine','Ctrl-Z':'undo','Shift-Ctrl-Z':'redo','Ctrl-Y':'redo','Ctrl-Home':'goDocStart','Ctrl-End':'goDocEnd','Ctrl-Up':'goLineUp','Ctrl-Down':'goLineDown','Ctrl-Left':'goGroupLeft','Ctrl-Right':'goGroupRight','Alt-Left':'goLineStart','Alt-Right':'goLineEnd','Ctrl-Backspace':'delGroupBefore','Ctrl-Delete':'delGroupAfter','Ctrl-S':'save','Ctrl-F':'find','Ctrl-G':'findNext','Shift-Ctrl-G':'findPrev','Shift-Ctrl-F':'replace','Shift-Ctrl-R':'replaceAll','Ctrl-[':'indentLess','Ctrl-]':'indentMore','Ctrl-U':'undoSelection','Shift-Ctrl-U':'redoSelection','Alt-U':'redoSelection',fallthrough:'basic'},Td.emacsy={'Ctrl-F':'goCharRight','Ctrl-B':'goCharLeft','Ctrl-P':'goLineUp','Ctrl-N':'goLineDown','Alt-F':'goWordRight','Alt-B':'goWordLeft','Ctrl-A':'goLineStart','Ctrl-E':'goLineEnd','Ctrl-V':'goPageDown','Shift-Ctrl-V':'goPageUp','Ctrl-D':'delCharAfter','Ctrl-H':'delCharBefore','Alt-D':'delWordAfter','Alt-Backspace':'delWordBefore','Ctrl-K':'killLine','Ctrl-T':'transposeChars','Ctrl-O':'openLine'},Td.macDefault={'Cmd-A':'selectAll','Cmd-D':'deleteLine','Cmd-Z':'undo','Shift-Cmd-Z':'redo','Cmd-Y':'redo','Cmd-Home':'goDocStart','Cmd-Up':'goDocStart','Cmd-End':'goDocEnd','Cmd-Down':'goDocEnd','Alt-Left':'goGroupLeft','Alt-Right':'goGroupRight','Cmd-Left':'goLineLeft','Cmd-Right':'goLineRight','Alt-Backspace':'delGroupBefore','Ctrl-Alt-Backspace':'delGroupAfter','Alt-Delete':'delGroupAfter','Cmd-S':'save','Cmd-F':'find','Cmd-G':'findNext','Shift-Cmd-G':'findPrev','Cmd-Alt-F':'replace','Shift-Cmd-Alt-F':'replaceAll','Cmd-[':'indentLess','Cmd-]':'indentMore','Cmd-Backspace':'delWrappedLineLeft','Cmd-Delete':'delWrappedLineRight','Cmd-U':'undoSelection','Shift-Cmd-U':'redoSelection','Ctrl-Up':'goDocStart','Ctrl-Down':'goDocEnd',fallthrough:['basic','emacsy']},Td['default']=cs?Td.macDefault:Td.pcDefault;var Nd={selectAll:ro,singleSelection:function(Ud){return Ud.setSelection(Ud.getCursor('anchor'),Ud.getCursor('head'),ks)},killLine:function(Ud){return $o(Ud,function(jd){if(jd.empty()){var Vd=K(Ud.doc,jd.head.line).text.length;return jd.head.ch==Vd&&jd.head.line<Ud.lastLine()?{from:jd.head,to:ee(jd.head.line+1,0)}:{from:jd.head,to:ee(jd.head.line,Vd)}}return{from:jd.from(),to:jd.to()}})},deleteLine:function(Ud){return $o(Ud,function(jd){return{from:ee(jd.from().line,0),to:ae(Ud.doc,ee(jd.to().line+1,0))}})},delLineLeft:function(Ud){return $o(Ud,function(jd){return{from:ee(jd.from().line,0),to:jd.from()}})},delWrappedLineLeft:function(Ud){return $o(Ud,function(jd){var Vd=Ud.charCoords(jd.head,'div').top+5,Kd=Ud.coordsChar({left:0,top:Vd},'div');return{from:Kd,to:jd.from()}})},delWrappedLineRight:function(Ud){return $o(Ud,function(jd){var Vd=Ud.charCoords(jd.head,'div').top+5,Kd=Ud.coordsChar({left:Ud.display.lineDiv.offsetWidth+100,top:Vd},'div');return{from:jd.from(),to:Kd}})},undo:function(Ud){return Ud.undo()},redo:function(Ud){return Ud.redo()},undoSelection:function(Ud){return Ud.undoSelection()},redoSelection:function(Ud){return Ud.redoSelection()},goDocStart:function(Ud){return Ud.extendSelection(ee(Ud.firstLine(),0))},goDocEnd:function(Ud){return Ud.extendSelection(ee(Ud.lastLine()))},goLineStart:function(Ud){return Ud.extendSelectionsBy(function(jd){return Xo(Ud,jd.head.line)},{origin:'+move',bias:1})},goLineStartSmart:function(Ud){return Ud.extendSelectionsBy(function(jd){return _o(Ud,jd.head)},{origin:'+move',bias:1})},goLineEnd:function(Ud){return Ud.extendSelectionsBy(function(jd){return Yo(Ud,jd.head.line)},{origin:'+move',bias:-1})},goLineRight:function(Ud){return Ud.extendSelectionsBy(function(jd){var Vd=Ud.cursorCoords(jd.head,'div').top+5;return Ud.coordsChar({left:Ud.display.lineDiv.offsetWidth+100,top:Vd},'div')},Ns)},goLineLeft:function(Ud){return Ud.extendSelectionsBy(function(jd){var Vd=Ud.cursorCoords(jd.head,'div').top+5;return Ud.coordsChar({left:0,top:Vd},'div')},Ns)},goLineLeftSmart:function(Ud){return Ud.extendSelectionsBy(function(jd){var Vd=Ud.cursorCoords(jd.head,'div').top+5,Kd=Ud.coordsChar({left:0,top:Vd},'div');return Kd.ch<Ud.getLine(Kd.line).search(/\S/)?_o(Ud,jd.head):Kd},Ns)},goLineUp:function(Ud){return Ud.moveV(-1,'line')},goLineDown:function(Ud){return Ud.moveV(1,'line')},goPageUp:function(Ud){return Ud.moveV(-1,'page')},goPageDown:function(Ud){return Ud.moveV(1,'page')},goCharLeft:function(Ud){return Ud.moveH(-1,'char')},goCharRight:function(Ud){return Ud.moveH(1,'char')},goColumnLeft:function(Ud){return Ud.moveH(-1,'column')},goColumnRight:function(Ud){return Ud.moveH(1,'column')},goWordLeft:function(Ud){return Ud.moveH(-1,'word')},goGroupRight:function(Ud){return Ud.moveH(1,'group')},goGroupLeft:function(Ud){return Ud.moveH(-1,'group')},goWordRight:function(Ud){return Ud.moveH(1,'word')},delCharBefore:function(Ud){return Ud.deleteH(-1,'char')},delCharAfter:function(Ud){return Ud.deleteH(1,'char')},delWordBefore:function(Ud){return Ud.deleteH(-1,'word')},delWordAfter:function(Ud){return Ud.deleteH(1,'word')},delGroupBefore:function(Ud){return Ud.deleteH(-1,'group')},delGroupAfter:function(Ud){return Ud.deleteH(1,'group')},indentAuto:function(Ud){return Ud.indentSelection('smart')},indentMore:function(Ud){return Ud.indentSelection('add')},indentLess:function(Ud){return Ud.indentSelection('subtract')},insertTab:function(Ud){return Ud.replaceSelection('\t')},insertSoftTab:function(Ud){for(var jd=[],Vd=Ud.listSelections(),Kd=Ud.options.tabSize,Xd=0;Xd<Vd.length;Xd++){var Yd=Vd[Xd].from(),_d=A(Ud.getLine(Yd.line),Yd.ch,Kd);jd.push(D(Kd-_d%Kd))}Ud.replaceSelections(jd)},defaultTab:function(Ud){Ud.somethingSelected()?Ud.indentSelection('add'):Ud.execCommand('insertTab')},transposeChars:function(Ud){return Gn(Ud,function(){for(var jd=Ud.listSelections(),Vd=[],Kd=0;Kd<jd.length;Kd++)if(jd[Kd].empty()){var Xd=jd[Kd].head,Yd=K(Ud.doc,Xd.line).text;if(Yd)if(Xd.ch==Yd.length&&(Xd=new ee(Xd.line,Xd.ch-1)),0<Xd.ch)Xd=new ee(Xd.line,Xd.ch+1),Ud.replaceRange(Yd.charAt(Xd.ch-1)+Yd.charAt(Xd.ch-2),ee(Xd.line,Xd.ch-2),Xd,'+transpose');else if(Xd.line>Ud.doc.first){var _d=K(Ud.doc,Xd.line-1).text;_d&&(Xd=new ee(Xd.line,1),Ud.replaceRange(Yd.charAt(0)+Ud.doc.lineSeparator()+_d.charAt(_d.length-1),ee(Xd.line-1,_d.length-1),Xd,'+transpose'))}Vd.push(new ud(Xd,Xd))}Ud.setSelections(Vd)})},newlineAndIndent:function(Ud){return Gn(Ud,function(){for(var jd=Ud.listSelections(),Vd=jd.length-1;0<=Vd;Vd--)Ud.replaceRange(Ud.doc.lineSeparator(),jd[Vd].anchor,jd[Vd].head,'+input');jd=Ud.listSelections();for(var Kd=0;Kd<jd.length;Kd++)Ud.indentLine(jd[Kd].from().line,null,!0);Cn(Ud)})},openLine:function(Ud){return Ud.replaceSelection('\n','start')},toggleOverwrite:function(Ud){return Ud.toggleOverwrite()}},Od=new Cs,Ad=null,Wd=function(Ud,jd,Vd){this.time=Ud,this.pos=jd,this.button=Vd};Wd.prototype.compare=function(Ud,jd,Vd){return this.time+400>Ud&&0==ne(jd,this.pos)&&Vd==this.button};var Fd={toString:function(){return'CodeMirror.Init'}},Pd={},Id={},Dd,Hd;kl.defaults=Pd,kl.optionHandlers=Id;var zd=[];kl.defineInitHook=function(Ud){return zd.push(Ud)};var Ed=null,Rd=function(Ud){this.cm=Ud,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Cs,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Rd.prototype.init=function(Ud){function jd(_d){if(!Ze(Xd,_d)){if(Xd.somethingSelected())Ol({lineWise:!1,text:Xd.getSelections()}),'cut'==_d.type&&Xd.replaceSelection('',null,'cut');else{if(!Xd.options.lineWiseCopyCut)return;var qd=Dl(Xd);Ol({lineWise:!0,text:qd.text}),'cut'==_d.type&&Xd.operation(function(){Xd.setSelections(qd.ranges,0,ks),Xd.replaceSelection('',null,'cut')})}if(_d.clipboardData){_d.clipboardData.clearData();var Zd=Ed.text.join('\n');if(_d.clipboardData.setData('Text',Zd),_d.clipboardData.getData('Text')==Zd)return void _d.preventDefault()}var Qd=Fl(),Jd=Qd.firstChild;Xd.display.lineSpace.insertBefore(Qd,Xd.display.lineSpace.firstChild),Jd.value=Ed.text.join('\n');var ea=document.activeElement;bs(Jd),setTimeout(function(){Xd.display.lineSpace.removeChild(Qd),ea.focus(),ea==Yd&&Kd.showPrimarySelection()},50)}}var Vd=this,Kd=this,Xd=Kd.cm,Yd=Kd.div=Ud.lineDiv;Hl(Yd,Xd.options.spellcheck),Is(Yd,'paste',function(_d){Ze(Xd,_d)||Ml(_d,Xd)||11>=Jl&&setTimeout($n(Xd,function(){return Vd.updateFromDOM()}),20)}),Is(Yd,'compositionstart',function(_d){Vd.composing={data:_d.data,done:!1}}),Is(Yd,'compositionupdate',function(_d){Vd.composing||(Vd.composing={data:_d.data,done:!1})}),Is(Yd,'compositionend',function(_d){Vd.composing&&(_d.data!=Vd.composing.data&&Vd.readFromDOMSoon(),Vd.composing.done=!0)}),Is(Yd,'touchstart',function(){return Kd.forceCompositionEnd()}),Is(Yd,'input',function(){Vd.composing||Vd.readFromDOMSoon()}),Is(Yd,'copy',jd),Is(Yd,'cut',jd)},Rd.prototype.prepareSelection=function(){var Ud=en(this.cm,!1);return Ud.focus=this.cm.state.focused,Ud},Rd.prototype.showSelection=function(Ud,jd){Ud&&this.cm.display.view.length&&((Ud.focus||jd)&&this.showPrimarySelection(),this.showMultipleSelections(Ud))},Rd.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Rd.prototype.showPrimarySelection=function(){var Ud=this.getSelection(),jd=this.cm,Vd=jd.doc.sel.primary(),Kd=Vd.from(),Xd=Vd.to();if(jd.display.viewTo==jd.display.viewFrom||Kd.line>=jd.display.viewTo||Xd.line<jd.display.viewFrom)return void Ud.removeAllRanges();var Yd=$l(jd,Ud.anchorNode,Ud.anchorOffset),_d=$l(jd,Ud.focusNode,Ud.focusOffset);if(!Yd||Yd.bad||!_d||_d.bad||0!=ne(se(Yd,_d),Kd)||0!=ne(le(Yd,_d),Xd)){var qd=jd.display.view,Zd=Kd.line>=jd.display.viewFrom&&El(jd,Kd)||{node:qd[0].measure.map[2],offset:0},Qd=Xd.line<jd.display.viewTo&&El(jd,Xd);if(!Qd){var Jd=qd[qd.length-1].measure,ea=Jd.maps?Jd.maps[Jd.maps.length-1]:Jd.map;Qd={node:ea[ea.length-1],offset:ea[ea.length-2]-ea[ea.length-3]}}if(!Zd||!Qd)return void Ud.removeAllRanges();var ta=Ud.rangeCount&&Ud.getRangeAt(0),ia;try{ia=vs(Zd.node,Zd.offset,Qd.offset,Qd.node)}catch(na){}ia&&(!Yl&&jd.state.focused?(Ud.collapse(Zd.node,Zd.offset),!ia.collapsed&&(Ud.removeAllRanges(),Ud.addRange(ia))):(Ud.removeAllRanges(),Ud.addRange(ia)),ta&&null==Ud.anchorNode?Ud.addRange(ta):Yl&&this.startGracePeriod()),this.rememberSelection()}},Rd.prototype.startGracePeriod=function(){var Ud=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){Ud.gracePeriod=!1,Ud.selectionChanged()&&Ud.cm.operation(function(){return Ud.cm.curOp.selectionChanged=!0})},20)},Rd.prototype.showMultipleSelections=function(Ud){c(this.cm.display.cursorDiv,Ud.cursors),c(this.cm.display.selectionDiv,Ud.selection)},Rd.prototype.rememberSelection=function(){var Ud=this.getSelection();this.lastAnchorNode=Ud.anchorNode,this.lastAnchorOffset=Ud.anchorOffset,this.lastFocusNode=Ud.focusNode,this.lastFocusOffset=Ud.focusOffset},Rd.prototype.selectionInEditor=function(){var Ud=this.getSelection();if(!Ud.rangeCount)return!1;var jd=Ud.getRangeAt(0).commonAncestorContainer;return C(this.div,jd)},Rd.prototype.focus=function(){'nocursor'!=this.cm.options.readOnly&&(!this.selectionInEditor()&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Rd.prototype.blur=function(){this.div.blur()},Rd.prototype.getField=function(){return this.div},Rd.prototype.supportsTouch=function(){return!0},Rd.prototype.receivedFocus=function(){function Ud(){jd.cm.state.focused&&(jd.pollSelection(),jd.polling.set(jd.cm.options.pollInterval,Ud))}var jd=this;this.selectionInEditor()?this.pollSelection():Gn(this.cm,function(){return jd.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,Ud)},Rd.prototype.selectionChanged=function(){var Ud=this.getSelection();return Ud.anchorNode!=this.lastAnchorNode||Ud.anchorOffset!=this.lastAnchorOffset||Ud.focusNode!=this.lastFocusNode||Ud.focusOffset!=this.lastFocusOffset},Rd.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var Ud=this.getSelection(),jd=this.cm;if(ds&&is&&this.cm.options.gutters.length&&Rl(Ud.anchorNode))return this.cm.triggerOnKeyDown({type:'keydown',keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var Vd=$l(jd,Ud.anchorNode,Ud.anchorOffset),Kd=$l(jd,Ud.focusNode,Ud.focusOffset);Vd&&Kd&&Gn(jd,function(){Yr(jd.doc,gr(Vd,Kd),ks),(Vd.bad||Kd.bad)&&(jd.curOp.selectionChanged=!0)})}}},Rd.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Ud=this.cm,jd=Ud.display,Vd=Ud.doc.sel.primary(),Kd=Vd.from(),Xd=Vd.to();if(0==Kd.ch&&Kd.line>Ud.firstLine()&&(Kd=ee(Kd.line-1,K(Ud.doc,Kd.line-1).length)),Xd.ch==K(Ud.doc,Xd.line).text.length&&Xd.line<Ud.lastLine()&&(Xd=ee(Xd.line+1,0)),Kd.line<jd.viewFrom||Xd.line>jd.viewTo-1)return!1;var Yd,_d,qd;Kd.line==jd.viewFrom||0==(Yd=Qi(Ud,Kd.line))?(_d=q(jd.view[0].line),qd=jd.view[0].node):(_d=q(jd.view[Yd].line),qd=jd.view[Yd-1].node.nextSibling);var Zd=Qi(Ud,Xd.line),Qd,Jd;if(Zd==jd.view.length-1?(Qd=jd.viewTo-1,Jd=jd.lineDiv.lastChild):(Qd=q(jd.view[Zd+1].line)-1,Jd=jd.view[Zd+1].node.previousSibling),!qd)return!1;for(var ea=Ud.doc.splitLines(Gl(Ud,qd,Jd,_d,Qd)),ta=X(Ud.doc,ee(_d,0),ee(Qd,K(Ud.doc,Qd).text.length));1<ea.length&&1<ta.length;)if(H(ea)==H(ta))ea.pop(),ta.pop(),Qd--;else if(ea[0]==ta[0])ea.shift(),ta.shift(),_d++;else break;for(var ia=0,na=0,ra=ea[0],oa=ta[0],la=Math.min(ra.length,oa.length);ia<la&&ra.charCodeAt(ia)==oa.charCodeAt(ia);)++ia;for(var sa=H(ea),da=H(ta),aa=Math.min(sa.length-(1==ea.length?ia:0),da.length-(1==ta.length?ia:0));na<aa&&sa.charCodeAt(sa.length-na-1)==da.charCodeAt(da.length-na-1);)++na;if(1==ea.length&&1==ta.length&&_d==Kd.line)for(;ia&&ia>Kd.ch&&sa.charCodeAt(sa.length-na-1)==da.charCodeAt(da.length-na-1);)ia--,na++;ea[ea.length-1]=sa.slice(0,sa.length-na).replace(/^\u200b+/,''),ea[0]=ea[0].slice(ia).replace(/\u200b+$/,'');var pa=ee(_d,ia),ca=ee(Qd,ta.length?H(ta).length-na:0);if(1<ea.length||ea[0]||ne(pa,ca))return uo(Ud.doc,ea,pa,ca,'+input'),!0},Rd.prototype.ensurePolled=function(){this.forceCompositionEnd()},Rd.prototype.reset=function(){this.forceCompositionEnd()},Rd.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Rd.prototype.readFromDOMSoon=function(){var Ud=this;null!=this.readDOMTimeout||(this.readDOMTimeout=setTimeout(function(){if(Ud.readDOMTimeout=null,Ud.composing)if(Ud.composing.done)Ud.composing=null;else return;Ud.updateFromDOM()},80))},Rd.prototype.updateFromDOM=function(){var Ud=this;(this.cm.isReadOnly()||!this.pollContent())&&Gn(this.cm,function(){return Vn(Ud.cm)})},Rd.prototype.setUneditable=function(Ud){Ud.contentEditable='false'},Rd.prototype.onKeyPress=function(Ud){0==Ud.charCode||this.composing||(Ud.preventDefault(),!this.cm.isReadOnly()&&$n(this.cm,Al)(this.cm,String.fromCharCode(null==Ud.charCode?Ud.keyCode:Ud.charCode),0))},Rd.prototype.readOnlyChanged=function(Ud){this.div.contentEditable=('nocursor'!=Ud)+''},Rd.prototype.onContextMenu=function(){},Rd.prototype.resetPosition=function(){},Rd.prototype.needsContentAttribute=!0;var Bd=function(Ud){this.cm=Ud,this.prevInput='',this.pollingFast=!1,this.polling=new Cs,this.hasSelection=!1,this.composing=null};Bd.prototype.init=function(Ud){function jd(_d){if(!Ze(Xd,_d)){if(Xd.somethingSelected())Ol({lineWise:!1,text:Xd.getSelections()});else{if(!Xd.options.lineWiseCopyCut)return;var qd=Dl(Xd);Ol({lineWise:!0,text:qd.text}),'cut'==_d.type?Xd.setSelections(qd.ranges,null,ks):(Kd.prevInput='',Yd.value=qd.text.join('\n'),bs(Yd))}'cut'==_d.type&&(Xd.state.cutIncoming=!0)}}var Vd=this,Kd=this,Xd=this.cm;this.createField(Ud);var Yd=this.textarea;Ud.wrapper.insertBefore(this.wrapper,Ud.wrapper.firstChild),ss&&(Yd.style.width='0px'),Is(Yd,'input',function(){Ql&&9<=Jl&&Vd.hasSelection&&(Vd.hasSelection=null),Kd.poll()}),Is(Yd,'paste',function(_d){Ze(Xd,_d)||Ml(_d,Xd)||(Xd.state.pasteIncoming=!0,Kd.fastPoll())}),Is(Yd,'cut',jd),Is(Yd,'copy',jd),Is(Ud.scroller,'paste',function(_d){di(Ud,_d)||Ze(Xd,_d)||(Xd.state.pasteIncoming=!0,Kd.focus())}),Is(Ud.lineSpace,'selectstart',function(_d){di(Ud,_d)||tt(_d)}),Is(Yd,'compositionstart',function(){var _d=Xd.getCursor('from');Kd.composing&&Kd.composing.range.clear(),Kd.composing={start:_d,range:Xd.markText(_d,Xd.getCursor('to'),{className:'CodeMirror-composing'})}}),Is(Yd,'compositionend',function(){Kd.composing&&(Kd.poll(),Kd.composing.range.clear(),Kd.composing=null)})},Bd.prototype.createField=function(){this.wrapper=Fl(),this.textarea=this.wrapper.firstChild},Bd.prototype.prepareSelection=function(){var Ud=this.cm,jd=Ud.display,Vd=Ud.doc,Kd=en(Ud);if(Ud.options.moveInputWithCursor){var Xd=Pi(Ud,Vd.sel.primary().head,'div'),Yd=jd.wrapper.getBoundingClientRect(),_d=jd.lineDiv.getBoundingClientRect();Kd.teTop=Math.max(0,Math.min(jd.wrapper.clientHeight-10,Xd.top+_d.top-Yd.top)),Kd.teLeft=Math.max(0,Math.min(jd.wrapper.clientWidth-10,Xd.left+_d.left-Yd.left))}return Kd},Bd.prototype.showSelection=function(Ud){var jd=this.cm,Vd=jd.display;c(Vd.cursorDiv,Ud.cursors),c(Vd.selectionDiv,Ud.selection),null!=Ud.teTop&&(this.wrapper.style.top=Ud.teTop+'px',this.wrapper.style.left=Ud.teLeft+'px')},Bd.prototype.reset=function(Ud){if(!(this.contextMenuPending||this.composing)){var jd=this.cm;if(jd.somethingSelected()){this.prevInput='';var Vd=jd.getSelection();this.textarea.value=Vd,jd.state.focused&&bs(this.textarea),Ql&&9<=Jl&&(this.hasSelection=Vd)}else Ud||(this.prevInput=this.textarea.value='',Ql&&9<=Jl&&(this.hasSelection=null))}},Bd.prototype.getField=function(){return this.textarea},Bd.prototype.supportsTouch=function(){return!1},Bd.prototype.focus=function(){if('nocursor'!=this.cm.options.readOnly&&(!ps||S()!=this.textarea))try{this.textarea.focus()}catch(Ud){}},Bd.prototype.blur=function(){this.textarea.blur()},Bd.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Bd.prototype.receivedFocus=function(){this.slowPoll()},Bd.prototype.slowPoll=function(){var Ud=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){Ud.poll(),Ud.cm.state.focused&&Ud.slowPoll()})},Bd.prototype.fastPoll=function(){function Ud(){var Kd=Vd.poll();Kd||jd?(Vd.pollingFast=!1,Vd.slowPoll()):(jd=!0,Vd.polling.set(60,Ud))}var jd=!1,Vd=this;Vd.pollingFast=!0,Vd.polling.set(20,Ud)},Bd.prototype.poll=function(){var Ud=this,jd=this.cm,Vd=this.textarea,Kd=this.prevInput;if(this.contextMenuPending||!jd.state.focused||Gs(Vd)&&!Kd&&!this.composing||jd.isReadOnly()||jd.options.disableInput||jd.state.keySeq)return!1;var Xd=Vd.value;if(Xd==Kd&&!jd.somethingSelected())return!1;if(Ql&&9<=Jl&&this.hasSelection===Xd||cs&&/[\uf700-\uf7ff]/.test(Xd))return jd.display.input.reset(),!1;if(jd.doc.sel==jd.display.selForContextMenu){var Yd=Xd.charCodeAt(0);if(8203!=Yd||Kd||(Kd='\u200B'),8666==Yd)return this.reset(),this.cm.execCommand('undo')}for(var _d=0,qd=Math.min(Kd.length,Xd.length);_d<qd&&Kd.charCodeAt(_d)==Xd.charCodeAt(_d);)++_d;return Gn(jd,function(){Al(jd,Xd.slice(_d),Kd.length-_d,null,Ud.composing?'*compose':null),1e3<Xd.length||-1<Xd.indexOf('\n')?Vd.value=Ud.prevInput='':Ud.prevInput=Xd,Ud.composing&&(Ud.composing.range.clear(),Ud.composing.range=jd.markText(Ud.composing.start,jd.getCursor('to'),{className:'CodeMirror-composing'}))}),!0},Bd.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Bd.prototype.onKeyPress=function(){Ql&&9<=Jl&&(this.hasSelection=null),this.fastPoll()},Bd.prototype.onContextMenu=function(Ud){function jd(){if(null!=_d.selectionStart){var ra=Xd.somethingSelected(),oa='\u200B'+(ra?_d.value:'');_d.value='\u21DA',_d.value=oa,Kd.prevInput=ra?'':'\u200B',_d.selectionStart=1,_d.selectionEnd=oa.length,Yd.selForContextMenu=Xd.doc.sel}}function Vd(){if(Kd.contextMenuPending=!1,Kd.wrapper.style.cssText=ea,_d.style.cssText=Jd,Ql&&9>Jl&&Yd.scrollbars.setScrollTop(Yd.scroller.scrollTop=Zd),null!=_d.selectionStart){(!Ql||Ql&&9>Jl)&&jd();var ra=0,oa=function(){Yd.selForContextMenu==Xd.doc.sel&&0==_d.selectionStart&&0<_d.selectionEnd&&'\u200B'==Kd.prevInput?$n(Xd,ro)(Xd):10>ra++?Yd.detectingSelectAll=setTimeout(oa,500):(Yd.selForContextMenu=null,Yd.input.reset())};Yd.detectingSelectAll=setTimeout(oa,200)}}var Kd=this,Xd=Kd.cm,Yd=Xd.display,_d=Kd.textarea,qd=Zi(Xd,Ud),Zd=Yd.scroller.scrollTop;if(qd&&!ns){var Qd=Xd.options.resetSelectionOnContextMenu;Qd&&-1==Xd.doc.sel.contains(qd)&&$n(Xd,Yr)(Xd.doc,gr(qd),ks);var Jd=_d.style.cssText,ea=Kd.wrapper.style.cssText;Kd.wrapper.style.cssText='position: absolute';var ta=Kd.wrapper.getBoundingClientRect();_d.style.cssText='position: absolute; width: 30px; height: 30px;\n      top: '+(Ud.clientY-ta.top-5)+'px; left: '+(Ud.clientX-ta.left-5)+'px;\n      z-index: 1000; background: '+(Ql?'rgba(255, 255, 255, .05)':'transparent')+';\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);';var ia;if(es&&(ia=window.scrollY),Yd.input.focus(),es&&window.scrollTo(null,ia),Yd.input.reset(),Xd.somethingSelected()||(_d.value=Kd.prevInput=' '),Kd.contextMenuPending=!0,Yd.selForContextMenu=Xd.doc.sel,clearTimeout(Yd.detectingSelectAll),Ql&&9<=Jl&&jd(),ys){ot(Ud);var na=function(){Ye(window,'mouseup',na),setTimeout(Vd,20)};Is(window,'mouseup',na)}else setTimeout(Vd,50)}},Bd.prototype.readOnlyChanged=function(Ud){Ud||this.reset(),this.textarea.disabled='nocursor'==Ud},Bd.prototype.setUneditable=function(){},Bd.prototype.needsContentAttribute=!1,function(Ud){function jd(Kd,Xd,Yd,_d){Ud.defaults[Kd]=Xd,Yd&&(Vd[Kd]=_d?function(qd,Zd,Qd){Qd!=Fd&&Yd(qd,Zd,Qd)}:Yd)}var Vd=Ud.optionHandlers;Ud.defineOption=jd,Ud.Init=Fd,jd('value','',function(Kd,Xd){return Kd.setValue(Xd)},!0),jd('mode',null,function(Kd,Xd){Kd.doc.modeOption=Xd,br(Kd)},!0),jd('indentUnit',2,br,!0),jd('indentWithTabs',!1),jd('smartIndent',!0),jd('tabSize',4,function(Kd){Cr(Kd),Oi(Kd),Vn(Kd)},!0),jd('lineSeparator',null,function(Kd,Xd){if(Kd.doc.lineSep=Xd,!!Xd){var Yd=[],_d=Kd.doc.first;Kd.doc.iter(function(Zd){for(var Qd=0,Jd;;){if(Jd=Zd.text.indexOf(Xd,Qd),-1==Jd)break;Qd=Jd+Xd.length,Yd.push(ee(_d,Jd))}_d++});for(var qd=Yd.length-1;0<=qd;qd--)uo(Kd.doc,Xd,Yd[qd],ee(Yd[qd].line,Yd[qd].ch+Xd.length))}}),jd('specialChars',/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(Kd,Xd,Yd){Kd.state.specialChars=new RegExp(Xd.source+(Xd.test('\t')?'':'|\t'),'g'),Yd!=Fd&&Kd.refresh()}),jd('specialCharPlaceholder',It,function(Kd){return Kd.refresh()},!0),jd('electricChars',!0),jd('inputStyle',ps?'contenteditable':'textarea',function(){throw new Error('inputStyle can not (yet) be changed in a running editor')},!0),jd('spellcheck',!1,function(Kd,Xd){return Kd.getInputField().spellcheck=Xd},!0),jd('rtlMoveVisually',!us),jd('wholeLineUpdateBefore',!0),jd('theme','default',function(Kd){bl(Kd),wl(Kd)},!0),jd('keyMap','default',function(Kd,Xd,Yd){var _d=Go(Xd),qd=Yd!=Fd&&Go(Yd);qd&&qd.detach&&qd.detach(Kd,_d),_d.attach&&_d.attach(Kd,qd||null)}),jd('extraKeys',null),jd('configureMouse',null),jd('lineWrapping',!1,Ll,!0),jd('gutters',[],function(Kd){ar(Kd.options),wl(Kd)},!0),jd('fixedGutter',!0,function(Kd,Xd){Kd.display.gutters.style.left=Xd?Yi(Kd.display)+'px':'0',Kd.refresh()},!0),jd('coverGutterNextToScrollbar',!1,function(Kd){return Mn(Kd)},!0),jd('scrollbarStyle','native',function(Kd){Dn(Kd),Mn(Kd),Kd.display.scrollbars.setScrollTop(Kd.doc.scrollTop),Kd.display.scrollbars.setScrollLeft(Kd.doc.scrollLeft)},!0),jd('lineNumbers',!1,function(Kd){ar(Kd.options),wl(Kd)},!0),jd('firstLineNumber',1,wl,!0),jd('lineNumberFormatter',function(Kd){return Kd},wl,!0),jd('showCursorWhenSelecting',!1,Ji,!0),jd('resetSelectionOnContextMenu',!0),jd('lineWiseCopyCut',!0),jd('pasteLinesPerSelection',!0),jd('readOnly',!1,function(Kd,Xd){'nocursor'==Xd&&(pn(Kd),Kd.display.input.blur()),Kd.display.input.readOnlyChanged(Xd)}),jd('disableInput',!1,function(Kd,Xd){Xd||Kd.display.input.reset()},!0),jd('dragDrop',!0,Sl),jd('allowDropFileTypes',null),jd('cursorBlinkRate',530),jd('cursorScrollMargin',0),jd('cursorHeight',1,Ji,!0),jd('singleCursorHeightPerLine',!0,Ji,!0),jd('workTime',100),jd('workDelay',100),jd('flattenSpans',!0,Cr,!0),jd('addModeClass',!1,Cr,!0),jd('pollInterval',100),jd('undoDepth',200,function(Kd,Xd){return Kd.doc.history.undoDepth=Xd}),jd('historyEventDelay',1250),jd('viewportMargin',10,function(Kd){return Kd.refresh()},!0),jd('maxHighlightLength',1e4,Cr,!0),jd('moveInputWithCursor',!0,function(Kd,Xd){Xd||Kd.display.input.resetPosition()}),jd('tabindex',null,function(Kd,Xd){return Kd.display.input.getField().tabIndex=Xd||''}),jd('autofocus',null),jd('direction','ltr',function(Kd,Xd){return Kd.doc.setDirection(Xd)},!0)}(kl),function(Ud){var jd=Ud.optionHandlers,Vd=Ud.helpers={};Ud.prototype={constructor:Ud,focus:function(){window.focus(),this.display.input.focus()},setOption:function(Kd,Xd){var Yd=this.options,_d=Yd[Kd];Yd[Kd]==Xd&&'mode'!=Kd||(Yd[Kd]=Xd,jd.hasOwnProperty(Kd)&&$n(this,jd[Kd])(this,Xd,_d),qe(this,'optionChange',this,Kd))},getOption:function(Kd){return this.options[Kd]},getDoc:function(){return this.doc},addKeyMap:function(Kd,Xd){this.state.keyMaps[Xd?'push':'unshift'](Go(Kd))},removeKeyMap:function(Kd){for(var Xd=this.state.keyMaps,Yd=0;Yd<Xd.length;++Yd)if(Xd[Yd]==Kd||Xd[Yd].name==Kd)return Xd.splice(Yd,1),!0},addOverlay:Un(function(Kd,Xd){var Yd=Kd.token?Kd:Ud.getMode(this.options,Kd);if(Yd.startState)throw new Error('Overlays may not be stateful.');P(this.state.overlays,{mode:Yd,modeSpec:Kd,opaque:Xd&&Xd.opaque,priority:Xd&&Xd.priority||0},function(_d){return _d.priority}),this.state.modeGen++,Vn(this)}),removeOverlay:Un(function(Kd){for(var Xd=this,Yd=this.state.overlays,_d=0,qd;_d<Yd.length;++_d)if(qd=Yd[_d].modeSpec,qd==Kd||'string'==typeof Kd&&qd.name==Kd)return Yd.splice(_d,1),Xd.state.modeGen++,void Vn(Xd)}),indentLine:Un(function(Kd,Xd,Yd){'string'!=typeof Xd&&'number'!=typeof Xd&&(null==Xd?Xd=this.options.smartIndent?'smart':'prev':Xd=Xd?'add':'subtract'),Q(this.doc,Kd)&&Nl(this,Kd,Xd,Yd)}),indentSelection:Un(function(Kd){for(var Xd=this,Yd=this.doc.sel.ranges,_d=-1,qd=0,Zd;qd<Yd.length;qd++)if(Zd=Yd[qd],!Zd.empty()){var Qd=Zd.from(),Jd=Zd.to(),ea=Math.max(_d,Qd.line);_d=Math.min(Xd.lastLine(),Jd.line-(Jd.ch?0:1))+1;for(var ta=ea;ta<_d;++ta)Nl(Xd,ta,Kd);var ia=Xd.doc.sel.ranges;0==Qd.ch&&Yd.length==ia.length&&0<ia[qd].from().ch&&jr(Xd.doc,qd,new ud(Qd,ia[qd].to()),ks)}else Zd.head.line>_d&&(Nl(Xd,Zd.head.line,Kd,!0),_d=Zd.head.line,qd==Xd.doc.sel.primIndex&&Cn(Xd))}),getTokenAt:function(Kd,Xd){return Nt(this,Kd,Xd)},getLineTokens:function(Kd,Xd){return Nt(this,ee(Kd),Xd,!0)},getTokenTypeAt:function(Kd){Kd=ae(this.doc,Kd);var Xd=wt(this,K(this.doc,Kd.line)),Yd=0,_d=(Xd.length-1)/2,qd=Kd.ch,Zd;if(0==qd)Zd=Xd[2];else for(;;){var Qd=Yd+_d>>1;if((Qd?Xd[2*Qd-1]:0)>=qd)_d=Qd;else if(Xd[2*Qd+1]<qd)Yd=Qd+1;else{Zd=Xd[2*Qd+2];break}}var Jd=Zd?Zd.indexOf('overlay '):-1;return 0>Jd?Zd:0==Jd?null:Zd.slice(0,Jd-1)},getModeAt:function(Kd){var Xd=this.doc.mode;return Xd.innerMode?Ud.innerMode(Xd,this.getTokenAt(Kd).state).mode:Xd},getHelper:function(Kd,Xd){return this.getHelpers(Kd,Xd)[0]},getHelpers:function(Kd,Xd){var Yd=this,_d=[];if(!Vd.hasOwnProperty(Xd))return _d;var qd=Vd[Xd],Zd=this.getModeAt(Kd);if('string'==typeof Zd[Xd])qd[Zd[Xd]]&&_d.push(qd[Zd[Xd]]);else if(Zd[Xd])for(var Qd=0,Jd;Qd<Zd[Xd].length;Qd++)Jd=qd[Zd[Xd][Qd]],Jd&&_d.push(Jd);else Zd.helperType&&qd[Zd.helperType]?_d.push(qd[Zd.helperType]):qd[Zd.name]&&_d.push(qd[Zd.name]);for(var ea=0,ta;ea<qd._global.length;ea++)ta=qd._global[ea],ta.pred(Zd,Yd)&&-1==M(_d,ta.val)&&_d.push(ta.val);return _d},getStateAfter:function(Kd,Xd){var Yd=this.doc;return Kd=de(Yd,null==Kd?Yd.first+Yd.size-1:Kd),St(this,Kd+1,Xd).state},cursorCoords:function(Kd,Xd){var _d=this.doc.sel.primary(),Yd;return Yd=null==Kd?_d.head:'object'==typeof Kd?ae(this.doc,Kd):Kd?_d.from():_d.to(),Pi(this,Yd,Xd||'page')},charCoords:function(Kd,Xd){return Fi(this,ae(this.doc,Kd),Xd||'page')},coordsChar:function(Kd,Xd){return Kd=Hi(this,Kd,Xd||'page'),Ei(this,Kd.left,Kd.top)},lineAtHeight:function(Kd,Xd){return Kd=Hi(this,{top:Kd,left:0},Xd||'page').top,Z(this.doc,Kd+this.display.viewOffset)},heightAtLine:function(Kd,Xd,Yd){var _d=!1,qd;if('number'==typeof Kd){var Zd=this.doc.first+this.doc.size-1;Kd<this.doc.first?Kd=this.doc.first:Kd>Zd&&(Kd=Zd,_d=!0),qd=K(this.doc,Kd)}else qd=Kd;return Di(this,qd,{top:0,left:0},Xd||'page',Yd||_d).top+(_d?this.doc.height-Ge(qd):0)},defaultTextHeight:function(){return Vi(this.display)},defaultCharWidth:function(){return Ki(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(Kd,Xd,Yd,_d,qd){var Zd=this.display;Kd=Pi(this,ae(this.doc,Kd));var Qd=Kd.bottom,Jd=Kd.left;if(Xd.style.position='absolute',Xd.setAttribute('cm-ignore-events','true'),this.display.input.setUneditable(Xd),Zd.sizer.appendChild(Xd),'over'==_d)Qd=Kd.top;else if('above'==_d||'near'==_d){var ea=Math.max(Zd.wrapper.clientHeight,this.doc.height),ta=Math.max(Zd.sizer.clientWidth,Zd.lineSpace.clientWidth);('above'==_d||Kd.bottom+Xd.offsetHeight>ea)&&Kd.top>Xd.offsetHeight?Qd=Kd.top-Xd.offsetHeight:Kd.bottom+Xd.offsetHeight<=ea&&(Qd=Kd.bottom),Jd+Xd.offsetWidth>ta&&(Jd=ta-Xd.offsetWidth)}Xd.style.top=Qd+'px',Xd.style.left=Xd.style.right='','right'==qd?(Jd=Zd.sizer.clientWidth-Xd.offsetWidth,Xd.style.right='0px'):('left'==qd?Jd=0:'middle'==qd&&(Jd=(Zd.sizer.clientWidth-Xd.offsetWidth)/2),Xd.style.left=Jd+'px'),Yd&&xn(this,{left:Jd,top:Qd,right:Jd+Xd.offsetWidth,bottom:Qd+Xd.offsetHeight})},triggerOnKeyDown:Un(il),triggerOnKeyPress:Un(ll),triggerOnKeyUp:ol,triggerOnMouseDown:Un(dl),execCommand:function(Kd){if(Nd.hasOwnProperty(Kd))return Nd[Kd].call(null,this)},triggerElectric:Un(function(Kd){Wl(this,Kd)}),findPosH:function(Kd,Xd,Yd,_d){var qd=this,Zd=1;0>Xd&&(Zd=-1,Xd=-Xd);for(var Qd=ae(this.doc,Kd),Jd=0;Jd<Xd&&(Qd=Il(qd.doc,Qd,Zd,Yd,_d),!Qd.hitSide);++Jd);return Qd},moveH:Un(function(Kd,Xd){var Yd=this;this.extendSelectionsBy(function(_d){return Yd.display.shift||Yd.doc.extend||_d.empty()?Il(Yd.doc,_d.head,Kd,Xd,Yd.options.rtlMoveVisually):0>Kd?_d.from():_d.to()},Ns)}),deleteH:Un(function(Kd,Xd){var Yd=this.doc.sel,_d=this.doc;Yd.somethingSelected()?_d.replaceSelection('',null,'+delete'):$o(this,function(qd){var Zd=Il(_d,qd.head,Kd,Xd,!1);return 0>Kd?{from:Zd,to:qd.head}:{from:qd.head,to:Zd}})}),findPosV:function(Kd,Xd,Yd,_d){var qd=this,Zd=1,Qd=_d;0>Xd&&(Zd=-1,Xd=-Xd);for(var Jd=ae(this.doc,Kd),ea=0,ta;ea<Xd&&(ta=Pi(qd,Jd,'div'),null==Qd?Qd=ta.left:ta.left=Qd,Jd=zl(qd,ta,Zd,Yd),!Jd.hitSide);++ea);return Jd},moveV:Un(function(Kd,Xd){var Yd=this,_d=this.doc,qd=[],Zd=!this.display.shift&&!_d.extend&&_d.sel.somethingSelected();if(_d.extendSelectionsBy(function(Jd){if(Zd)return 0>Kd?Jd.from():Jd.to();var ea=Pi(Yd,Jd.head,'div');null!=Jd.goalColumn&&(ea.left=Jd.goalColumn),qd.push(ea.left);var ta=zl(Yd,ea,Kd,Xd);return'page'==Xd&&Jd==_d.sel.primary()&&bn(Yd,Fi(Yd,ta,'div').top-ea.top),ta},Ns),qd.length)for(var Qd=0;Qd<_d.sel.ranges.length;Qd++)_d.sel.ranges[Qd].goalColumn=qd[Qd]}),findWordAt:function(Kd){var Xd=this.doc,Yd=K(Xd,Kd.line).text,_d=Kd.ch,qd=Kd.ch;if(Yd){var Zd=this.getHelper(Kd,'wordChars');('before'==Kd.sticky||qd==Yd.length)&&_d?--_d:++qd;for(var Qd=Yd.charAt(_d),Jd=R(Qd,Zd)?function(ea){return R(ea,Zd)}:/\s/.test(Qd)?function(ea){return /\s/.test(ea)}:function(ea){return!/\s/.test(ea)&&!R(ea)};0<_d&&Jd(Yd.charAt(_d-1));)--_d;for(;qd<Yd.length&&Jd(Yd.charAt(qd));)++qd}return new ud(ee(Kd.line,_d),ee(Kd.line,qd))},toggleOverwrite:function(Kd){null!=Kd&&Kd==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,'CodeMirror-overwrite'):xs(this.display.cursorDiv,'CodeMirror-overwrite'),qe(this,'overwriteToggle',this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==S()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Un(function(Kd,Xd){wn(this,Kd,Xd)}),getScrollInfo:function(){var Kd=this.display.scroller;return{left:Kd.scrollLeft,top:Kd.scrollTop,height:Kd.scrollHeight-hi(this)-this.display.barHeight,width:Kd.scrollWidth-hi(this)-this.display.barWidth,clientHeight:gi(this),clientWidth:ui(this)}},scrollIntoView:Un(function(Kd,Xd){null==Kd?(Kd={from:this.doc.sel.primary().head,to:null},null==Xd&&(Xd=this.options.cursorScrollMargin)):'number'==typeof Kd?Kd={from:ee(Kd,0),to:null}:null==Kd.from&&(Kd={from:Kd,to:null}),Kd.to||(Kd.to=Kd.from),Kd.margin=Xd||0,null==Kd.from.line?kn(this,Kd.from,Kd.to,Kd.margin):Sn(this,Kd)}),setSize:Un(function(Kd,Xd){var Yd=this,_d=function(Zd){return'number'==typeof Zd||/^\d+$/.test(Zd+'')?Zd+'px':Zd};null!=Kd&&(this.display.wrapper.style.width=_d(Kd)),null!=Xd&&(this.display.wrapper.style.height=_d(Xd)),this.options.lineWrapping&&Ni(this);var qd=this.display.viewFrom;this.doc.iter(qd,this.display.viewTo,function(Zd){if(Zd.widgets)for(var Qd=0;Qd<Zd.widgets.length;Qd++)if(Zd.widgets[Qd].noHScroll){Kn(Yd,qd,'widget');break}++qd}),this.curOp.forceUpdate=!0,qe(this,'refresh',this)}),operation:function(Kd){return Gn(this,Kd)},startOperation:function(){return Hn(this)},endOperation:function(){return Fn(this)},refresh:Un(function(){var Kd=this.display.cachedTextHeight;Vn(this),this.curOp.forceUpdate=!0,Oi(this),wn(this,this.doc.scrollLeft,this.doc.scrollTop),lr(this),(null==Kd||.5<Math.abs(Kd-Vi(this.display)))&&qi(this),qe(this,'refresh',this)}),swapDoc:Un(function(Kd){var Xd=this.doc;return Xd.cm=null,kr(this,Kd),Oi(this),this.display.input.reset(),wn(this,Kd.scrollLeft,Kd.scrollTop),this.curOp.forceScroll=!0,Xt(this,'swapDoc',this,Xd),Xd}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},et(Ud),Ud.registerHelper=function(Kd,Xd,Yd){Vd.hasOwnProperty(Kd)||(Vd[Kd]=Ud[Kd]={_global:[]}),Vd[Kd][Xd]=Yd},Ud.registerGlobalHelper=function(Kd,Xd,Yd,_d){Ud.registerHelper(Kd,Xd,_d),Vd[Kd]._global.push({pred:Yd,val:_d})}}(kl);var Gd='iter insert remove copy getEditor constructor'.split(' ');for(var $d in vd.prototype)vd.prototype.hasOwnProperty($d)&&0>M(Gd,$d)&&(kl.prototype[$d]=function(Ud){return function(){return Ud.apply(this.doc,arguments)}}(vd.prototype[$d]));return et(vd),kl.inputStyles={textarea:Bd,contenteditable:Rd},kl.defineMode=function(Ud){kl.defaults.mode||'null'==Ud||(kl.defaults.mode=Ud),ut.apply(this,arguments)},kl.defineMIME=function(Ud,jd){Vs[Ud]=jd},kl.defineMode('null',function(){return{token:function(Ud){return Ud.skipToEnd()}}}),kl.defineMIME('text/plain','null'),kl.defineExtension=function(Ud,jd){kl.prototype[Ud]=jd},kl.defineDocExtension=function(Ud,jd){vd.prototype[Ud]=jd},kl.fromTextArea=function(Ud,jd){function Vd(){Ud.value=qd.getValue()}if(jd=jd?O(jd):{},jd.value=Ud.value,!jd.tabindex&&Ud.tabIndex&&(jd.tabindex=Ud.tabIndex),!jd.placeholder&&Ud.placeholder&&(jd.placeholder=Ud.placeholder),null==jd.autofocus){var Kd=S();jd.autofocus=Kd==Ud||null!=Ud.getAttribute('autofocus')&&Kd==document.body}var Xd;if(Ud.form&&(Is(Ud.form,'submit',Vd),!jd.leaveSubmitMethodAlone)){var Yd=Ud.form;Xd=Yd.submit;try{var _d=Yd.submit=function(){Vd(),Yd.submit=Xd,Yd.submit(),Yd.submit=_d}}catch(Zd){}}jd.finishInit=function(Zd){Zd.save=Vd,Zd.getTextArea=function(){return Ud},Zd.toTextArea=function(){Zd.toTextArea=isNaN,Vd(),Ud.parentNode.removeChild(Zd.getWrapperElement()),Ud.style.display='',Ud.form&&(Ye(Ud.form,'submit',Vd),'function'==typeof Ud.form.submit&&(Ud.form.submit=Xd))}},Ud.style.display='none';var qd=kl(function(Zd){return Ud.parentNode.insertBefore(Zd,Ud.nextSibling)},jd);return qd},function(Ud){Ud.off=Ye,Ud.on=Is,Ud.wheelEventPixels=cr,Ud.Doc=vd,Ud.splitLines=Bs,Ud.countColumn=A,Ud.findColumn=W,Ud.isWordChar=E,Ud.Pass=Ls,Ud.signal=qe,Ud.Line=Zs,Ud.changeEnd=fr,Ud.scrollbarModel=sd,Ud.Pos=ee,Ud.cmpPos=ne,Ud.modes=js,Ud.mimeModes=Vs,Ud.resolveMode=ft,Ud.getMode=mt,Ud.modeExtensions=Ks,Ud.extendMode=yt,Ud.copyState=xt,Ud.startState=bt,Ud.innerMode=vt,Ud.commands=Nd,Ud.keyMap=Td,Ud.keyName=Bo,Ud.isModifierKey=Eo,Ud.lookupKey=zo,Ud.normalizeKeyMap=Io,Ud.StringStream=Xs,Ud.SharedTextMarker=yd,Ud.TextMarker=md,Ud.LineWidget=gd,Ud.e_preventDefault=tt,Ud.e_stopPropagation=it,Ud.e_stop=ot,Ud.addClass=L,Ud.contains=C,Ud.rmClass=xs,Ud.keyNames=wd}(kl),kl.version='5.39.2',kl});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function r(e,t,r){var a=e.getLineHandle(t.line),s=t.ch-1,l=r&&r.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=!l&&s>=0&&i[a.text.charAt(s)]||i[a.text.charAt(++s)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&r.strict&&u>0!=(s==t.ch))return null;var f=e.getTokenTypeAt(n(t.line,s+1)),d=o(e,n(t.line,s+(u>0?1:0)),u,f||null,r);return null==d?null:{from:n(t.line,s),to:d&&d.pos,match:d&&d.ch==c.charAt(0),forward:u>0}}function o(e,t,r,o,a){for(var s=a&&a.maxScanLineLength||1e4,l=a&&a.maxScanLines||1e3,c=[],u=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/,f=r>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),d=t.line;d!=f;d+=r){var h=e.getLine(d);if(h){var m=r>0?0:h.length-1,p=r>0?h.length:-1;if(!(h.length>s))for(d==t.line&&(m=t.ch-(r<0?1:0));m!=p;m+=r){var g=h.charAt(m);if(u.test(g)&&(void 0===o||e.getTokenTypeAt(n(d,m+1))==o))if(">"==i[g].charAt(1)==r>0)c.push(g);else{if(!c.length)return{pos:n(d,m),ch:g};c.pop()}}}}return d-r!=(r>0?e.lastLine():e.firstLine())&&null}function a(e,i,o){for(var a=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&r(e,l[c].head,o);if(u&&e.getLine(u.from.line).length<=a){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,n(u.from.line,u.from.ch+1),{className:f})),u.to&&e.getLine(u.to.line).length<=a&&s.push(e.markText(u.to,n(u.to.line,u.to.ch+1),{className:f}))}}if(s.length){t&&e.state.focused&&e.focus();var d=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!i)return d;setTimeout(d,800)}}function s(e){e.operation(function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=a(e,!1,e.state.matchBrackets)})}e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&(t.off("cursorActivity",s),t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",s))}),e.defineExtension("matchBrackets",function(){a(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),r(this,e,t)}),e.defineExtension("scanForBracket",function(e,t,n,i){return o(this,e,t,n,i)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t={},n=/[^\s\u00a0]/,i=e.Pos;function r(e){var t=e.search(n);return-1==t?0:t}function o(e,t){var n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",function(e){e||(e=t);for(var n=1/0,r=this.listSelections(),o=null,a=r.length-1;a>=0;a--){var s=r[a].from(),l=r[a].to();s.line>=n||(l.line>=n&&(l=i(n,0)),n=s.line,null==o?this.uncomment(s,l,e)?o="un":(this.lineComment(s,l,e),o="line"):"un"==o?this.uncomment(s,l,e):this.lineComment(s,l,e))}}),e.defineExtension("lineComment",function(e,a,s){s||(s=t);var l=this,c=o(l,e),u=l.getLine(e.line);if(null!=u&&(f=e,d=u,!/\bstring\b/.test(l.getTokenTypeAt(i(f.line,0)))||/^[\'\"\`]/.test(d))){var f,d,h=s.lineComment||c.lineComment;if(h){var m=Math.min(0!=a.ch||a.line==e.line?a.line+1:a.line,l.lastLine()+1),p=null==s.padding?" ":s.padding,g=s.commentBlankLines||e.line==a.line;l.operation(function(){if(s.indent){for(var t=null,o=e.line;o<m;++o){var a=(c=l.getLine(o)).slice(0,r(c));(null==t||t.length>a.length)&&(t=a)}for(o=e.line;o<m;++o){var c=l.getLine(o),u=t.length;(g||n.test(c))&&(c.slice(0,u)!=t&&(u=r(c)),l.replaceRange(t+h+p,i(o,0),i(o,u)))}}else for(o=e.line;o<m;++o)(g||n.test(l.getLine(o)))&&l.replaceRange(h+p,i(o,0))})}else(s.blockCommentStart||c.blockCommentStart)&&(s.fullLines=!0,l.blockComment(e,a,s))}}),e.defineExtension("blockComment",function(e,r,a){a||(a=t);var s=this,l=o(s,e),c=a.blockCommentStart||l.blockCommentStart,u=a.blockCommentEnd||l.blockCommentEnd;if(c&&u){if(!/\bcomment\b/.test(s.getTokenTypeAt(i(e.line,0)))){var f=Math.min(r.line,s.lastLine());f!=e.line&&0==r.ch&&n.test(s.getLine(f))&&--f;var d=null==a.padding?" ":a.padding;e.line>f||s.operation(function(){if(0!=a.fullLines){var t=n.test(s.getLine(f));s.replaceRange(d+u,i(f)),s.replaceRange(c+d,i(e.line,0));var o=a.blockCommentLead||l.blockCommentLead;if(null!=o)for(var h=e.line+1;h<=f;++h)(h!=f||t)&&s.replaceRange(o+d,i(h,0))}else s.replaceRange(u,r),s.replaceRange(c,e)})}}else(a.lineComment||l.lineComment)&&0!=a.fullLines&&s.lineComment(e,r,a)}),e.defineExtension("uncomment",function(e,r,a){a||(a=t);var s,l=this,c=o(l,e),u=Math.min(0!=r.ch||r.line==e.line?r.line:r.line-1,l.lastLine()),f=Math.min(e.line,u),d=a.lineComment||c.lineComment,h=[],m=null==a.padding?" ":a.padding;e:if(d){for(var p=f;p<=u;++p){var g=l.getLine(p),y=g.indexOf(d);if(y>-1&&!/comment/.test(l.getTokenTypeAt(i(p,y+1)))&&(y=-1),-1==y&&n.test(g))break e;if(y>-1&&n.test(g.slice(0,y)))break e;h.push(g)}if(l.operation(function(){for(var e=f;e<=u;++e){var t=h[e-f],n=t.indexOf(d),r=n+d.length;n<0||(t.slice(r,r+m.length)==m&&(r+=m.length),s=!0,l.replaceRange("",i(e,n),i(e,r)))}}),s)return!0}var v=a.blockCommentStart||c.blockCommentStart,x=a.blockCommentEnd||c.blockCommentEnd;if(!v||!x)return!1;var b=a.blockCommentLead||c.blockCommentLead,k=l.getLine(f),w=k.indexOf(v);if(-1==w)return!1;var C=u==f?k:l.getLine(u),_=C.indexOf(x,u==f?w+v.length:0),S=i(f,w+1),T=i(u,_+1);if(-1==_||!/comment/.test(l.getTokenTypeAt(S))||!/comment/.test(l.getTokenTypeAt(T))||l.getRange(S,T,"\n").indexOf(x)>-1)return!1;var M=k.lastIndexOf(v,e.ch),L=-1==M?-1:k.slice(0,e.ch).indexOf(x,M+v.length);if(-1!=M&&-1!=L&&L+x.length!=e.ch)return!1;L=C.indexOf(x,r.ch);var D=C.slice(r.ch).lastIndexOf(v,L-r.ch);return M=-1==L||-1==D?-1:r.ch+D,(-1==L||-1==M||M==r.ch)&&(l.operation(function(){l.replaceRange("",i(u,_-(m&&C.slice(_-m.length,_)==m?m.length:0)),i(u,_+x.length));var e=w+v.length;if(m&&k.slice(e,e+m.length)==m&&(e+=m.length),l.replaceRange("",i(f,w),i(f,e)),b)for(var t=f+1;t<=u;++t){var r=l.getLine(t),o=r.indexOf(b);if(-1!=o&&!n.test(r.slice(0,o))){var a=o+b.length;m&&r.slice(a,a+m.length)==m&&(a+=m.length),l.replaceRange("",i(t,o),i(t,a))}}}),!0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t="CodeMirror-hint",n="CodeMirror-hint-active";function i(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var i={hint:t};if(n)for(var r in n)i[r]=n[r];return e.showHint(i)},e.defineExtension("showHint",function(t){t=function(e,t,n){var i=e.options.hintOptions,r={};for(var o in u)r[o]=u[o];if(i)for(var o in i)void 0!==i[o]&&(r[o]=i[o]);if(n)for(var o in n)void 0!==n[o]&&(r[o]=n[o]);r.hint.resolve&&(r.hint=r.hint.resolve(e,t));return r}(this,this.getCursor("start"),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var r=0;r<n.length;r++)if(n[r].head.line!=n[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new i(this,t);o.options.hint&&(e.signal(this,"startCompletion",this),o.update(!0))}});var r=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;function a(e){return"string"==typeof e?e:e.text}function s(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function l(i,r){this.completion=i,this.data=r,this.picked=!1;var o=this,l=i.cm,c=this.hints=document.createElement("ul"),u=i.cm.options.theme;c.className="CodeMirror-hints "+u,this.selectedHint=r.selectedHint||0;for(var f=r.list,d=0;d<f.length;++d){var h=c.appendChild(document.createElement("li")),m=f[d],p=t+(d!=this.selectedHint?"":" "+n);null!=m.className&&(p=m.className+" "+p),h.className=p,m.render?m.render(h,r,m):h.appendChild(document.createTextNode(m.displayText||a(m))),h.hintId=d}var g=l.cursorCoords(i.options.alignWithWord?r.from:null),y=g.left,v=g.bottom,x=!0;c.style.left=y+"px",c.style.top=v+"px";var b=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),k=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(i.options.container||document.body).appendChild(c);var w=c.getBoundingClientRect(),C=w.bottom-k,_=c.scrollHeight>c.clientHeight+1,S=l.getScrollInfo();if(C>0){var T=w.bottom-w.top;if(g.top-(g.bottom-w.top)-T>0)c.style.top=(v=g.top-T)+"px",x=!1;else if(T>k){c.style.height=k-5+"px",c.style.top=(v=g.bottom-w.top)+"px";var M=l.getCursor();r.from.ch!=M.ch&&(g=l.cursorCoords(M),c.style.left=(y=g.left)+"px",w=c.getBoundingClientRect())}}var L,D=w.right-b;if(D>0&&(w.right-w.left>b&&(c.style.width=b-5+"px",D-=w.right-w.left-b),c.style.left=(y=g.left-D)+"px"),_)for(var A=c.firstChild;A;A=A.nextSibling)A.style.paddingRight=l.display.nativeBarWidth+"px";(l.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},i=e.options.customKeys,r=i?{}:n;function o(e,i){var o;o="string"!=typeof i?function(e){return i(e,t)}:n.hasOwnProperty(i)?n[i]:i,r[e]=o}if(i)for(var a in i)i.hasOwnProperty(a)&&o(a,i[a]);var s=e.options.extraKeys;if(s)for(var a in s)s.hasOwnProperty(a)&&o(a,s[a]);return r}(i,{moveFocus:function(e,t){o.changeActive(o.selectedHint+e,t)},setFocus:function(e){o.changeActive(e)},menuSize:function(){return o.screenAmount()},length:f.length,close:function(){i.close()},pick:function(){o.pick()},data:r})),i.options.closeOnUnfocus)&&(l.on("blur",this.onBlur=function(){L=setTimeout(function(){i.close()},100)}),l.on("focus",this.onFocus=function(){clearTimeout(L)}));return l.on("scroll",this.onScroll=function(){var e=l.getScrollInfo(),t=l.getWrapperElement().getBoundingClientRect(),n=v+S.top-e.top,r=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(x||(r+=c.offsetHeight),r<=t.top||r>=t.bottom)return i.close();c.style.top=n+"px",c.style.left=y+S.left-e.left+"px"}),e.on(c,"dblclick",function(e){var t=s(c,e.target||e.srcElement);t&&null!=t.hintId&&(o.changeActive(t.hintId),o.pick())}),e.on(c,"click",function(e){var t=s(c,e.target||e.srcElement);t&&null!=t.hintId&&(o.changeActive(t.hintId),i.options.completeOnSingleClick&&o.pick())}),e.on(c,"mousedown",function(){setTimeout(function(){l.focus()},20)}),e.signal(r,"select",f[this.selectedHint],c.childNodes[this.selectedHint]),!0}function c(e,t,n,i){if(e.async)e(t,i,n);else{var r=e(t,n);r&&r.then?r.then(i):i(r)}}i.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var i=t.list[n];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(a(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=r(function(){n.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;c(this.options.hint,this.cm,this.options,function(i){t.tick==n&&t.finishUpdate(i,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(i&&1==t.list.length?this.pick(t,0):(this.widget=new l(this,t),e.signal(t,"shown")))}},l.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,i){if(t>=this.data.list.length?t=i?this.data.list.length-1:0:t<0&&(t=i?0:this.data.list.length-1),this.selectedHint!=t){var r=this.hints.childNodes[this.selectedHint];r&&(r.className=r.className.replace(" "+n,"")),(r=this.hints.childNodes[this.selectedHint=t]).className+=" "+n,r.offsetTop<this.hints.scrollTop?this.hints.scrollTop=r.offsetTop-3:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],r)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:function(t,n){var i,r=t.getHelpers(n,"hint");if(r.length){var o=function(e,t,n){var i=function(e,t){if(!e.somethingSelected())return t;for(var n=[],i=0;i<t.length;i++)t[i].supportsSelection&&n.push(t[i]);return n}(e,r);!function r(o){if(o==i.length)return t(null);c(i[o],e,n,function(e){e&&e.list.length>0?t(e):r(o+1)})}(0)};return o.async=!0,o.supportsSelection=!0,o}return(i=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:i})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",function(t,n){var i,r=t.getCursor(),o=t.getTokenAt(r),a=e.Pos(r.line,o.start),s=r;o.start<r.ch&&/\w/.test(o.string.charAt(r.ch-o.start-1))?i=o.string.substr(0,r.ch-o.start):(i="",a=r);for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,i.length)==i&&l.push(u)}if(l.length)return{list:l,from:a,to:s}}),e.commands.autocomplete=e.showHint;var u={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=/[\w$]+/;e.registerHelper("hint","anyword",function(n,i){for(var r=i&&i.word||t,o=i&&i.range||500,a=n.getCursor(),s=n.getLine(a.line),l=a.ch,c=l;c&&r.test(s.charAt(c-1));)--c;for(var u=c!=l&&s.slice(c,l),f=i&&i.list||[],d={},h=new RegExp(r.source,"g");y=h.exec("attribute noperspective const uniform layout centroid flat smooth\n break continue do for while switch case default texture if else\n in out inout invariant discard return lowp mediump highp precision struct\n mat2 mat3 mat4 mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4\n vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 uvec2 uvec3 uvec4\n void bool int uint float sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow samplerCubeShadow\n sampler1DArray sampler2DArray sampler1DArrayShadow sampler2DArrayShadow  isampler1D isampler2D isampler3D isamplerCube\n isampler1DArray isampler2DArray usampler1D usampler2D usampler3D usamplerCube usampler1DArray usampler2DArray sampler2DRect\n sampler2DRectShadow isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS\n sampler2DMSArray isampler2DMSArray usampler2DMSArray do else for if switch while true false null");)p==a.line&&y[0]===u||u&&0!=y[0].lastIndexOf(u,0)||Object.prototype.hasOwnProperty.call(d,y[0])||(d[y[0]]=!0,f.push(y[0]));for(var m=-1;m<=1;m+=2)for(var p=a.line,g=Math.min(Math.max(p+m*o,n.firstLine()),n.lastLine())+m;p!=g;p+=m)for(var y,v=n.getLine(p);y=h.exec(v);)p==a.line&&y[0]===u||u&&0!=y[0].lastIndexOf(u,0)||Object.prototype.hasOwnProperty.call(d,y[0])||(d[y[0]]=!0,f.push(y[0]));return{list:f,from:e.Pos(a.line,c),to:e.Pos(a.line,l)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.info=i,this.align=r,this.prev=o}function n(e,n,i,r){var o=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=i&&(o=e.context.indented),e.context=new t(o,n,i,r,null,e.context)}function i(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function r(e,t,n){return"variable"==t.prevToken||"type"==t.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,n))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function o(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function a(e){for(var t={},n=e.split(" "),i=0;i<n.length;++i)t[n[i]]=!0;return t}function s(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}e.defineMode("clike",function(a,l){var c,u,f=a.indentUnit,d=l.statementIndentUnit||f,h=l.dontAlignCalls,m=l.keywords||{},p=l.types||{},g=l.builtin||{},y=l.blockKeywords||{},v=l.defKeywords||{},x=l.atoms||{},b=l.hooks||{},k=l.multiLineStrings,w=!1!==l.indentStatements,C=!1!==l.indentSwitch,_=l.namespaceSeparator,S=l.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,T=l.numberStart||/[\d\.]/,M=l.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,L=l.isOperatorChar||/[+\-*&%=<>!?|\/]/,D=l.isIdentifierChar||/[\w\$_\xa1-\uffff]/;function A(e,t){var n,i=e.next();if(b[i]){var r=b[i](e,t);if(!1!==r)return r}if('"'==i||"'"==i)return t.tokenize=(n=i,function(e,t){for(var i,r=!1,o=!1;null!=(i=e.next());){if(i==n&&!r){o=!0;break}r=!r&&"\\"==i}return(o||!r&&!k)&&(t.tokenize=null),"string"}),t.tokenize(e,t);if(S.test(i))return c=i,null;if(T.test(i)){if(e.backUp(1),e.match(M))return"number";e.next()}if("/"==i){if(e.eat("*"))return t.tokenize=P,P(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(L.test(i)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(L););return"operator"}if(e.eatWhile(D),_)for(;e.match(_);)e.eatWhile(D);var o=e.current();return s(m,o)?(s(y,o)&&(c="newstatement"),s(v,o)&&(u=!0),"keyword"):s(p,o)?"type":s(g,o)?(s(y,o)&&(c="newstatement"),"builtin"):s(x,o)?"atom":"variable"}function P(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=null;break}i="*"==n}return"comment"}function B(e,t){l.typeFirstDefinitions&&e.eol()&&o(t.context)&&(t.typeAtEndOfLine=r(e,t,e.pos))}return{startState:function(e){return{tokenize:null,context:new t((e||0)-f,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var a=t.context;if(e.sol()&&(null==a.align&&(a.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return B(e,t),null;c=u=null;var s=(t.tokenize||A)(e,t);if("comment"==s||"meta"==s)return s;if(null==a.align&&(a.align=!0),";"==c||":"==c||","==c&&e.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==t.context.type;)i(t);else if("{"==c)n(t,e.column(),"}");else if("["==c)n(t,e.column(),"]");else if("("==c)n(t,e.column(),")");else if("}"==c){for(;"statement"==a.type;)a=i(t);for("}"==a.type&&(a=i(t));"statement"==a.type;)a=i(t)}else c==a.type?i(t):w&&(("}"==a.type||"top"==a.type)&&";"!=c||"statement"==a.type&&"newstatement"==c)&&n(t,e.column(),"statement",e.current());if("variable"==s&&("def"==t.prevToken||l.typeFirstDefinitions&&r(e,t,e.start)&&o(t.context)&&e.match(/^\s*\(/,!1))&&(s="def"),b.token){var f=b.token(e,t,s);void 0!==f&&(s=f)}return"def"==s&&!1===l.styleDefs&&(s="variable"),t.startOfLine=!1,t.prevToken=u?"def":s||c,B(e,t),s},indent:function(t,n){if(t.tokenize!=A&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var i=t.context,r=n&&n.charAt(0),o=r==i.type;if("statement"==i.type&&"}"==r&&(i=i.prev),l.dontIndentStatements)for(;"statement"==i.type&&l.dontIndentStatements.test(i.info);)i=i.prev;if(b.indent){var a=b.indent(t,i,n,f);if("number"==typeof a)return a}var s=i.prev&&"switch"==i.prev.info;if(l.allmanIndentation&&/[{(]/.test(r)){for(;"top"!=i.type&&"}"!=i.type;)i=i.prev;return i.indented}return"statement"==i.type?i.indented+("{"==r?0:d):!i.align||h&&")"==i.type?")"!=i.type||o?i.indented+(o?0:f)+(o||!s||/^(?:case|default)\b/.test(n)?0:f):i.indented+d:i.column+(o?0:1)},electricInput:C?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});var l="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",c="int long char short double float unsigned signed void size_t ptrdiff_t";function u(e,t){if(!t.startOfLine)return!1;for(var n,i=null;n=e.peek();){if("\\"==n&&e.match(/^.$/)){i=u;break}if("/"==n&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=i,"meta"}function f(e,t){return"type"==t.prevToken&&"type"}function d(e){return e.eatWhile(/[\w\.']/),"number"}function h(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return!!n&&(t.cpp11RawStringDelim=n[1],t.tokenize=p,p(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function m(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function p(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return e.match(new RegExp(".*?\\)"+n+'"'))?t.tokenize=null:e.skipToEnd(),"string"}function g(t,n){"string"==typeof t&&(t=[t]);var i=[];function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&i.push(t)}r(n.keywords),r(n.types),r(n.builtin),r(n.atoms),i.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],i));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}function y(e,t){for(var n=!1;!e.eol();){if(!n&&e.match('"""')){t.tokenize=null;break}n="\\"==e.next()&&!n}return"string"}g(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a(l),types:a(c+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:a("case do else for if switch while struct"),defKeywords:a("struct"),typeFirstDefinitions:!0,atoms:a("NULL true false"),hooks:{"#":u,"*":f},modeProps:{fold:["brace","include"]}}),g("text/x-glsl-es3",{name:"clike",keywords:a("const uniform layout centroid flat smooth noperspective break continue do for while switch case default texture if else in out inout invariant discard return lowp mediump highp precisionradians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult dFdx dFdy"),types:a("mat2 mat3 mat4 mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 uvec2 uvec3 uvec4 void bool int uint float sampler2D sampler3D samplerCube sampler2DShadow samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray"),blockKeywords:a("do else for if switch while"),defKeywords:a("struct"),typeFirstDefinitions:!0,atoms:a("true false null"),number:/^(?:0x[a-f\d_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|f)?/i,hooks:{"#":u},modeProps:{fold:["brace","include"]}}),g(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a(l+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:a(c+" bool wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),defKeywords:a("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:a("true false NULL"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":u,"*":f,u:h,U:h,L:h,R:h,0:d,1:d,2:d,3:d,4:d,5:d,6:d,7:d,8:d,9:d,token:function(e,t,n){if("variable"==n&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&(i=e.current(),(r=/(\w+)::~?(\w+)$/.exec(i))&&r[1]==r[2]))return"def";var i,r}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),g("text/x-java",{name:"clike",keywords:a("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:a("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:a("catch class do else finally for if switch try while"),defKeywords:a("class interface enum @interface"),typeFirstDefinitions:!0,atoms:a("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),g("text/x-csharp",{name:"clike",keywords:a("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:a("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),defKeywords:a("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=m,m(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),g("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:a("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:a("catch class enum do else finally for forSome if match switch try while"),defKeywords:a("class enum def object package trait type val var"),atoms:a("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=y,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,n){var i=n.context;return!("}"!=i.type||!i.align||!e.eat(">"))&&(n.context=new t(i.indented,i.column,i.type,i.info,null,i.prev),"operator")},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=function e(t){return function(n,i){for(var r;r=n.next();){if("*"==r&&n.eat("/")){if(1==t){i.tokenize=null;break}return i.tokenize=e(t-1),i.tokenize(n,i)}if("/"==r&&n.eat("*"))return i.tokenize=e(t+1),i.tokenize(n,i)}return"comment"}}(1),t.tokenize(e,t))}},modeProps:{closeBrackets:{triples:'"'}}}),g("text/x-kotlin",{name:"clike",keywords:a("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:a("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:a("catch class do else finally for if where try while enum"),defKeywords:a("class val var object interface fun"),atoms:a("true false null this"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){var n;return t.tokenize=(n=e.match('""'),function(e,t){for(var i,r=!1,o=!1;!e.eol();){if(!n&&!r&&e.match('"')){o=!0;break}if(n&&e.match('"""')){o=!0;break}i=e.next(),!r&&"$"==i&&e.match("{")&&e.skipTo("}"),r=!r&&"\\"==i&&!n}return!o&&n||(t.tokenize=null),"string"}),t.tokenize(e,t)},indent:function(e,t,n,i){var r=n&&n.charAt(0);return"}"!=e.prevToken&&")"!=e.prevToken||""!=n?"operator"==e.prevToken&&"}"!=n||"variable"==e.prevToken&&"."==r||("}"==e.prevToken||")"==e.prevToken)&&"."==r?2*i+t.indented:t.align&&"}"==t.type?t.indented+(e.context.type==(n||"").charAt(0)?0:i):void 0:e.indented}},modeProps:{closeBrackets:{triples:'"'}}}),g(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:a("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:a("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:a("for while do if else struct"),builtin:a("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:a("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":u},modeProps:{fold:["brace","include"]}}),g("text/x-nesc",{name:"clike",keywords:a(l+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:a(c),blockKeywords:a("case do else for if switch while struct"),atoms:a("null true false"),hooks:{"#":u},modeProps:{fold:["brace","include"]}}),g("text/x-objectivec",{name:"clike",keywords:a(l+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:a(c),atoms:a("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":u,indent:function(e,t,n){if("statement"==t.type&&/^@\w/.test(n))return t.indented}},modeProps:{fold:"brace"}}),g("text/x-squirrel",{name:"clike",keywords:a("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:a(c),blockKeywords:a("case catch class else for foreach if switch try while"),defKeywords:a("function local class"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"#":u},modeProps:{fold:["brace","include"]}});var v=null;g("text/x-ceylon",{name:"clike",keywords:a("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:a("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:a("class dynamic function interface module object package value"),builtin:a("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:a("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=function e(t){return function(n,i){for(var r,o=!1,a=!1;!n.eol();){if(!o&&n.match('"')&&("single"==t||n.match('""'))){a=!0;break}if(!o&&n.match("``")){v=e(t),a=!0;break}r=n.next(),o="single"==t&&!o&&"\\"==r}return a&&(i.tokenize=null),"string"}}(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!v||!e.match("`"))&&(t.tokenize=v,v=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,n){if(("variable"==n||"type"==n)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})});